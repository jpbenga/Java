<!DOCTYPE html>
<html lang="en-US" dir="ltr">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Spring | Java Annotations</title>
    <meta name="description" content="Memento Annotation Java">
    <link rel="preload stylesheet" href="/Java/assets/style.ae7e0354.css" as="style">
    
    <script type="module" src="/Java/assets/app.a10d318e.js"></script>
    <link rel="preload" href="/Java/assets/inter-roman-latin.2ed14f66.woff2" as="font" type="font/woff2" crossorigin="">
    <link rel="modulepreload" href="/Java/assets/chunks/framework.bf5b583c.js">
    <link rel="modulepreload" href="/Java/assets/chunks/theme.c043a5ce.js">
    <link rel="modulepreload" href="/Java/assets/src_annotations_articles_spring.md.3c74766a.lean.js">
    <script id="check-dark-light">(()=>{const e=localStorage.getItem("vitepress-theme-appearance")||"",a=window.matchMedia("(prefers-color-scheme: dark)").matches;(!e||e==="auto"?a:e==="dark")&&document.documentElement.classList.add("dark")})();</script>
  </head>
  <body>
    <div id="app"><div class="Layout" data-v-60727218><!--[--><!--]--><!--[--><span tabindex="-1" data-v-fd794dc7></span><a href="#VPContent" class="VPSkipLink visually-hidden" data-v-fd794dc7> Skip to content </a><!--]--><!----><header class="VPNav" data-v-60727218 data-v-b1949460><div class="VPNavBar has-sidebar" data-v-b1949460 data-v-e11e9dc8><div class="container" data-v-e11e9dc8><div class="title" data-v-e11e9dc8><div class="VPNavBarTitle has-sidebar" data-v-e11e9dc8 data-v-24739840><a class="title" href="/Java/" data-v-24739840><!--[--><!--]--><!--[--><img class="VPImage logo" src="https://www.clelia.fr/images/Header.png" alt data-v-74766fef><!--]--><!--[-->Java Annotations<!--]--><!--[--><!--]--></a></div></div><div class="content" data-v-e11e9dc8><div class="curtain" data-v-e11e9dc8></div><div class="content-body" data-v-e11e9dc8><!--[--><!--]--><div class="VPNavBarSearch search" style="--vp-meta-key:&#39;Meta&#39;;" data-v-e11e9dc8><!--[--><!----><div id="local-search"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg class="DocSearch-Search-Icon" width="20" height="20" viewBox="0 0 20 20" aria-label="search icon"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"><kbd class="DocSearch-Button-Key"></kbd><kbd class="DocSearch-Button-Key">K</kbd></span></button></div><!--]--></div><nav aria-labelledby="main-nav-aria-label" class="VPNavBarMenu menu" data-v-e11e9dc8 data-v-c6c3e6d4><span id="main-nav-aria-label" class="visually-hidden" data-v-c6c3e6d4>Main Navigation</span><!--[--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/Java/" tabindex="0" data-v-c6c3e6d4 data-v-f652bfb4><!--[-->Accueil<!--]--></a><!--]--><!--[--><div class="VPFlyout VPNavBarMenuGroup" data-v-c6c3e6d4 data-v-64c29883><button type="button" class="button" aria-haspopup="true" aria-expanded="false" data-v-64c29883><span class="text" data-v-64c29883><!----> Menu <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="text-icon" data-v-64c29883><path d="M12,16c-0.3,0-0.5-0.1-0.7-0.3l-6-6c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l5.3,5.3l5.3-5.3c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-6,6C12.5,15.9,12.3,16,12,16z"></path></svg></span></button><div class="menu" data-v-64c29883><div class="VPMenu" data-v-64c29883 data-v-7bffa9cd><div class="items" data-v-7bffa9cd><!--[--><!--[--><div class="VPMenuLink" data-v-7bffa9cd data-v-be8d031a><a class="VPLink link" href="/Java/src/annotations/articles/introduction.html" data-v-be8d031a><!--[-->Annotations Java<!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-7bffa9cd data-v-be8d031a><a class="VPLink link" href="/Java/src/cookbook/articles/introduction.html" data-v-be8d031a><!--[-->Cookbook<!--]--></a></div><!--]--><!--]--></div><!--[--><!--]--></div></div></div><!--]--><!--]--></nav><!----><div class="VPNavBarAppearance appearance" data-v-e11e9dc8 data-v-88042fc7><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title="toggle dark mode" aria-checked="false" data-v-88042fc7 data-v-92088bc5 data-v-0a2eba70><span class="check" data-v-0a2eba70><span class="icon" data-v-0a2eba70><!--[--><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="sun" data-v-92088bc5><path d="M12,18c-3.3,0-6-2.7-6-6s2.7-6,6-6s6,2.7,6,6S15.3,18,12,18zM12,8c-2.2,0-4,1.8-4,4c0,2.2,1.8,4,4,4c2.2,0,4-1.8,4-4C16,9.8,14.2,8,12,8z"></path><path d="M12,4c-0.6,0-1-0.4-1-1V1c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,3.6,12.6,4,12,4z"></path><path d="M12,24c-0.6,0-1-0.4-1-1v-2c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,23.6,12.6,24,12,24z"></path><path d="M5.6,6.6c-0.3,0-0.5-0.1-0.7-0.3L3.5,4.9c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C6.2,6.5,5.9,6.6,5.6,6.6z"></path><path d="M19.8,20.8c-0.3,0-0.5-0.1-0.7-0.3l-1.4-1.4c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C20.3,20.7,20,20.8,19.8,20.8z"></path><path d="M3,13H1c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S3.6,13,3,13z"></path><path d="M23,13h-2c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S23.6,13,23,13z"></path><path d="M4.2,20.8c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C4.7,20.7,4.5,20.8,4.2,20.8z"></path><path d="M18.4,6.6c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C18.9,6.5,18.6,6.6,18.4,6.6z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="moon" data-v-92088bc5><path d="M12.1,22c-0.3,0-0.6,0-0.9,0c-5.5-0.5-9.5-5.4-9-10.9c0.4-4.8,4.2-8.6,9-9c0.4,0,0.8,0.2,1,0.5c0.2,0.3,0.2,0.8-0.1,1.1c-2,2.7-1.4,6.4,1.3,8.4c2.1,1.6,5,1.6,7.1,0c0.3-0.2,0.7-0.3,1.1-0.1c0.3,0.2,0.5,0.6,0.5,1c-0.2,2.7-1.5,5.1-3.6,6.8C16.6,21.2,14.4,22,12.1,22zM9.3,4.4c-2.9,1-5,3.6-5.2,6.8c-0.4,4.4,2.8,8.3,7.2,8.7c2.1,0.2,4.2-0.4,5.8-1.8c1.1-0.9,1.9-2.1,2.4-3.4c-2.5,0.9-5.3,0.5-7.5-1.1C9.2,11.4,8.1,7.7,9.3,4.4z"></path></svg><!--]--></span></span></button></div><div class="VPSocialLinks VPNavBarSocialLinks social-links" data-v-e11e9dc8 data-v-08b35e6f data-v-f2234a39><!--[--><a class="VPSocialLink no-icon" href="https://github.com/vuejs/vitepress" aria-label="github" target="_blank" rel="noopener" data-v-f2234a39 data-v-efc53bd4><svg role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>GitHub</title><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"/></svg></a><!--]--></div><div class="VPFlyout VPNavBarExtra extra" data-v-e11e9dc8 data-v-47bb42ad data-v-64c29883><button type="button" class="button" aria-haspopup="true" aria-expanded="false" aria-label="extra navigation" data-v-64c29883><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="icon" data-v-64c29883><circle cx="12" cy="12" r="2"></circle><circle cx="19" cy="12" r="2"></circle><circle cx="5" cy="12" r="2"></circle></svg></button><div class="menu" data-v-64c29883><div class="VPMenu" data-v-64c29883 data-v-7bffa9cd><!----><!--[--><!--[--><!----><div class="group" data-v-47bb42ad><div class="item appearance" data-v-47bb42ad><p class="label" data-v-47bb42ad>Appearance</p><div class="appearance-action" data-v-47bb42ad><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title="toggle dark mode" aria-checked="false" data-v-47bb42ad data-v-92088bc5 data-v-0a2eba70><span class="check" data-v-0a2eba70><span class="icon" data-v-0a2eba70><!--[--><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="sun" data-v-92088bc5><path d="M12,18c-3.3,0-6-2.7-6-6s2.7-6,6-6s6,2.7,6,6S15.3,18,12,18zM12,8c-2.2,0-4,1.8-4,4c0,2.2,1.8,4,4,4c2.2,0,4-1.8,4-4C16,9.8,14.2,8,12,8z"></path><path d="M12,4c-0.6,0-1-0.4-1-1V1c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,3.6,12.6,4,12,4z"></path><path d="M12,24c-0.6,0-1-0.4-1-1v-2c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,23.6,12.6,24,12,24z"></path><path d="M5.6,6.6c-0.3,0-0.5-0.1-0.7-0.3L3.5,4.9c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C6.2,6.5,5.9,6.6,5.6,6.6z"></path><path d="M19.8,20.8c-0.3,0-0.5-0.1-0.7-0.3l-1.4-1.4c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C20.3,20.7,20,20.8,19.8,20.8z"></path><path d="M3,13H1c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S3.6,13,3,13z"></path><path d="M23,13h-2c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S23.6,13,23,13z"></path><path d="M4.2,20.8c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C4.7,20.7,4.5,20.8,4.2,20.8z"></path><path d="M18.4,6.6c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C18.9,6.5,18.6,6.6,18.4,6.6z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="moon" data-v-92088bc5><path d="M12.1,22c-0.3,0-0.6,0-0.9,0c-5.5-0.5-9.5-5.4-9-10.9c0.4-4.8,4.2-8.6,9-9c0.4,0,0.8,0.2,1,0.5c0.2,0.3,0.2,0.8-0.1,1.1c-2,2.7-1.4,6.4,1.3,8.4c2.1,1.6,5,1.6,7.1,0c0.3-0.2,0.7-0.3,1.1-0.1c0.3,0.2,0.5,0.6,0.5,1c-0.2,2.7-1.5,5.1-3.6,6.8C16.6,21.2,14.4,22,12.1,22zM9.3,4.4c-2.9,1-5,3.6-5.2,6.8c-0.4,4.4,2.8,8.3,7.2,8.7c2.1,0.2,4.2-0.4,5.8-1.8c1.1-0.9,1.9-2.1,2.4-3.4c-2.5,0.9-5.3,0.5-7.5-1.1C9.2,11.4,8.1,7.7,9.3,4.4z"></path></svg><!--]--></span></span></button></div></div></div><div class="group" data-v-47bb42ad><div class="item social-links" data-v-47bb42ad><div class="VPSocialLinks social-links-list" data-v-47bb42ad data-v-f2234a39><!--[--><a class="VPSocialLink no-icon" href="https://github.com/vuejs/vitepress" aria-label="github" target="_blank" rel="noopener" data-v-f2234a39 data-v-efc53bd4><svg role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>GitHub</title><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"/></svg></a><!--]--></div></div></div><!--]--><!--]--></div></div></div><!--[--><!--]--><button type="button" class="VPNavBarHamburger hamburger" aria-label="mobile navigation" aria-expanded="false" aria-controls="VPNavScreen" data-v-e11e9dc8 data-v-670493dd><span class="container" data-v-670493dd><span class="top" data-v-670493dd></span><span class="middle" data-v-670493dd></span><span class="bottom" data-v-670493dd></span></span></button></div></div></div></div><!----></header><div class="VPLocalNav reached-top" data-v-60727218 data-v-1a7bebab><button class="menu" aria-expanded="false" aria-controls="VPSidebarNav" data-v-1a7bebab><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="menu-icon" data-v-1a7bebab><path d="M17,11H3c-0.6,0-1-0.4-1-1s0.4-1,1-1h14c0.6,0,1,0.4,1,1S17.6,11,17,11z"></path><path d="M21,7H3C2.4,7,2,6.6,2,6s0.4-1,1-1h18c0.6,0,1,0.4,1,1S21.6,7,21,7z"></path><path d="M21,15H3c-0.6,0-1-0.4-1-1s0.4-1,1-1h18c0.6,0,1,0.4,1,1S21.6,15,21,15z"></path><path d="M17,19H3c-0.6,0-1-0.4-1-1s0.4-1,1-1h14c0.6,0,1,0.4,1,1S17.6,19,17,19z"></path></svg><span class="menu-text" data-v-1a7bebab>Menu</span></button><div class="VPLocalNavOutlineDropdown" style="--vp-vh:0px;" data-v-1a7bebab data-v-adc0d96a><button data-v-adc0d96a>Return to top</button><!----></div></div><aside class="VPSidebar" data-v-60727218 data-v-0a85c7be><div class="curtain" data-v-0a85c7be></div><nav class="nav" id="VPSidebarNav" aria-labelledby="sidebar-aria-label" tabindex="-1" data-v-0a85c7be><span class="visually-hidden" id="sidebar-aria-label" data-v-0a85c7be> Sidebar Navigation </span><!--[--><!--]--><!--[--><div class="group" data-v-0a85c7be><section class="VPSidebarItem level-0" data-v-0a85c7be data-v-542ffefa><div class="item" role="button" tabindex="0" data-v-542ffefa><div class="indicator" data-v-542ffefa></div><h2 class="text" data-v-542ffefa>Annotations</h2><!----></div><div class="items" data-v-542ffefa><!--[--><div class="VPSidebarItem level-1 is-link" data-v-542ffefa data-v-542ffefa><div class="item" data-v-542ffefa><div class="indicator" data-v-542ffefa></div><a class="VPLink link link" href="/Java/src/annotations/articles/introduction.html" data-v-542ffefa><!--[--><p class="text" data-v-542ffefa>Introduction</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-542ffefa data-v-542ffefa><div class="item" data-v-542ffefa><div class="indicator" data-v-542ffefa></div><a class="VPLink link link" href="/Java/src/annotations/articles/hibernate.html" data-v-542ffefa><!--[--><p class="text" data-v-542ffefa>Hibernate</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-542ffefa data-v-542ffefa><div class="item" data-v-542ffefa><div class="indicator" data-v-542ffefa></div><a class="VPLink link link" href="/Java/src/annotations/articles/java_lang.html" data-v-542ffefa><!--[--><p class="text" data-v-542ffefa>Java_lang</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-542ffefa data-v-542ffefa><div class="item" data-v-542ffefa><div class="indicator" data-v-542ffefa></div><a class="VPLink link link" href="/Java/src/annotations/articles/spring.html" data-v-542ffefa><!--[--><p class="text" data-v-542ffefa>Spring</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-542ffefa data-v-542ffefa><div class="item" data-v-542ffefa><div class="indicator" data-v-542ffefa></div><a class="VPLink link link" href="/Java/src/annotations/articles/lombok.html" data-v-542ffefa><!--[--><p class="text" data-v-542ffefa>Lombok</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-542ffefa data-v-542ffefa><div class="item" data-v-542ffefa><div class="indicator" data-v-542ffefa></div><a class="VPLink link link" href="/Java/src/annotations/articles/validation.html" data-v-542ffefa><!--[--><p class="text" data-v-542ffefa>Validation</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-542ffefa data-v-542ffefa><div class="item" data-v-542ffefa><div class="indicator" data-v-542ffefa></div><a class="VPLink link link" href="/Java/src/annotations/articles/swagger.html" data-v-542ffefa><!--[--><p class="text" data-v-542ffefa>Swagger</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-542ffefa data-v-542ffefa><div class="item" data-v-542ffefa><div class="indicator" data-v-542ffefa></div><a class="VPLink link link" href="/Java/src/annotations/articles/jackson.html" data-v-542ffefa><!--[--><p class="text" data-v-542ffefa>Jackson</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><!--]--><!--[--><!--]--></nav></aside><div class="VPContent has-sidebar" id="VPContent" data-v-60727218 data-v-fcf4b97b><div class="VPDoc has-sidebar has-aside" data-v-fcf4b97b data-v-281cfc61><!--[--><!--]--><div class="container" data-v-281cfc61><div class="aside" data-v-281cfc61><div class="aside-curtain" data-v-281cfc61></div><div class="aside-container" data-v-281cfc61><div class="aside-content" data-v-281cfc61><div class="VPDocAside" data-v-281cfc61 data-v-79cae1a0><!--[--><!--]--><!--[--><!--]--><div class="VPDocAsideOutline" data-v-79cae1a0 data-v-c3ff47cc><div class="content" data-v-c3ff47cc><div class="outline-marker" data-v-c3ff47cc></div><div class="outline-title" data-v-c3ff47cc>On this page</div><nav aria-labelledby="doc-outline-aria-label" data-v-c3ff47cc><span class="visually-hidden" id="doc-outline-aria-label" data-v-c3ff47cc> Table of Contents for current page </span><ul class="root" data-v-c3ff47cc data-v-9080e260><!--[--><!--]--></ul></nav></div></div><!--[--><!--]--><div class="spacer" data-v-79cae1a0></div><!--[--><!--]--><!----><!--[--><!--]--><!--[--><!--]--></div></div></div></div><div class="content" data-v-281cfc61><div class="content-container" data-v-281cfc61><!--[--><!--]--><!----><main class="main" data-v-281cfc61><div style="position:relative;" class="vp-doc _Java_src_annotations_articles_spring" data-v-281cfc61><div><h1 id="spring" tabindex="-1">Spring <a class="header-anchor" href="#spring" aria-label="Permalink to &quot;Spring&quot;">​</a></h1><h2 id="autowired" tabindex="-1">@Autowired <a class="header-anchor" href="#autowired" aria-label="Permalink to &quot;@Autowired&quot;">​</a></h2><p>Demande à Spring d&#39;injecter une dépendance dans l&#39;objet de la classe considérée. Exemple : demande d’injection de la dépendance enqueteDao dans une classe de service :</p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki github-dark-dimmed vp-code-dark"><code><span class="line"><span style="color:#ADBAC7;">@</span><span style="color:#F47067;">Autowired</span></span>
<span class="line"><span style="color:#F47067;">private</span><span style="color:#ADBAC7;"> </span><span style="color:#F47067;">final</span><span style="color:#ADBAC7;"> EnqueteDao</span><span style="color:#F69D50;"> </span><span style="color:#ADBAC7;">enqueteDao;</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">@</span><span style="color:#D73A49;">Autowired</span></span>
<span class="line"><span style="color:#D73A49;">private</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">final</span><span style="color:#24292E;"> EnqueteDao enqueteDao;</span></span></code></pre></div><p>Cette annotation est de moins en moins utilisée car la communauté Spring suggère de demander l’injection de dépendances via le constructeur de la classe. En suivant cette recommandation, l’exemple ci-dessus sera ré-écrit :</p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki github-dark-dimmed vp-code-dark"><code><span class="line"><span style="color:#F47067;">private</span><span style="color:#ADBAC7;"> </span><span style="color:#F47067;">final</span><span style="color:#ADBAC7;"> EnqueteDao</span><span style="color:#F69D50;"> </span><span style="color:#ADBAC7;">enqueteDao;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F47067;">public</span><span style="color:#ADBAC7;"> </span><span style="color:#DCBDFB;">EnqueteServiceImpl</span><span style="color:#ADBAC7;">(EnqueteDao enqueteDao) {</span></span>
<span class="line"><span style="color:#ADBAC7;">    </span><span style="color:#6CB6FF;">super</span><span style="color:#ADBAC7;">();</span></span>
<span class="line"><span style="color:#ADBAC7;">    </span><span style="color:#6CB6FF;">this</span><span style="color:#ADBAC7;">.enqueteDao </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> enqueteDao;</span></span>
<span class="line"><span style="color:#ADBAC7;">    }</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">private</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">final</span><span style="color:#24292E;"> EnqueteDao enqueteDao;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;">public</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">EnqueteServiceImpl</span><span style="color:#24292E;">(EnqueteDao enqueteDao) {</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#005CC5;">super</span><span style="color:#24292E;">();</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#005CC5;">this</span><span style="color:#24292E;">.enqueteDao </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> enqueteDao;</span></span>
<span class="line"><span style="color:#24292E;">    }</span></span></code></pre></div><h2 id="component" tabindex="-1">@Component <a class="header-anchor" href="#component" aria-label="Permalink to &quot;@Component&quot;">​</a></h2><p>Laisse à Spring la responsabilité de déterminer le stéréotype ou le rôle de la classe, autrement dit à quelle couche logicielle appartient la classe annotée. Spring va créer une instance de cette classe, instace qu’il va ensuite ajouter dans son conteneur IoC.</p><p>Cette annotation fonctionne aussi sur des filtres (classes implémentant l’interface javax.servlet.Filter)</p><p>Il existe cinq types de stéréotypes : <a href="https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/stereotype/package-summary.html" target="_blank" rel="noreferrer">https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/stereotype/package-summary.html</a></p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki github-dark-dimmed vp-code-dark"><code><span class="line"><span style="color:#ADBAC7;">@</span><span style="color:#F47067;">Component</span></span>
<span class="line"><span style="color:#F47067;">public</span><span style="color:#ADBAC7;"> </span><span style="color:#F47067;">class</span><span style="color:#ADBAC7;"> </span><span style="color:#F69D50;">EnqueteServiceImpl</span><span style="color:#ADBAC7;"> </span><span style="color:#F47067;">implements</span><span style="color:#ADBAC7;"> </span><span style="color:#6CB6FF;">EnqueteService</span><span style="color:#ADBAC7;"> {}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">@</span><span style="color:#D73A49;">Component</span></span>
<span class="line"><span style="color:#D73A49;">public</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">class</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">EnqueteServiceImpl</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">implements</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">EnqueteService</span><span style="color:#24292E;"> {}</span></span></code></pre></div><h2 id="controller" tabindex="-1">@Controller <a class="header-anchor" href="#controller" aria-label="Permalink to &quot;@Controller&quot;">​</a></h2><p>Déclare une classe qui va traiter les requêtes HTTP. Cette classe est considérée comme le contrôleur dans l’architecture MVC</p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki github-dark-dimmed vp-code-dark"><code><span class="line"><span style="color:#ADBAC7;">@</span><span style="color:#F47067;">Controller</span></span>
<span class="line"><span style="color:#F47067;">public</span><span style="color:#ADBAC7;"> </span><span style="color:#F47067;">class</span><span style="color:#ADBAC7;"> </span><span style="color:#F69D50;">EnqueteController</span><span style="color:#ADBAC7;"> {}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">@</span><span style="color:#D73A49;">Controller</span></span>
<span class="line"><span style="color:#D73A49;">public</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">class</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">EnqueteController</span><span style="color:#24292E;"> {}</span></span></code></pre></div><h2 id="restcontroller" tabindex="-1">@RestController <a class="header-anchor" href="#restcontroller" aria-label="Permalink to &quot;@RestController&quot;">​</a></h2><p>Déclare une classe qui va traiter des requêtes HTTP dans une API REST</p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki github-dark-dimmed vp-code-dark"><code><span class="line"><span style="color:#ADBAC7;">@</span><span style="color:#F47067;">RestController</span></span>
<span class="line"><span style="color:#F47067;">public</span><span style="color:#ADBAC7;"> </span><span style="color:#F47067;">class</span><span style="color:#ADBAC7;"> </span><span style="color:#F69D50;">EnqueteControllerWS</span><span style="color:#ADBAC7;"> {}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">@</span><span style="color:#D73A49;">RestController</span></span>
<span class="line"><span style="color:#D73A49;">public</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">class</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">EnqueteControllerWS</span><span style="color:#24292E;"> {}</span></span></code></pre></div><h2 id="service" tabindex="-1">@Service <a class="header-anchor" href="#service" aria-label="Permalink to &quot;@Service&quot;">​</a></h2><p>Déclare une classe de service</p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki github-dark-dimmed vp-code-dark"><code><span class="line"><span style="color:#ADBAC7;">@</span><span style="color:#F47067;">Service</span></span>
<span class="line"><span style="color:#F47067;">public</span><span style="color:#ADBAC7;"> </span><span style="color:#F47067;">class</span><span style="color:#ADBAC7;"> </span><span style="color:#F69D50;">EnqueteServiceImpl</span><span style="color:#ADBAC7;"> </span><span style="color:#F47067;">implements</span><span style="color:#ADBAC7;"> </span><span style="color:#6CB6FF;">EnqueteService</span><span style="color:#ADBAC7;"> {}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">@</span><span style="color:#D73A49;">Service</span></span>
<span class="line"><span style="color:#D73A49;">public</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">class</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">EnqueteServiceImpl</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">implements</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">EnqueteService</span><span style="color:#24292E;"> {}</span></span></code></pre></div><p>En oubliant l’annotation <code>@Service</code> sur la classe de service on obtient l’erreur : Parameter 2 of constructor in fr.clelia.fx.enquetes.controller.EnqueteController required a bean of type &#39;fr.clelia.fx.enquetes.service.EnqueteService&#39; that could not be found.</p><h2 id="repository" tabindex="-1">@Repository <a class="header-anchor" href="#repository" aria-label="Permalink to &quot;@Repository&quot;">​</a></h2><p>Déclare une classe DAO (Data Access Object : classe capable de communiquer avec la base de données)</p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki github-dark-dimmed vp-code-dark"><code><span class="line"><span style="color:#ADBAC7;">@</span><span style="color:#F47067;">Repository</span></span>
<span class="line"><span style="color:#F47067;">public</span><span style="color:#ADBAC7;"> </span><span style="color:#F47067;">class</span><span style="color:#ADBAC7;"> </span><span style="color:#F69D50;">JoueurDaoImpl</span><span style="color:#ADBAC7;"> </span><span style="color:#F47067;">implements</span><span style="color:#ADBAC7;"> </span><span style="color:#6CB6FF;">JoueurDao</span><span style="color:#ADBAC7;"> {}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">@</span><span style="color:#D73A49;">Repository</span></span>
<span class="line"><span style="color:#D73A49;">public</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">class</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">JoueurDaoImpl</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">implements</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">JoueurDao</span><span style="color:#24292E;"> {}</span></span></code></pre></div><p>Grâce à Spring Data, cette annotation n’est quasiment plus utilisée car pour mettre en œuvre une DAO il suffit de déclarer une interface qui hérite de <code>JpaRepository</code>, <code>PagingAndSortingRepository</code> ou <code>CrudRepository</code></p><p>Spring Data implémente les DAO à notre place, voir la classe SimpleJpaRepository :</p><p><a href="https://github.com/spring-projects/spring-data-jpa/blob/main/src/main/java/org/springframework/data/jpa/repository/support/SimpleJpaRepository.java" target="_blank" rel="noreferrer">https://github.com/spring-projects/spring-data-jpa/blob/main/src/main/java/org/springframework/data/jpa/repository/support/SimpleJpaRepository.java</a></p><h2 id="query" tabindex="-1">@Query <a class="header-anchor" href="#query" aria-label="Permalink to &quot;@Query&quot;">​</a></h2><p>Déclare la requête HQL associée à la méthode de l’interface DAO</p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki github-dark-dimmed vp-code-dark"><code><span class="line"><span style="color:#ADBAC7;">@</span><span style="color:#F47067;">Query</span><span style="color:#ADBAC7;">(</span><span style="color:#96D0FF;">&quot;FROM Theme t ORDER BY size(t.enquetes) DESC&quot;</span><span style="color:#ADBAC7;">)</span></span>
<span class="line"><span style="color:#ADBAC7;">List</span><span style="color:#F47067;">&lt;</span><span style="color:#ADBAC7;">Theme</span><span style="color:#F47067;">&gt;</span><span style="color:#ADBAC7;"> </span><span style="color:#DCBDFB;">findThemesSortedByNbEnquetes</span><span style="color:#ADBAC7;">();</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">@</span><span style="color:#D73A49;">Query</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;FROM Theme t ORDER BY size(t.enquetes) DESC&quot;</span><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#24292E;">List</span><span style="color:#D73A49;">&lt;</span><span style="color:#24292E;">Theme</span><span style="color:#D73A49;">&gt;</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">findThemesSortedByNbEnquetes</span><span style="color:#24292E;">();</span></span></code></pre></div><p>Il est possible de fournir une requête SQL native en utilisant l’attribut <code>nativeQuery=true</code></p><p>A noter: sans l’annotation <code>@Query</code>, Spring Data génère à la volée une requête HQL en analysant le nom de la méthode (on parle alors de requête par dérivation) :</p><p><a href="https://docs.spring.io/spring-data/jpa/docs/current/reference/html/" target="_blank" rel="noreferrer">https://docs.spring.io/spring-data/jpa/docs/current/reference/html/</a> #jpa.query-methods.query-creation</p><p>Pour résumer, on peut déclarer des méthodes dans une interface DAO de trois manières différentes :</p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki github-dark-dimmed vp-code-dark"><code><span class="line"><span style="color:#768390;">// Méthode annotée avec @Query portant une requête HQL</span></span>
<span class="line"><span style="color:#ADBAC7;">@</span><span style="color:#F47067;">Query</span><span style="color:#ADBAC7;">(</span><span style="color:#96D0FF;">&quot;FROM Theme ORDER BY id DESC&quot;</span><span style="color:#ADBAC7;">)</span></span>
<span class="line"><span style="color:#ADBAC7;">List</span><span style="color:#F47067;">&lt;</span><span style="color:#ADBAC7;">Theme</span><span style="color:#F47067;">&gt;</span><span style="color:#ADBAC7;"> </span><span style="color:#DCBDFB;">findThemes</span><span style="color:#ADBAC7;">();</span></span>
<span class="line"><span style="color:#768390;">// Méthode annotée avec @Query portant une requête SQL native</span></span>
<span class="line"><span style="color:#ADBAC7;">@</span><span style="color:#F47067;">Query</span><span style="color:#ADBAC7;">(</span><span style="color:#6CB6FF;">value</span><span style="color:#F47067;">=</span><span style="color:#96D0FF;">&quot;SELECT id, nom FROM theme ORDER BY id DESC&quot;</span><span style="color:#ADBAC7;">, </span><span style="color:#6CB6FF;">nativeQuery</span><span style="color:#F47067;">=</span><span style="color:#6CB6FF;">true</span><span style="color:#ADBAC7;">)</span></span>
<span class="line"><span style="color:#ADBAC7;">List</span><span style="color:#F47067;">&lt;</span><span style="color:#ADBAC7;">Theme</span><span style="color:#F47067;">&gt;</span><span style="color:#ADBAC7;"> </span><span style="color:#DCBDFB;">findThemes2</span><span style="color:#ADBAC7;">();</span></span>
<span class="line"><span style="color:#768390;">// Méthode dont le nom sera traduit par Spring Data pour produire une requête HQL</span></span>
<span class="line"><span style="color:#768390;">// Cette requête HQL sera transmise à Hibernate qui la traduira en requête SQL</span></span>
<span class="line"><span style="color:#ADBAC7;">List</span><span style="color:#F47067;">&lt;</span><span style="color:#ADBAC7;">Theme</span><span style="color:#F47067;">&gt;</span><span style="color:#ADBAC7;"> </span><span style="color:#DCBDFB;">findByNomContainingOrderByIdDesc</span><span style="color:#ADBAC7;">(String nom);</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;">// Méthode annotée avec @Query portant une requête HQL</span></span>
<span class="line"><span style="color:#24292E;">@</span><span style="color:#D73A49;">Query</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;FROM Theme ORDER BY id DESC&quot;</span><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#24292E;">List</span><span style="color:#D73A49;">&lt;</span><span style="color:#24292E;">Theme</span><span style="color:#D73A49;">&gt;</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">findThemes</span><span style="color:#24292E;">();</span></span>
<span class="line"><span style="color:#6A737D;">// Méthode annotée avec @Query portant une requête SQL native</span></span>
<span class="line"><span style="color:#24292E;">@</span><span style="color:#D73A49;">Query</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">value</span><span style="color:#D73A49;">=</span><span style="color:#032F62;">&quot;SELECT id, nom FROM theme ORDER BY id DESC&quot;</span><span style="color:#24292E;">, </span><span style="color:#005CC5;">nativeQuery</span><span style="color:#D73A49;">=</span><span style="color:#005CC5;">true</span><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#24292E;">List</span><span style="color:#D73A49;">&lt;</span><span style="color:#24292E;">Theme</span><span style="color:#D73A49;">&gt;</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">findThemes2</span><span style="color:#24292E;">();</span></span>
<span class="line"><span style="color:#6A737D;">// Méthode dont le nom sera traduit par Spring Data pour produire une requête HQL</span></span>
<span class="line"><span style="color:#6A737D;">// Cette requête HQL sera transmise à Hibernate qui la traduira en requête SQL</span></span>
<span class="line"><span style="color:#24292E;">List</span><span style="color:#D73A49;">&lt;</span><span style="color:#24292E;">Theme</span><span style="color:#D73A49;">&gt;</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">findByNomContainingOrderByIdDesc</span><span style="color:#24292E;">(String nom);</span></span></code></pre></div><h2 id="param" tabindex="-1">@Param <a class="header-anchor" href="#param" aria-label="Permalink to &quot;@Param&quot;">​</a></h2><p>Déclare les paramètres de la méthode Java devant être utilisés comme des paramètres HQL</p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki github-dark-dimmed vp-code-dark"><code><span class="line"><span style="color:#ADBAC7;">@</span><span style="color:#F47067;">Query</span><span style="color:#ADBAC7;">(</span><span style="color:#96D0FF;">&quot;FROM Question WHERE enquete.id=:eid&quot;</span><span style="color:#ADBAC7;">)</span></span>
<span class="line"><span style="color:#F47067;">public</span><span style="color:#ADBAC7;"> List</span><span style="color:#F47067;">&lt;</span><span style="color:#ADBAC7;">Question</span><span style="color:#F47067;">&gt;</span><span style="color:#ADBAC7;"> </span><span style="color:#DCBDFB;">findByIdEnquete</span><span style="color:#ADBAC7;">(@</span><span style="color:#F47067;">Param</span><span style="color:#ADBAC7;">(</span><span style="color:#96D0FF;">&quot;eid&quot;</span><span style="color:#ADBAC7;">) Long idEnquete);</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">@</span><span style="color:#D73A49;">Query</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;FROM Question WHERE enquete.id=:eid&quot;</span><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#D73A49;">public</span><span style="color:#24292E;"> List</span><span style="color:#D73A49;">&lt;</span><span style="color:#24292E;">Question</span><span style="color:#D73A49;">&gt;</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">findByIdEnquete</span><span style="color:#24292E;">(@</span><span style="color:#D73A49;">Param</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;eid&quot;</span><span style="color:#24292E;">) Long idEnquete);</span></span></code></pre></div><h2 id="modifying" tabindex="-1">@Modifying <a class="header-anchor" href="#modifying" aria-label="Permalink to &quot;@Modifying&quot;">​</a></h2><p>Annote une méthode d’une interface de la DAO qui exécute une requête de type <code>INSERT</code>, <code>UPDATE</code> ou <code>DELETE</code></p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki github-dark-dimmed vp-code-dark"><code><span class="line"><span style="color:#ADBAC7;">@</span><span style="color:#F47067;">Modifying</span></span>
<span class="line"><span style="color:#ADBAC7;">@</span><span style="color:#F47067;">Transactional</span></span>
<span class="line"><span style="color:#ADBAC7;">@</span><span style="color:#F47067;">Query</span><span style="color:#ADBAC7;">(</span><span style="color:#96D0FF;">&quot;UPDATE Enquete SET nom=upper(nom)&quot;</span><span style="color:#ADBAC7;">)</span></span>
<span class="line"><span style="color:#F47067;">void</span><span style="color:#ADBAC7;"> </span><span style="color:#DCBDFB;">updateNomEnquetes</span><span style="color:#ADBAC7;">();</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">@</span><span style="color:#D73A49;">Modifying</span></span>
<span class="line"><span style="color:#24292E;">@</span><span style="color:#D73A49;">Transactional</span></span>
<span class="line"><span style="color:#24292E;">@</span><span style="color:#D73A49;">Query</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;UPDATE Enquete SET nom=upper(nom)&quot;</span><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#D73A49;">void</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">updateNomEnquetes</span><span style="color:#24292E;">();</span></span></code></pre></div><h2 id="transactional" tabindex="-1">@Transactional <a class="header-anchor" href="#transactional" aria-label="Permalink to &quot;@Transactional&quot;">​</a></h2><p>Définit un contexte transactionnel (typiquement sur les méthodes des classes de service ou sur la classe de service) Si une annotation <code>@Transactional</code> est présente sur la classe et sur une méthode, c’est l’annotation sur la méthode qui l’emporte.</p><p>Pour définir une transaction en lecture seule (ce qui est très fréquent pour les méthodes de récupération dans les classes de services) : <code>@Transactional(readOnly = true)</code> La transaction a une propagation qui par défaut a la valeur <code>REQUIRED</code>. Avec cette valeur, Spring</p><p>teste s’il y a une transaction en cours et propage des changements dans cette transaction active. S’il n’y a pas de connexion active, Spring crée une nouvelle transaction.</p><p>Source : <a href="https://docs.spring.io/spring-framework/docs/5.3.9/reference/html/data-access.html#tx-propagation" target="_blank" rel="noreferrer">https://docs.spring.io/spring-framework/docs/5.3.9/reference/html/data-access.html#tx-propagation</a></p><p>Voici trois ressources détaillant les différents types de propagation et d’isolation :</p><p><a href="https://link.springer.com/content/pdf/bbm:978-1-4842-5626-8/1" target="_blank" rel="noreferrer">https://link.springer.com/content/pdf/bbm:978-1-4842-5626-8/1</a></p><p><a href="https://www.baeldung.com/spring-transactional-propagation-isolation" target="_blank" rel="noreferrer">https://www.baeldung.com/spring-transactional-propagation-isolation</a></p><p><a href="https://www.baeldung.com/transaction-configuration-with-jpa-and-spring" target="_blank" rel="noreferrer">https://www.baeldung.com/transaction-configuration-with-jpa-and-spring</a></p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki github-dark-dimmed vp-code-dark"><code><span class="line"><span style="color:#ADBAC7;">@</span><span style="color:#F47067;">Service</span></span>
<span class="line"><span style="color:#ADBAC7;">@</span><span style="color:#F47067;">Transactional</span></span>
<span class="line"><span style="color:#F47067;">public</span><span style="color:#ADBAC7;"> </span><span style="color:#F47067;">class</span><span style="color:#ADBAC7;"> </span><span style="color:#F69D50;">EnqueteServiceImpl</span><span style="color:#ADBAC7;"> </span><span style="color:#F47067;">implements</span><span style="color:#ADBAC7;"> </span><span style="color:#6CB6FF;">EnqueteService</span><span style="color:#ADBAC7;"> {}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">@</span><span style="color:#D73A49;">Service</span></span>
<span class="line"><span style="color:#24292E;">@</span><span style="color:#D73A49;">Transactional</span></span>
<span class="line"><span style="color:#D73A49;">public</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">class</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">EnqueteServiceImpl</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">implements</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">EnqueteService</span><span style="color:#24292E;"> {}</span></span></code></pre></div><h2 id="requestmapping" tabindex="-1">@RequestMapping <a class="header-anchor" href="#requestmapping" aria-label="Permalink to &quot;@RequestMapping&quot;">​</a></h2><p>Définit une correspondance entre une (ou plusieurs) URL et une méthode du contrôleur. En d’autres termes, cette annotation déclare la correspondance entre une méthode du contrôleur et la ou les URL qu’elle prend en charge</p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki github-dark-dimmed vp-code-dark"><code><span class="line"><span style="color:#ADBAC7;">@</span><span style="color:#F47067;">RequestMapping</span><span style="color:#ADBAC7;">(</span><span style="color:#6CB6FF;">value</span><span style="color:#ADBAC7;"> </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> { </span><span style="color:#96D0FF;">&quot;index&quot;</span><span style="color:#ADBAC7;">, </span><span style="color:#96D0FF;">&quot;/&quot;</span><span style="color:#ADBAC7;">}, </span><span style="color:#6CB6FF;">method</span><span style="color:#ADBAC7;"> </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> RequestMethod.GET )</span></span>
<span class="line"><span style="color:#F47067;">public</span><span style="color:#ADBAC7;"> ModelAndView </span><span style="color:#DCBDFB;">accueil</span><span style="color:#ADBAC7;">() {}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">@</span><span style="color:#D73A49;">RequestMapping</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">value</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> { </span><span style="color:#032F62;">&quot;index&quot;</span><span style="color:#24292E;">, </span><span style="color:#032F62;">&quot;/&quot;</span><span style="color:#24292E;">}, </span><span style="color:#005CC5;">method</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> RequestMethod.GET )</span></span>
<span class="line"><span style="color:#D73A49;">public</span><span style="color:#24292E;"> ModelAndView </span><span style="color:#6F42C1;">accueil</span><span style="color:#24292E;">() {}</span></span></code></pre></div><h2 id="requestparam" tabindex="-1">@RequestParam <a class="header-anchor" href="#requestparam" aria-label="Permalink to &quot;@RequestParam&quot;">​</a></h2><p>Indique que le paramètre de la méthode (du contrôleur) provient de l&#39;objet request. En d’autres termes, on demande à Spring de lire un paramètre présent dans la requête HTTP.</p><p>Spring convertira l&#39;objet dans le type attendu.</p><p><strong>Exemple 1 : Lecture des données dans l’URL</strong></p><p>On souhaite lire le paramètre ID fourni dans l’URL suivante : <a href="http://localhost:8080/enquete?ID=2" target="_blank" rel="noreferrer">http://localhost:8080/enquete?ID=2</a></p><p>Pour cela il faut déclarer un paramètre annoté <code>@RequestParam</code> comme suit :</p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki github-dark-dimmed vp-code-dark"><code><span class="line"><span style="color:#ADBAC7;">@</span><span style="color:#F47067;">RequestMapping</span><span style="color:#ADBAC7;">(</span><span style="color:#6CB6FF;">value</span><span style="color:#F47067;">=</span><span style="color:#96D0FF;">&quot;enquete&quot;</span><span style="color:#ADBAC7;">, </span><span style="color:#6CB6FF;">method</span><span style="color:#ADBAC7;"> </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> RequestMethod.GET)</span></span>
<span class="line"><span style="color:#F47067;">public</span><span style="color:#ADBAC7;"> ModelAndView </span><span style="color:#DCBDFB;">enqueteGet</span><span style="color:#ADBAC7;">(@</span><span style="color:#F47067;">RequestParam</span><span style="color:#ADBAC7;">(</span><span style="color:#6CB6FF;">name</span><span style="color:#F47067;">=</span><span style="color:#96D0FF;">&quot;ID&quot;</span><span style="color:#ADBAC7;">) Long id) {}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">@</span><span style="color:#D73A49;">RequestMapping</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">value</span><span style="color:#D73A49;">=</span><span style="color:#032F62;">&quot;enquete&quot;</span><span style="color:#24292E;">, </span><span style="color:#005CC5;">method</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> RequestMethod.GET)</span></span>
<span class="line"><span style="color:#D73A49;">public</span><span style="color:#24292E;"> ModelAndView </span><span style="color:#6F42C1;">enqueteGet</span><span style="color:#24292E;">(@</span><span style="color:#D73A49;">RequestParam</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">name</span><span style="color:#D73A49;">=</span><span style="color:#032F62;">&quot;ID&quot;</span><span style="color:#24292E;">) Long id) {}</span></span></code></pre></div><p><strong>Exemple 2 : Lecture des données saisies sur un formulaire HTML</strong> On considère le formulaire HTML suivant :</p><div class="language-html vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">html</span><pre class="shiki github-dark-dimmed vp-code-dark"><code><span class="line"><span style="color:#ADBAC7;">&lt;</span><span style="color:#8DDB8C;">form</span><span style="color:#ADBAC7;"> </span><span style="color:#6CB6FF;">action</span><span style="color:#ADBAC7;">=</span><span style="color:#96D0FF;">&quot;enregistrerQuestion&quot;</span><span style="color:#ADBAC7;"> </span><span style="color:#6CB6FF;">method</span><span style="color:#ADBAC7;">=</span><span style="color:#96D0FF;">&quot;post&quot;</span><span style="color:#ADBAC7;">&gt;</span></span>
<span class="line"><span style="color:#ADBAC7;">  &lt;</span><span style="color:#8DDB8C;">input</span><span style="color:#ADBAC7;"> </span><span style="color:#6CB6FF;">type</span><span style="color:#ADBAC7;">=</span><span style="color:#96D0FF;">&quot;text&quot;</span><span style="color:#ADBAC7;"> </span><span style="color:#6CB6FF;">name</span><span style="color:#ADBAC7;">=</span><span style="color:#96D0FF;">&quot;LIBELLE&quot;</span><span style="color:#ADBAC7;"> /&gt;</span></span>
<span class="line"><span style="color:#ADBAC7;">  &lt;</span><span style="color:#8DDB8C;">input</span><span style="color:#ADBAC7;"> </span><span style="color:#6CB6FF;">type</span><span style="color:#ADBAC7;">=</span><span style="color:#96D0FF;">&quot;hidden&quot;</span><span style="color:#ADBAC7;"> </span><span style="color:#6CB6FF;">name</span><span style="color:#ADBAC7;">=</span><span style="color:#96D0FF;">&quot;ID_ENQUETE&quot;</span><span style="color:#ADBAC7;"> /&gt;</span></span>
<span class="line"><span style="color:#ADBAC7;">  &lt;</span><span style="color:#8DDB8C;">input</span><span style="color:#ADBAC7;"> </span><span style="color:#6CB6FF;">type</span><span style="color:#ADBAC7;">=</span><span style="color:#96D0FF;">&quot;submit&quot;</span><span style="color:#ADBAC7;"> </span><span style="color:#6CB6FF;">value</span><span style="color:#ADBAC7;">=</span><span style="color:#96D0FF;">&quot;Enregistrer&quot;</span><span style="color:#ADBAC7;"> /&gt;</span></span>
<span class="line"><span style="color:#ADBAC7;">&lt;/</span><span style="color:#8DDB8C;">form</span><span style="color:#ADBAC7;">&gt;</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">&lt;</span><span style="color:#22863A;">form</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">action</span><span style="color:#24292E;">=</span><span style="color:#032F62;">&quot;enregistrerQuestion&quot;</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">method</span><span style="color:#24292E;">=</span><span style="color:#032F62;">&quot;post&quot;</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"><span style="color:#24292E;">  &lt;</span><span style="color:#22863A;">input</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">type</span><span style="color:#24292E;">=</span><span style="color:#032F62;">&quot;text&quot;</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">name</span><span style="color:#24292E;">=</span><span style="color:#032F62;">&quot;LIBELLE&quot;</span><span style="color:#24292E;"> /&gt;</span></span>
<span class="line"><span style="color:#24292E;">  &lt;</span><span style="color:#22863A;">input</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">type</span><span style="color:#24292E;">=</span><span style="color:#032F62;">&quot;hidden&quot;</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">name</span><span style="color:#24292E;">=</span><span style="color:#032F62;">&quot;ID_ENQUETE&quot;</span><span style="color:#24292E;"> /&gt;</span></span>
<span class="line"><span style="color:#24292E;">  &lt;</span><span style="color:#22863A;">input</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">type</span><span style="color:#24292E;">=</span><span style="color:#032F62;">&quot;submit&quot;</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">value</span><span style="color:#24292E;">=</span><span style="color:#032F62;">&quot;Enregistrer&quot;</span><span style="color:#24292E;"> /&gt;</span></span>
<span class="line"><span style="color:#24292E;">&lt;/</span><span style="color:#22863A;">form</span><span style="color:#24292E;">&gt;</span></span></code></pre></div><p>La méthode du contrôleur doit être annotée PostMapping car l’attribut method de la balise form est post. L’attribut value de l’annotation RequestMapping doit correspondre à la valeur de l’attribut action de la balise form</p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki github-dark-dimmed vp-code-dark"><code><span class="line"><span style="color:#ADBAC7;">@</span><span style="color:#F47067;">RequestMapping</span><span style="color:#ADBAC7;">(</span><span style="color:#6CB6FF;">value</span><span style="color:#ADBAC7;"> </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> </span><span style="color:#96D0FF;">&quot;enregistrerQuestion&quot;</span><span style="color:#ADBAC7;">, </span><span style="color:#6CB6FF;">method</span><span style="color:#ADBAC7;"> </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> RequestMethod.POST)</span></span>
<span class="line"><span style="color:#F47067;">public</span><span style="color:#ADBAC7;"> ModelAndView </span><span style="color:#DCBDFB;">questionPost</span><span style="color:#ADBAC7;">(@</span><span style="color:#F47067;">RequestParam</span><span style="color:#ADBAC7;">(</span><span style="color:#6CB6FF;">name</span><span style="color:#F47067;">=</span><span style="color:#96D0FF;">&quot;ID_ENQUETE&quot;</span><span style="color:#ADBAC7;">) Long idEnquete,</span></span>
<span class="line"><span style="color:#ADBAC7;">@</span><span style="color:#F47067;">RequestParam</span><span style="color:#ADBAC7;">(</span><span style="color:#6CB6FF;">name</span><span style="color:#F47067;">=</span><span style="color:#96D0FF;">&quot;LIBELLE&quot;</span><span style="color:#ADBAC7;">) String libelle) {}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">@</span><span style="color:#D73A49;">RequestMapping</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">value</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;enregistrerQuestion&quot;</span><span style="color:#24292E;">, </span><span style="color:#005CC5;">method</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> RequestMethod.POST)</span></span>
<span class="line"><span style="color:#D73A49;">public</span><span style="color:#24292E;"> ModelAndView </span><span style="color:#6F42C1;">questionPost</span><span style="color:#24292E;">(@</span><span style="color:#D73A49;">RequestParam</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">name</span><span style="color:#D73A49;">=</span><span style="color:#032F62;">&quot;ID_ENQUETE&quot;</span><span style="color:#24292E;">) Long idEnquete,</span></span>
<span class="line"><span style="color:#24292E;">@</span><span style="color:#D73A49;">RequestParam</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">name</span><span style="color:#D73A49;">=</span><span style="color:#032F62;">&quot;LIBELLE&quot;</span><span style="color:#24292E;">) String libelle) {}</span></span></code></pre></div><p>Il est possible de rassembler tous les paramètres dans un dictionnaire comme suit :</p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki github-dark-dimmed vp-code-dark"><code><span class="line"><span style="color:#ADBAC7;">@</span><span style="color:#F47067;">RequestMapping</span><span style="color:#ADBAC7;">(</span><span style="color:#6CB6FF;">value</span><span style="color:#ADBAC7;"> </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> { </span><span style="color:#96D0FF;">&quot;index&quot;</span><span style="color:#ADBAC7;">, </span><span style="color:#96D0FF;">&quot;/&quot;</span><span style="color:#ADBAC7;">}, </span><span style="color:#6CB6FF;">method</span><span style="color:#ADBAC7;"> </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> RequestMethod.GET) </span><span style="color:#F47067;">public</span><span style="color:#ADBAC7;"> ModelAndView </span><span style="color:#DCBDFB;">accueil</span><span style="color:#ADBAC7;">(@</span><span style="color:#F47067;">RequestParam</span><span style="color:#ADBAC7;"> Map</span><span style="color:#F47067;">&lt;</span><span style="color:#ADBAC7;">String, String</span><span style="color:#F47067;">&gt;</span><span style="color:#ADBAC7;"> map) {}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">@</span><span style="color:#D73A49;">RequestMapping</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">value</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> { </span><span style="color:#032F62;">&quot;index&quot;</span><span style="color:#24292E;">, </span><span style="color:#032F62;">&quot;/&quot;</span><span style="color:#24292E;">}, </span><span style="color:#005CC5;">method</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> RequestMethod.GET) </span><span style="color:#D73A49;">public</span><span style="color:#24292E;"> ModelAndView </span><span style="color:#6F42C1;">accueil</span><span style="color:#24292E;">(@</span><span style="color:#D73A49;">RequestParam</span><span style="color:#24292E;"> Map</span><span style="color:#D73A49;">&lt;</span><span style="color:#24292E;">String, String</span><span style="color:#D73A49;">&gt;</span><span style="color:#24292E;"> map) {}</span></span></code></pre></div><p>Pour ne pas obliger la présence d’un paramètre (et éviter un code retour 400 si le paramètre est absent), l’attribut required sera affecté à false :</p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki github-dark-dimmed vp-code-dark"><code><span class="line"><span style="color:#ADBAC7;">@</span><span style="color:#F47067;">RequestMapping</span><span style="color:#ADBAC7;">(</span><span style="color:#6CB6FF;">value</span><span style="color:#ADBAC7;"> </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> </span><span style="color:#96D0FF;">&quot;question&quot;</span><span style="color:#ADBAC7;">, </span><span style="color:#6CB6FF;">method</span><span style="color:#ADBAC7;"> </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> RequestMethod.POST) </span><span style="color:#F47067;">public</span><span style="color:#ADBAC7;"> ModelAndView </span><span style="color:#DCBDFB;">questionPost</span><span style="color:#ADBAC7;">(</span></span>
<span class="line"><span style="color:#ADBAC7;">@</span><span style="color:#F47067;">RequestParam</span><span style="color:#ADBAC7;">(</span><span style="color:#6CB6FF;">name</span><span style="color:#F47067;">=</span><span style="color:#96D0FF;">&quot;ID_ENQUETE&quot;</span><span style="color:#ADBAC7;">) Long idEnquete, @</span><span style="color:#F47067;">RequestParam</span><span style="color:#ADBAC7;">(</span><span style="color:#6CB6FF;">name</span><span style="color:#F47067;">=</span><span style="color:#96D0FF;">&quot;LIBELLE&quot;</span><span style="color:#ADBAC7;">, </span><span style="color:#6CB6FF;">required</span><span style="color:#F47067;">=</span><span style="color:#6CB6FF;">false</span><span style="color:#ADBAC7;">) String libelle) {}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">@</span><span style="color:#D73A49;">RequestMapping</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">value</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;question&quot;</span><span style="color:#24292E;">, </span><span style="color:#005CC5;">method</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> RequestMethod.POST) </span><span style="color:#D73A49;">public</span><span style="color:#24292E;"> ModelAndView </span><span style="color:#6F42C1;">questionPost</span><span style="color:#24292E;">(</span></span>
<span class="line"><span style="color:#24292E;">@</span><span style="color:#D73A49;">RequestParam</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">name</span><span style="color:#D73A49;">=</span><span style="color:#032F62;">&quot;ID_ENQUETE&quot;</span><span style="color:#24292E;">) Long idEnquete, @</span><span style="color:#D73A49;">RequestParam</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">name</span><span style="color:#D73A49;">=</span><span style="color:#032F62;">&quot;LIBELLE&quot;</span><span style="color:#24292E;">, </span><span style="color:#005CC5;">required</span><span style="color:#D73A49;">=</span><span style="color:#005CC5;">false</span><span style="color:#24292E;">) String libelle) {}</span></span></code></pre></div><p>Il est possible de donner une valeur par défaut dans le cas où le paramètre n’est pas présent dans la requête HTTP :</p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki github-dark-dimmed vp-code-dark"><code><span class="line"><span style="color:#ADBAC7;">@</span><span style="color:#F47067;">RequestMapping</span><span style="color:#ADBAC7;">(</span><span style="color:#6CB6FF;">value</span><span style="color:#ADBAC7;"> </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> </span><span style="color:#96D0FF;">&quot;question&quot;</span><span style="color:#ADBAC7;">, </span><span style="color:#6CB6FF;">method</span><span style="color:#ADBAC7;"> </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> RequestMethod.POST) </span><span style="color:#F47067;">public</span><span style="color:#ADBAC7;"> ModelAndView </span><span style="color:#DCBDFB;">questionPost</span><span style="color:#ADBAC7;">(</span></span>
<span class="line"><span style="color:#ADBAC7;">@</span><span style="color:#F47067;">RequestParam</span><span style="color:#ADBAC7;">(</span><span style="color:#6CB6FF;">name</span><span style="color:#F47067;">=</span><span style="color:#96D0FF;">&quot;ID_ENQUETE&quot;</span><span style="color:#ADBAC7;">) Long idEnquete, @</span><span style="color:#F47067;">RequestParam</span><span style="color:#ADBAC7;">(</span><span style="color:#6CB6FF;">name</span><span style="color:#F47067;">=</span><span style="color:#96D0FF;">&quot;LIBELLE&quot;</span><span style="color:#ADBAC7;">, </span><span style="color:#6CB6FF;">required</span><span style="color:#F47067;">=</span><span style="color:#6CB6FF;">false</span><span style="color:#ADBAC7;">, </span><span style="color:#6CB6FF;">defaultValue</span><span style="color:#F47067;">=</span><span style="color:#96D0FF;">&quot;Indéfini&quot;</span><span style="color:#ADBAC7;">) String libelle) {}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">@</span><span style="color:#D73A49;">RequestMapping</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">value</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;question&quot;</span><span style="color:#24292E;">, </span><span style="color:#005CC5;">method</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> RequestMethod.POST) </span><span style="color:#D73A49;">public</span><span style="color:#24292E;"> ModelAndView </span><span style="color:#6F42C1;">questionPost</span><span style="color:#24292E;">(</span></span>
<span class="line"><span style="color:#24292E;">@</span><span style="color:#D73A49;">RequestParam</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">name</span><span style="color:#D73A49;">=</span><span style="color:#032F62;">&quot;ID_ENQUETE&quot;</span><span style="color:#24292E;">) Long idEnquete, @</span><span style="color:#D73A49;">RequestParam</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">name</span><span style="color:#D73A49;">=</span><span style="color:#032F62;">&quot;LIBELLE&quot;</span><span style="color:#24292E;">, </span><span style="color:#005CC5;">required</span><span style="color:#D73A49;">=</span><span style="color:#005CC5;">false</span><span style="color:#24292E;">, </span><span style="color:#005CC5;">defaultValue</span><span style="color:#D73A49;">=</span><span style="color:#032F62;">&quot;Indéfini&quot;</span><span style="color:#24292E;">) String libelle) {}</span></span></code></pre></div><h2 id="getmapping" tabindex="-1">@GetMapping <a class="header-anchor" href="#getmapping" aria-label="Permalink to &quot;@GetMapping&quot;">​</a></h2><p>Depuis Spring 4.3 sorti en 2016, définit une correpondance entre une (ou plusieurs) URL et une méthode du contrôleur Spring. Cette correspondance s’applique uniquement si la méthode HTTP de la requête est <code>Get</code>.</p><p>L’annotation GetMapping est déclarée ainsi :</p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki github-dark-dimmed vp-code-dark"><code><span class="line"><span style="color:#ADBAC7;">@</span><span style="color:#F47067;">Target</span><span style="color:#ADBAC7;">(ElementType.METHOD)</span></span>
<span class="line"><span style="color:#ADBAC7;">@</span><span style="color:#F47067;">Retention</span><span style="color:#ADBAC7;">(RetentionPolicy.RUNTIME)</span></span>
<span class="line"><span style="color:#ADBAC7;">@</span><span style="color:#F47067;">Documented</span></span>
<span class="line"><span style="color:#ADBAC7;">@</span><span style="color:#F47067;">RequestMapping</span><span style="color:#ADBAC7;">(</span><span style="color:#6CB6FF;">method</span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;">RequestMethod.GET)</span></span>
<span class="line"><span style="color:#F47067;">public</span><span style="color:#ADBAC7;"> @</span><span style="color:#F47067;">interface</span><span style="color:#ADBAC7;"> </span><span style="color:#F47067;">GetMapping</span><span style="color:#ADBAC7;"> {}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">@</span><span style="color:#D73A49;">Target</span><span style="color:#24292E;">(ElementType.METHOD)</span></span>
<span class="line"><span style="color:#24292E;">@</span><span style="color:#D73A49;">Retention</span><span style="color:#24292E;">(RetentionPolicy.RUNTIME)</span></span>
<span class="line"><span style="color:#24292E;">@</span><span style="color:#D73A49;">Documented</span></span>
<span class="line"><span style="color:#24292E;">@</span><span style="color:#D73A49;">RequestMapping</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">method</span><span style="color:#D73A49;">=</span><span style="color:#24292E;">RequestMethod.GET)</span></span>
<span class="line"><span style="color:#D73A49;">public</span><span style="color:#24292E;"> @</span><span style="color:#D73A49;">interface</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">GetMapping</span><span style="color:#24292E;"> {}</span></span></code></pre></div><p>Voici deux écritures équivalentes :</p><div class="vp-code-group vp-adaptive-theme"><div class="tabs"><input type="radio" name="group-_EyFD" id="tab-AJcJwT5" checked="checked"><label for="tab-AJcJwT5">RequestMapping</label><input type="radio" name="group-_EyFD" id="tab-9K-9H8j"><label for="tab-9K-9H8j">GetMapping</label></div><div class="blocks"><div class="language-java vp-adaptive-theme active"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki github-dark-dimmed vp-code-dark"><code><span class="line"><span style="color:#ADBAC7;">@</span><span style="color:#F47067;">RequestMapping</span><span style="color:#ADBAC7;">(</span><span style="color:#6CB6FF;">value</span><span style="color:#F47067;">=</span><span style="color:#96D0FF;">&quot;enquete&quot;</span><span style="color:#ADBAC7;">, </span><span style="color:#6CB6FF;">method</span><span style="color:#ADBAC7;"> </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> RequestMethod.GET)</span></span>
<span class="line"><span style="color:#F47067;">public</span><span style="color:#ADBAC7;"> ModelAndView </span><span style="color:#DCBDFB;">getEnquete</span><span style="color:#ADBAC7;">(@</span><span style="color:#F47067;">RequestParam</span><span style="color:#ADBAC7;">(</span><span style="color:#6CB6FF;">name</span><span style="color:#F47067;">=</span><span style="color:#96D0FF;">&quot;ID&quot;</span><span style="color:#ADBAC7;">) Long id) {}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">@</span><span style="color:#D73A49;">RequestMapping</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">value</span><span style="color:#D73A49;">=</span><span style="color:#032F62;">&quot;enquete&quot;</span><span style="color:#24292E;">, </span><span style="color:#005CC5;">method</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> RequestMethod.GET)</span></span>
<span class="line"><span style="color:#D73A49;">public</span><span style="color:#24292E;"> ModelAndView </span><span style="color:#6F42C1;">getEnquete</span><span style="color:#24292E;">(@</span><span style="color:#D73A49;">RequestParam</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">name</span><span style="color:#D73A49;">=</span><span style="color:#032F62;">&quot;ID&quot;</span><span style="color:#24292E;">) Long id) {}</span></span></code></pre></div><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki github-dark-dimmed vp-code-dark"><code><span class="line"><span style="color:#ADBAC7;">@</span><span style="color:#F47067;">GetMapping</span><span style="color:#ADBAC7;">(</span><span style="color:#96D0FF;">&quot;enquete&quot;</span><span style="color:#ADBAC7;">)</span></span>
<span class="line"><span style="color:#F47067;">public</span><span style="color:#ADBAC7;"> ModelAndView </span><span style="color:#DCBDFB;">getEnquete</span><span style="color:#ADBAC7;">(@</span><span style="color:#F47067;">RequestParam</span><span style="color:#ADBAC7;">(</span><span style="color:#6CB6FF;">name</span><span style="color:#F47067;">=</span><span style="color:#96D0FF;">&quot;ID&quot;</span><span style="color:#ADBAC7;">) Long id) {}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">@</span><span style="color:#D73A49;">GetMapping</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;enquete&quot;</span><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#D73A49;">public</span><span style="color:#24292E;"> ModelAndView </span><span style="color:#6F42C1;">getEnquete</span><span style="color:#24292E;">(@</span><span style="color:#D73A49;">RequestParam</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">name</span><span style="color:#D73A49;">=</span><span style="color:#032F62;">&quot;ID&quot;</span><span style="color:#24292E;">) Long id) {}</span></span></code></pre></div></div></div><p>La méthode enqueteGet ci-dessous sera invoquée :</p><ul><li><p>lorsque l’internaute saisit l’adresse <a href="http://localhost/enquetes" target="_blank" rel="noreferrer">http://localhost/enquetes</a> dans la barre d’adresse de son navigateur internet puis tape Entrée :</p></li><li><p>lorsqu’un hyperlien avec un attribut href égal à “<a href="http://localhost/enquetes%E2%80%9D" target="_blank" rel="noreferrer">http://localhost/enquetes”</a> est cliqué</p></li><li><p>ou lorsqu’une requête utilisant la méthode GET vers <a href="http://localhost/enquetes" target="_blank" rel="noreferrer">http://localhost/enquetes</a> est envoyée à partir du front (Angular, React ou Vue), ou de Postman, Hoppscotch ou Insomnia</p></li></ul><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki github-dark-dimmed vp-code-dark"><code><span class="line"><span style="color:#ADBAC7;">@</span><span style="color:#F47067;">GetMapping</span><span style="color:#ADBAC7;">(</span><span style="color:#96D0FF;">&quot;enquetes&quot;</span><span style="color:#ADBAC7;">)</span></span>
<span class="line"><span style="color:#F47067;">public</span><span style="color:#ADBAC7;"> ModelAndView </span><span style="color:#DCBDFB;">getEnquetes</span><span style="color:#ADBAC7;">() {}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">@</span><span style="color:#D73A49;">GetMapping</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;enquetes&quot;</span><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#D73A49;">public</span><span style="color:#24292E;"> ModelAndView </span><span style="color:#6F42C1;">getEnquetes</span><span style="color:#24292E;">() {}</span></span></code></pre></div><h2 id="postmapping" tabindex="-1">@PostMapping <a class="header-anchor" href="#postmapping" aria-label="Permalink to &quot;@PostMapping&quot;">​</a></h2><p>Définit une correpondance entre une (ou plusieurs) URL et une méthode du contrôleur Spring. Cette correspondance s’applique uniquement si la méthode de la requête HTTP est Post.</p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki github-dark-dimmed vp-code-dark"><code><span class="line"><span style="color:#ADBAC7;">@</span><span style="color:#F47067;">PostMapping</span><span style="color:#ADBAC7;">(</span><span style="color:#96D0FF;">&quot;filtrerLesEnquetes&quot;</span><span style="color:#ADBAC7;">)</span></span>
<span class="line"><span style="color:#F47067;">public</span><span style="color:#ADBAC7;"> ModelAndView </span><span style="color:#DCBDFB;">filtrerEnquetes</span><span style="color:#ADBAC7;">(@</span><span style="color:#F47067;">RequestParam</span><span style="color:#ADBAC7;"> Map</span><span style="color:#F47067;">&lt;</span><span style="color:#ADBAC7;">String, String</span><span style="color:#F47067;">&gt;</span><span style="color:#ADBAC7;"> map) {}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">@</span><span style="color:#D73A49;">PostMapping</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;filtrerLesEnquetes&quot;</span><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#D73A49;">public</span><span style="color:#24292E;"> ModelAndView </span><span style="color:#6F42C1;">filtrerEnquetes</span><span style="color:#24292E;">(@</span><span style="color:#D73A49;">RequestParam</span><span style="color:#24292E;"> Map</span><span style="color:#D73A49;">&lt;</span><span style="color:#24292E;">String, String</span><span style="color:#D73A49;">&gt;</span><span style="color:#24292E;"> map) {}</span></span></code></pre></div><p>A noter: La méthode ci-dessous est invoquée lorsque le bouton submit du formulaire ci-dessous est cliqué:</p><div class="language-html vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">html</span><pre class="shiki github-dark-dimmed vp-code-dark"><code><span class="line"><span style="color:#ADBAC7;">&lt;</span><span style="color:#8DDB8C;">form</span><span style="color:#ADBAC7;"> </span><span style="color:#6CB6FF;">action</span><span style="color:#ADBAC7;">=</span><span style="color:#96D0FF;">&quot;filtrerLesEnquetes&quot;</span><span style="color:#ADBAC7;"> </span><span style="color:#6CB6FF;">method</span><span style="color:#ADBAC7;">=</span><span style="color:#96D0FF;">&quot;post&quot;</span><span style="color:#ADBAC7;">&gt;</span></span>
<span class="line"><span style="color:#ADBAC7;">  &lt;</span><span style="color:#8DDB8C;">input</span><span style="color:#ADBAC7;"> </span><span style="color:#6CB6FF;">type</span><span style="color:#ADBAC7;">=</span><span style="color:#96D0FF;">&quot;text&quot;</span><span style="color:#ADBAC7;"> </span><span style="color:#6CB6FF;">name</span><span style="color:#ADBAC7;">=</span><span style="color:#96D0FF;">&quot;NOM&quot;</span><span style="color:#ADBAC7;"> /&gt;</span></span>
<span class="line"><span style="color:#ADBAC7;">  &lt;</span><span style="color:#8DDB8C;">input</span><span style="color:#ADBAC7;"> </span><span style="color:#6CB6FF;">type</span><span style="color:#ADBAC7;">=</span><span style="color:#96D0FF;">&quot;submit&quot;</span><span style="color:#ADBAC7;"> </span><span style="color:#6CB6FF;">value</span><span style="color:#ADBAC7;">=</span><span style="color:#96D0FF;">&quot;Filtrer&quot;</span><span style="color:#ADBAC7;"> /&gt;</span></span>
<span class="line"><span style="color:#ADBAC7;">&lt;/</span><span style="color:#8DDB8C;">form</span><span style="color:#ADBAC7;">&gt;</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">&lt;</span><span style="color:#22863A;">form</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">action</span><span style="color:#24292E;">=</span><span style="color:#032F62;">&quot;filtrerLesEnquetes&quot;</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">method</span><span style="color:#24292E;">=</span><span style="color:#032F62;">&quot;post&quot;</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"><span style="color:#24292E;">  &lt;</span><span style="color:#22863A;">input</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">type</span><span style="color:#24292E;">=</span><span style="color:#032F62;">&quot;text&quot;</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">name</span><span style="color:#24292E;">=</span><span style="color:#032F62;">&quot;NOM&quot;</span><span style="color:#24292E;"> /&gt;</span></span>
<span class="line"><span style="color:#24292E;">  &lt;</span><span style="color:#22863A;">input</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">type</span><span style="color:#24292E;">=</span><span style="color:#032F62;">&quot;submit&quot;</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">value</span><span style="color:#24292E;">=</span><span style="color:#032F62;">&quot;Filtrer&quot;</span><span style="color:#24292E;"> /&gt;</span></span>
<span class="line"><span style="color:#24292E;">&lt;/</span><span style="color:#22863A;">form</span><span style="color:#24292E;">&gt;</span></span></code></pre></div><h2 id="putmapping" tabindex="-1">@PutMapping <a class="header-anchor" href="#putmapping" aria-label="Permalink to &quot;@PutMapping&quot;">​</a></h2><p>Définit une correpondance entre une (ou plusieurs) URL et une méthode du contrôleur Spring. Cette correspondance s’applique uniquement si la méthode de la requête HTTP est Put.</p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki github-dark-dimmed vp-code-dark"><code><span class="line"><span style="color:#ADBAC7;">@</span><span style="color:#F47067;">PutMapping</span><span style="color:#ADBAC7;">(</span><span style="color:#6CB6FF;">value</span><span style="color:#F47067;">=</span><span style="color:#96D0FF;">&quot;mettreAJourEnquete&quot;</span><span style="color:#ADBAC7;">)</span></span>
<span class="line"><span style="color:#F47067;">public</span><span style="color:#ADBAC7;"> Enquete </span><span style="color:#DCBDFB;">majEnquete</span><span style="color:#ADBAC7;">(@</span><span style="color:#F47067;">RequestBody</span><span style="color:#ADBAC7;"> Enquete enquete) {}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">@</span><span style="color:#D73A49;">PutMapping</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">value</span><span style="color:#D73A49;">=</span><span style="color:#032F62;">&quot;mettreAJourEnquete&quot;</span><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#D73A49;">public</span><span style="color:#24292E;"> Enquete </span><span style="color:#6F42C1;">majEnquete</span><span style="color:#24292E;">(@</span><span style="color:#D73A49;">RequestBody</span><span style="color:#24292E;"> Enquete enquete) {}</span></span></code></pre></div><h2 id="patchmapping" tabindex="-1">@PatchMapping <a class="header-anchor" href="#patchmapping" aria-label="Permalink to &quot;@PatchMapping&quot;">​</a></h2><p>Définit une correpondance entre une (ou plusieurs) URL et une méthode du contrôleur Spring. Cette correspondance s’applique uniquement si la méthode de la requête HTTP est Patch.</p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki github-dark-dimmed vp-code-dark"><code><span class="line"><span style="color:#ADBAC7;">@</span><span style="color:#F47067;">PatchMapping</span><span style="color:#ADBAC7;">(</span><span style="color:#6CB6FF;">value</span><span style="color:#F47067;">=</span><span style="color:#96D0FF;">&quot;mettreAJourPrixEnquete&quot;</span><span style="color:#ADBAC7;">)</span></span>
<span class="line"><span style="color:#F47067;">public</span><span style="color:#ADBAC7;"> Enquete </span><span style="color:#DCBDFB;">majPrixEnquete</span><span style="color:#ADBAC7;">(@</span><span style="color:#F47067;">RequestParam</span><span style="color:#ADBAC7;"> Map</span><span style="color:#F47067;">&lt;</span><span style="color:#ADBAC7;">String, String</span><span style="color:#F47067;">&gt;</span><span style="color:#ADBAC7;"> map) {}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">@</span><span style="color:#D73A49;">PatchMapping</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">value</span><span style="color:#D73A49;">=</span><span style="color:#032F62;">&quot;mettreAJourPrixEnquete&quot;</span><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#D73A49;">public</span><span style="color:#24292E;"> Enquete </span><span style="color:#6F42C1;">majPrixEnquete</span><span style="color:#24292E;">(@</span><span style="color:#D73A49;">RequestParam</span><span style="color:#24292E;"> Map</span><span style="color:#D73A49;">&lt;</span><span style="color:#24292E;">String, String</span><span style="color:#D73A49;">&gt;</span><span style="color:#24292E;"> map) {}</span></span></code></pre></div><h2 id="deletemapping" tabindex="-1">@DeleteMapping <a class="header-anchor" href="#deletemapping" aria-label="Permalink to &quot;@DeleteMapping&quot;">​</a></h2><p>Définit une correpondance entre une (ou plusieurs) URL et une méthode du contrôleur Spring. Cette correspondance s’applique uniquement si la méthode de la requête HTTP est Delete.</p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki github-dark-dimmed vp-code-dark"><code><span class="line"><span style="color:#ADBAC7;">@</span><span style="color:#F47067;">DeleteMapping</span><span style="color:#ADBAC7;">(</span><span style="color:#6CB6FF;">value</span><span style="color:#F47067;">=</span><span style="color:#96D0FF;">&quot;supprimerEnquete&quot;</span><span style="color:#ADBAC7;">)</span></span>
<span class="line"><span style="color:#F47067;">public</span><span style="color:#ADBAC7;"> </span><span style="color:#F47067;">boolean</span><span style="color:#ADBAC7;"> </span><span style="color:#DCBDFB;">supprimerEnquetes</span><span style="color:#ADBAC7;">(@</span><span style="color:#F47067;">RequestParam</span><span style="color:#ADBAC7;"> Long idEnquete) {}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">@</span><span style="color:#D73A49;">DeleteMapping</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">value</span><span style="color:#D73A49;">=</span><span style="color:#032F62;">&quot;supprimerEnquete&quot;</span><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#D73A49;">public</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">boolean</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">supprimerEnquetes</span><span style="color:#24292E;">(@</span><span style="color:#D73A49;">RequestParam</span><span style="color:#24292E;"> Long idEnquete) {}</span></span></code></pre></div><h2 id="crossorigin" tabindex="-1">@CrossOrigin <a class="header-anchor" href="#crossorigin" aria-label="Permalink to &quot;@CrossOrigin&quot;">​</a></h2><p>Autorise une application externe (très souvent le front-end) à envoyer des requêtes HTTP au contrôleur</p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki github-dark-dimmed vp-code-dark"><code><span class="line"><span style="color:#ADBAC7;">@</span><span style="color:#F47067;">Controller</span></span>
<span class="line"><span style="color:#ADBAC7;">@</span><span style="color:#F47067;">CrossOrigin</span><span style="color:#ADBAC7;">(</span><span style="color:#6CB6FF;">origins</span><span style="color:#ADBAC7;"> </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> </span><span style="color:#96D0FF;">&quot;http://localhost:4200/&quot;</span><span style="color:#ADBAC7;">, </span><span style="color:#6CB6FF;">maxAge</span><span style="color:#ADBAC7;"> </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> </span><span style="color:#6CB6FF;">3600</span><span style="color:#ADBAC7;">, </span><span style="color:#6CB6FF;">methods</span><span style="color:#ADBAC7;"> </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> {RequestMethod.GET, RequestMethod.POST})</span></span>
<span class="line"><span style="color:#F47067;">public</span><span style="color:#ADBAC7;"> </span><span style="color:#F47067;">class</span><span style="color:#ADBAC7;"> </span><span style="color:#F69D50;">EnqueteController</span><span style="color:#ADBAC7;"> {}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">@</span><span style="color:#D73A49;">Controller</span></span>
<span class="line"><span style="color:#24292E;">@</span><span style="color:#D73A49;">CrossOrigin</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">origins</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;http://localhost:4200/&quot;</span><span style="color:#24292E;">, </span><span style="color:#005CC5;">maxAge</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">3600</span><span style="color:#24292E;">, </span><span style="color:#005CC5;">methods</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> {RequestMethod.GET, RequestMethod.POST})</span></span>
<span class="line"><span style="color:#D73A49;">public</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">class</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">EnqueteController</span><span style="color:#24292E;"> {}</span></span></code></pre></div><h2 id="responsestatus" tabindex="-1">@ResponseStatus <a class="header-anchor" href="#responsestatus" aria-label="Permalink to &quot;@ResponseStatus&quot;">​</a></h2><p>Annotation qui impose le code retour de la réponse à une requête HTTP</p><p>Il est conseillé d’utiliser l’énumération HttpStatus : <a href="https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/http/" target="_blank" rel="noreferrer">https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/http/</a> HttpStatus.html</p><p>Exemples de codes retour usuels : 200 OK 201 CREATED 204 NO CONTENT 302 FOUND 400 BAD REQUEST 404 NOT FOUND 409 CONFLICT 422 UNPROCESSABLE ENTITY</p><p>La liste complète des codes retour : <a href="https://fr.wikipedia.org/wiki/Liste_des_codes_HTTP" target="_blank" rel="noreferrer">https://fr.wikipedia.org/wiki/Liste_des_codes_HTTP</a></p><p>Dans l’exemple ci-après, la méthode renvoie un code retour 201 (CREATED) pour confirmer l’ajout de l’enquete via l’API REST :</p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki github-dark-dimmed vp-code-dark"><code><span class="line"><span style="color:#ADBAC7;">@</span><span style="color:#F47067;">ResponseStatus</span><span style="color:#ADBAC7;">(</span><span style="color:#6CB6FF;">code</span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;">HttpStatus.CREATED)</span></span>
<span class="line"><span style="color:#ADBAC7;">@</span><span style="color:#F47067;">PostMapping</span><span style="color:#ADBAC7;">(</span><span style="color:#96D0FF;">&quot;enquetes&quot;</span><span style="color:#ADBAC7;">)</span></span>
<span class="line"><span style="color:#F47067;">public</span><span style="color:#ADBAC7;"> Enquete </span><span style="color:#DCBDFB;">postEnquete</span><span style="color:#ADBAC7;">(@</span><span style="color:#F47067;">RequestBody</span><span style="color:#ADBAC7;"> Enquete enquete) {}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">@</span><span style="color:#D73A49;">ResponseStatus</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">code</span><span style="color:#D73A49;">=</span><span style="color:#24292E;">HttpStatus.CREATED)</span></span>
<span class="line"><span style="color:#24292E;">@</span><span style="color:#D73A49;">PostMapping</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;enquetes&quot;</span><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#D73A49;">public</span><span style="color:#24292E;"> Enquete </span><span style="color:#6F42C1;">postEnquete</span><span style="color:#24292E;">(@</span><span style="color:#D73A49;">RequestBody</span><span style="color:#24292E;"> Enquete enquete) {}</span></span></code></pre></div><h2 id="exceptionhandler" tabindex="-1">@ExceptionHandler <a class="header-anchor" href="#exceptionhandler" aria-label="Permalink to &quot;@ExceptionHandler&quot;">​</a></h2><p>Annotation à placer au dessus du méthode qui traite une exception “maison”</p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki github-dark-dimmed vp-code-dark"><code><span class="line"><span style="color:#ADBAC7;">@</span><span style="color:#F47067;">ExceptionHandler</span><span style="color:#ADBAC7;">(fr.clelia.fx.enquetes.exception.ThemeExistantException)</span></span>
<span class="line"><span style="color:#ADBAC7;">@</span><span style="color:#F47067;">ResponseStatus</span><span style="color:#ADBAC7;">(</span><span style="color:#6CB6FF;">code</span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;">HttpStatus.CONFLICT)</span></span>
<span class="line"><span style="color:#F47067;">public</span><span style="color:#ADBAC7;"> String </span><span style="color:#DCBDFB;">traiterThemeDejaExistant</span><span style="color:#ADBAC7;">(Exception exception) {</span></span>
<span class="line"><span style="color:#F47067;">return</span><span style="color:#ADBAC7;"> exception.</span><span style="color:#DCBDFB;">getMessage</span><span style="color:#ADBAC7;">();</span></span>
<span class="line"><span style="color:#ADBAC7;">}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">@</span><span style="color:#D73A49;">ExceptionHandler</span><span style="color:#24292E;">(fr.clelia.fx.enquetes.exception.ThemeExistantException)</span></span>
<span class="line"><span style="color:#24292E;">@</span><span style="color:#D73A49;">ResponseStatus</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">code</span><span style="color:#D73A49;">=</span><span style="color:#24292E;">HttpStatus.CONFLICT)</span></span>
<span class="line"><span style="color:#D73A49;">public</span><span style="color:#24292E;"> String </span><span style="color:#6F42C1;">traiterThemeDejaExistant</span><span style="color:#24292E;">(Exception exception) {</span></span>
<span class="line"><span style="color:#D73A49;">return</span><span style="color:#24292E;"> exception.</span><span style="color:#6F42C1;">getMessage</span><span style="color:#24292E;">();</span></span>
<span class="line"><span style="color:#24292E;">}</span></span></code></pre></div><h2 id="controlleradvice" tabindex="-1">@ControllerAdvice <a class="header-anchor" href="#controlleradvice" aria-label="Permalink to &quot;@ControllerAdvice&quot;">​</a></h2><p>Depuis Spring 3.2, annotation à placer au dessus d’une classe qui traite des exceptions communes à tous les contrôleurs de l’application</p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki github-dark-dimmed vp-code-dark"><code><span class="line"><span style="color:#ADBAC7;">@</span><span style="color:#F47067;">ControllerAdvice</span></span>
<span class="line"><span style="color:#F47067;">public</span><span style="color:#ADBAC7;"> </span><span style="color:#F47067;">class</span><span style="color:#ADBAC7;"> </span><span style="color:#F69D50;">TraitementGlobalDesExceptions</span><span style="color:#ADBAC7;"> {</span></span>
<span class="line"><span style="color:#ADBAC7;">@</span><span style="color:#F47067;">ExceptionHandler</span><span style="color:#ADBAC7;">(ConstraintViolationException.class)</span></span>
<span class="line"><span style="color:#ADBAC7;">      ResponseEntity&lt;</span><span style="color:#F47067;">Object</span><span style="color:#ADBAC7;">&gt;</span></span>
<span class="line"><span style="color:#ADBAC7;">      </span><span style="color:#DCBDFB;">constraintViolationHandlerException</span><span style="color:#ADBAC7;">(ConstraintViolationException </span><span style="color:#F69D50;">e</span><span style="color:#ADBAC7;">) {</span></span>
<span class="line"><span style="color:#ADBAC7;">      </span><span style="color:#F47067;">final</span><span style="color:#ADBAC7;"> List</span><span style="color:#F69D50;">&lt;</span><span style="color:#F47067;">String</span><span style="color:#F69D50;">&gt; </span><span style="color:#ADBAC7;">erreurs</span><span style="color:#F69D50;"> </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> </span><span style="color:#F47067;">new</span><span style="color:#ADBAC7;"> ArrayList&lt;&gt;();</span></span>
<span class="line"><span style="color:#ADBAC7;">      e.</span><span style="color:#DCBDFB;">getConstraintViolations</span><span style="color:#ADBAC7;">().</span><span style="color:#DCBDFB;">forEach</span><span style="color:#ADBAC7;">(violation </span><span style="color:#F47067;">-&gt;</span></span>
<span class="line"><span style="color:#ADBAC7;">      erreurs.</span><span style="color:#DCBDFB;">add</span><span style="color:#ADBAC7;">(violation.</span><span style="color:#DCBDFB;">getMessage</span><span style="color:#ADBAC7;">()));</span></span>
<span class="line"><span style="color:#ADBAC7;">      </span><span style="color:#F47067;">return</span><span style="color:#ADBAC7;"> </span><span style="color:#F47067;">new</span><span style="color:#ADBAC7;"> ResponseEntity&lt;&gt;(erreurs, HttpStatus.BAD_REQUEST); }</span></span>
<span class="line"><span style="color:#ADBAC7;">}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">@</span><span style="color:#D73A49;">ControllerAdvice</span></span>
<span class="line"><span style="color:#D73A49;">public</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">class</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">TraitementGlobalDesExceptions</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">@</span><span style="color:#D73A49;">ExceptionHandler</span><span style="color:#24292E;">(ConstraintViolationException.class)</span></span>
<span class="line"><span style="color:#24292E;">      ResponseEntity&lt;</span><span style="color:#D73A49;">Object</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#6F42C1;">constraintViolationHandlerException</span><span style="color:#24292E;">(ConstraintViolationException </span><span style="color:#E36209;">e</span><span style="color:#24292E;">) {</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#D73A49;">final</span><span style="color:#24292E;"> List&lt;</span><span style="color:#D73A49;">String</span><span style="color:#24292E;">&gt; erreurs </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">new</span><span style="color:#24292E;"> ArrayList&lt;&gt;();</span></span>
<span class="line"><span style="color:#24292E;">      e.</span><span style="color:#6F42C1;">getConstraintViolations</span><span style="color:#24292E;">().</span><span style="color:#6F42C1;">forEach</span><span style="color:#24292E;">(violation </span><span style="color:#D73A49;">-&gt;</span></span>
<span class="line"><span style="color:#24292E;">      erreurs.</span><span style="color:#6F42C1;">add</span><span style="color:#24292E;">(violation.</span><span style="color:#6F42C1;">getMessage</span><span style="color:#24292E;">()));</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#D73A49;">return</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">new</span><span style="color:#24292E;"> ResponseEntity&lt;&gt;(erreurs, HttpStatus.BAD_REQUEST); }</span></span>
<span class="line"><span style="color:#24292E;">}</span></span></code></pre></div><h2 id="restcontrolleradvice" tabindex="-1">@RestControllerAdvice <a class="header-anchor" href="#restcontrolleradvice" aria-label="Permalink to &quot;@RestControllerAdvice&quot;">​</a></h2><p>Similaire à <code>@ControllerAdvice</code> mais consommé par les contrôleurs annotés <code>@RestController</code></p><h2 id="modelattribute" tabindex="-1">@ModelAttribute <a class="header-anchor" href="#modelattribute" aria-label="Permalink to &quot;@ModelAttribute&quot;">​</a></h2><p>Annotation utilisée sur un paramètre d&#39;une méthode du contrôleur.</p><p>Dans les méthodes annotées <code>@GetMapping</code>, elle accompagne un objet d&#39;une classe métier envoyé à une vue :</p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki github-dark-dimmed vp-code-dark"><code><span class="line"><span style="color:#ADBAC7;">@</span><span style="color:#F47067;">GetMapping</span><span style="color:#ADBAC7;">(</span><span style="color:#96D0FF;">&quot;inscription&quot;</span><span style="color:#ADBAC7;">)</span></span>
<span class="line"><span style="color:#F47067;">public</span><span style="color:#ADBAC7;"> ModelAndView </span><span style="color:#DCBDFB;">getInscription</span><span style="color:#ADBAC7;">(@</span><span style="color:#F47067;">ModelAttribute</span><span style="color:#ADBAC7;">(</span><span style="color:#96D0FF;">&quot;utilisateur&quot;</span><span style="color:#ADBAC7;">) Utilisateur utilisateur) {</span></span>
<span class="line"><span style="color:#ADBAC7;">        </span><span style="color:#768390;">// Grâce à l’annotation @ModelAttribute, il n’est pas nécessaire d’écrire</span></span>
<span class="line"><span style="color:#ADBAC7;">mav.</span><span style="color:#DCBDFB;">addObject</span><span style="color:#ADBAC7;">(“utilisateur”, utilisateur)) car Spring va envoyer un objet de type</span></span>
<span class="line"><span style="color:#ADBAC7;">Utilisateur à la vue JSP</span></span>
<span class="line"><span style="color:#F47067;">return</span><span style="color:#ADBAC7;"> </span><span style="color:#F47067;">new</span><span style="color:#ADBAC7;"> </span><span style="color:#DCBDFB;">ModelAndView</span><span style="color:#ADBAC7;">(</span><span style="color:#96D0FF;">&quot;inscription&quot;</span><span style="color:#ADBAC7;">);</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">@</span><span style="color:#D73A49;">GetMapping</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;inscription&quot;</span><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#D73A49;">public</span><span style="color:#24292E;"> ModelAndView </span><span style="color:#6F42C1;">getInscription</span><span style="color:#24292E;">(@</span><span style="color:#D73A49;">ModelAttribute</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;utilisateur&quot;</span><span style="color:#24292E;">) Utilisateur utilisateur) {</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#6A737D;">// Grâce à l’annotation @ModelAttribute, il n’est pas nécessaire d’écrire</span></span>
<span class="line"><span style="color:#24292E;">mav.</span><span style="color:#6F42C1;">addObject</span><span style="color:#24292E;">(“utilisateur”, utilisateur)) car Spring va envoyer un objet de type</span></span>
<span class="line"><span style="color:#24292E;">Utilisateur à la vue JSP</span></span>
<span class="line"><span style="color:#D73A49;">return</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">new</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">ModelAndView</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;inscription&quot;</span><span style="color:#24292E;">);</span></span></code></pre></div><p>Dans les méthodes annotées <code>@PostMapping</code>, elle accompagne un objet métier incorporé dans le corps de la requête HTTP :</p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki github-dark-dimmed vp-code-dark"><code><span class="line"><span style="color:#ADBAC7;">@</span><span style="color:#F47067;">PostMapping</span><span style="color:#ADBAC7;">(</span><span style="color:#96D0FF;">&quot;inscription&quot;</span><span style="color:#ADBAC7;">)</span></span>
<span class="line"><span style="color:#F47067;">public</span><span style="color:#ADBAC7;"> ModelAndView </span><span style="color:#DCBDFB;">postInscription</span><span style="color:#ADBAC7;">(@</span><span style="color:#F47067;">Valid</span><span style="color:#ADBAC7;"> @</span><span style="color:#F47067;">ModelAttribute</span><span style="color:#ADBAC7;">(</span><span style="color:#96D0FF;">&quot;utilisateur&quot;</span><span style="color:#ADBAC7;">) Utilisateur utilisateur, BindingResult result) {</span></span>
<span class="line"><span style="color:#F47067;">if</span><span style="color:#ADBAC7;"> (result.</span><span style="color:#DCBDFB;">hasErrors</span><span style="color:#ADBAC7;">()) {</span></span>
<span class="line"><span style="color:#768390;">// La validation de l’objet utilisateur par rapport aux contraintes // de validation définies dans la classe métier Utilisateur a produit // des erreurs</span></span>
<span class="line"><span style="color:#ADBAC7;">ModelAndView</span><span style="color:#F69D50;"> </span><span style="color:#ADBAC7;">mav</span><span style="color:#F69D50;"> </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> </span><span style="color:#DCBDFB;">getInscription</span><span style="color:#ADBAC7;">(utilisateur);</span></span>
<span class="line"><span style="color:#F47067;">return</span><span style="color:#ADBAC7;"> mav;</span></span>
<span class="line"><span style="color:#ADBAC7;">} </span><span style="color:#F47067;">else</span><span style="color:#ADBAC7;"> { utilisateurService.</span><span style="color:#DCBDFB;">enregistrerUtilisateur</span><span style="color:#ADBAC7;">(utilisateur); </span><span style="color:#F47067;">return</span><span style="color:#ADBAC7;"> </span><span style="color:#F47067;">new</span><span style="color:#ADBAC7;"> </span><span style="color:#DCBDFB;">ModelAndView</span><span style="color:#ADBAC7;">(</span><span style="color:#96D0FF;">&quot;redirect:merciInscription&quot;</span><span style="color:#ADBAC7;">);</span></span>
<span class="line"><span style="color:#ADBAC7;">}</span></span>
<span class="line"><span style="color:#ADBAC7;">}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">@</span><span style="color:#D73A49;">PostMapping</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;inscription&quot;</span><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#D73A49;">public</span><span style="color:#24292E;"> ModelAndView </span><span style="color:#6F42C1;">postInscription</span><span style="color:#24292E;">(@</span><span style="color:#D73A49;">Valid</span><span style="color:#24292E;"> @</span><span style="color:#D73A49;">ModelAttribute</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;utilisateur&quot;</span><span style="color:#24292E;">) Utilisateur utilisateur, BindingResult result) {</span></span>
<span class="line"><span style="color:#D73A49;">if</span><span style="color:#24292E;"> (result.</span><span style="color:#6F42C1;">hasErrors</span><span style="color:#24292E;">()) {</span></span>
<span class="line"><span style="color:#6A737D;">// La validation de l’objet utilisateur par rapport aux contraintes // de validation définies dans la classe métier Utilisateur a produit // des erreurs</span></span>
<span class="line"><span style="color:#24292E;">ModelAndView mav </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">getInscription</span><span style="color:#24292E;">(utilisateur);</span></span>
<span class="line"><span style="color:#D73A49;">return</span><span style="color:#24292E;"> mav;</span></span>
<span class="line"><span style="color:#24292E;">} </span><span style="color:#D73A49;">else</span><span style="color:#24292E;"> { utilisateurService.</span><span style="color:#6F42C1;">enregistrerUtilisateur</span><span style="color:#24292E;">(utilisateur); </span><span style="color:#D73A49;">return</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">new</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">ModelAndView</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;redirect:merciInscription&quot;</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#24292E;">}</span></span>
<span class="line"><span style="color:#24292E;">}</span></span></code></pre></div><p>A noter : la vue (la JSP inscription.jsp) doit contenir une balise <code>form:form</code> comme suit:</p><div class="language-html vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">html</span><pre class="shiki github-dark-dimmed vp-code-dark"><code><span class="line"><span style="color:#ADBAC7;">&lt;</span><span style="color:#FF938A;font-style:italic;">form:form</span></span>
<span class="line"><span style="color:#ADBAC7;">  </span><span style="color:#6CB6FF;">action</span><span style="color:#ADBAC7;">=</span><span style="color:#96D0FF;">&quot;inscription&quot;</span></span>
<span class="line"><span style="color:#ADBAC7;">  </span><span style="color:#6CB6FF;">method</span><span style="color:#ADBAC7;">=</span><span style="color:#96D0FF;">&quot;post&quot;</span></span>
<span class="line"><span style="color:#ADBAC7;">  </span><span style="color:#6CB6FF;">modelAttribute</span><span style="color:#ADBAC7;">=</span><span style="color:#96D0FF;">&quot;utilisateur&quot;</span></span>
<span class="line"><span style="color:#ADBAC7;">&gt;&lt;/</span><span style="color:#FF938A;font-style:italic;">form:form</span><span style="color:#ADBAC7;">&gt;</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">&lt;</span><span style="color:#B31D28;font-style:italic;">form:form</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">action</span><span style="color:#24292E;">=</span><span style="color:#032F62;">&quot;inscription&quot;</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">method</span><span style="color:#24292E;">=</span><span style="color:#032F62;">&quot;post&quot;</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">modelAttribute</span><span style="color:#24292E;">=</span><span style="color:#032F62;">&quot;utilisateur&quot;</span></span>
<span class="line"><span style="color:#24292E;">&gt;&lt;/</span><span style="color:#B31D28;font-style:italic;">form:form</span><span style="color:#24292E;">&gt;</span></span></code></pre></div><p>Pour rappel: l’annotation <code>@Valid</code> permet de délèguer à Spring le travail de validation sur l’objet annoté. En d’autres termes, toutes les contraintes de validation exprimées dans les classes métier (présentes dans le package business) seront vérifiées par Spring (qui utilise pour ce faire Hibernate validator).</p><h2 id="sessionattributes" tabindex="-1">@SessionAttributes <a class="header-anchor" href="#sessionattributes" aria-label="Permalink to &quot;@SessionAttributes&quot;">​</a></h2><p>Demande à Spring de stocker en session les attributs d’un objet envoyé à un formulaire HTML</p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki github-dark-dimmed vp-code-dark"><code><span class="line"><span style="color:#ADBAC7;">@</span><span style="color:#F47067;">Controller</span></span>
<span class="line"><span style="color:#ADBAC7;">@</span><span style="color:#F47067;">SessionAttributes</span><span style="color:#ADBAC7;">(</span><span style="color:#96D0FF;">&quot;enquete&quot;</span><span style="color:#ADBAC7;">)</span></span>
<span class="line"><span style="color:#F47067;">public</span><span style="color:#ADBAC7;"> </span><span style="color:#F47067;">class</span><span style="color:#ADBAC7;"> </span><span style="color:#F69D50;">EnqueteController</span><span style="color:#ADBAC7;"> {}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">@</span><span style="color:#D73A49;">Controller</span></span>
<span class="line"><span style="color:#24292E;">@</span><span style="color:#D73A49;">SessionAttributes</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;enquete&quot;</span><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#D73A49;">public</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">class</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">EnqueteController</span><span style="color:#24292E;"> {}</span></span></code></pre></div><h2 id="validated" tabindex="-1">@Validated <a class="header-anchor" href="#validated" aria-label="Permalink to &quot;@Validated&quot;">​</a></h2><p>Demande à Spring de valider l’ensemble des paramètres avant l’invocation de la méthode invoquée</p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki github-dark-dimmed vp-code-dark"><code><span class="line"><span style="color:#ADBAC7;">@</span><span style="color:#F47067;">Controller</span></span>
<span class="line"><span style="color:#ADBAC7;">@</span><span style="color:#F47067;">Validated</span></span>
<span class="line"><span style="color:#F47067;">public</span><span style="color:#ADBAC7;"> </span><span style="color:#F47067;">class</span><span style="color:#ADBAC7;"> </span><span style="color:#F69D50;">EnqueteController</span><span style="color:#ADBAC7;"> {}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">@</span><span style="color:#D73A49;">Controller</span></span>
<span class="line"><span style="color:#24292E;">@</span><span style="color:#D73A49;">Validated</span></span>
<span class="line"><span style="color:#D73A49;">public</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">class</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">EnqueteController</span><span style="color:#24292E;"> {}</span></span></code></pre></div><h2 id="datetimeformat-pattern-dd-mm-yyyy" tabindex="-1">@DateTimeFormat (pattern = “dd/MM/yyyy”) <a class="header-anchor" href="#datetimeformat-pattern-dd-mm-yyyy" aria-label="Permalink to &quot;@DateTimeFormat (pattern = “dd/MM/yyyy”)&quot;">​</a></h2><p>Permet de définir un attribut de type <code>Date</code>, <code>LocalDate</code>, <code>LocalTime</code> ou <code>LocalDateTime</code> avec un format précisé en attribut. L’utilisation de cette annotation dispense d’écrire du code dans la méthode annotée initBinder</p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki github-dark-dimmed vp-code-dark"><code><span class="line"><span style="color:#ADBAC7;">@</span><span style="color:#F47067;">DateTimeFormat</span><span style="color:#ADBAC7;">(</span><span style="color:#6CB6FF;">pattern</span><span style="color:#ADBAC7;"> </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> </span><span style="color:#96D0FF;">&quot;dd/MM/yyyy&quot;</span><span style="color:#ADBAC7;">)</span></span>
<span class="line"><span style="color:#F47067;">private</span><span style="color:#ADBAC7;"> Date</span><span style="color:#F69D50;"> </span><span style="color:#ADBAC7;">dateDeLancement;</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">@</span><span style="color:#D73A49;">DateTimeFormat</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">pattern</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;dd/MM/yyyy&quot;</span><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#D73A49;">private</span><span style="color:#24292E;"> Date dateDeLancement;</span></span></code></pre></div><p>A la place d’un attribut pattern, on peut se reposer sur l’attribut iso qui fera appel à une des valeurs de l’énumération <code>DataTimeFormat</code>.ISO :</p><p><a href="https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/format/annotation/DateTimeFormat.ISO.html" target="_blank" rel="noreferrer">https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/format/annotation/DateTimeFormat.ISO.html</a></p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki github-dark-dimmed vp-code-dark"><code><span class="line"><span style="color:#ADBAC7;">@</span><span style="color:#F47067;">DateTimeFormat</span><span style="color:#ADBAC7;">(</span><span style="color:#6CB6FF;">iso</span><span style="color:#ADBAC7;"> </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> DateTimeFormat.ISO.DATE) LocalDate dateDeNaissance</span></span>
<span class="line"><span style="color:#F47067;">private</span><span style="color:#ADBAC7;"> LocalDate</span><span style="color:#F69D50;"> </span><span style="color:#ADBAC7;">dateDeNaissance;</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">@</span><span style="color:#D73A49;">DateTimeFormat</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">iso</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> DateTimeFormat.ISO.DATE) LocalDate dateDeNaissance</span></span>
<span class="line"><span style="color:#D73A49;">private</span><span style="color:#24292E;"> LocalDate dateDeNaissance;</span></span></code></pre></div><h2 id="pageabledefault" tabindex="-1">@PageableDefault <a class="header-anchor" href="#pageabledefault" aria-label="Permalink to &quot;@PageableDefault&quot;">​</a></h2><p>Définit les paramètres de pagination et de tri par défaut</p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki github-dark-dimmed vp-code-dark"><code><span class="line"><span style="color:#F47067;">public</span><span style="color:#ADBAC7;"> ModelAndView </span><span style="color:#DCBDFB;">enquetesGet</span><span style="color:#ADBAC7;">(@</span><span style="color:#F47067;">PageableDefault</span><span style="color:#ADBAC7;">(</span><span style="color:#6CB6FF;">size</span><span style="color:#ADBAC7;"> </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> </span><span style="color:#6CB6FF;">10</span><span style="color:#ADBAC7;">, </span><span style="color:#6CB6FF;">sort</span><span style="color:#ADBAC7;"> </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> </span><span style="color:#96D0FF;">&quot;dateDeLancement&quot;</span><span style="color:#ADBAC7;">) Pageable pageable) {}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">public</span><span style="color:#24292E;"> ModelAndView </span><span style="color:#6F42C1;">enquetesGet</span><span style="color:#24292E;">(@</span><span style="color:#D73A49;">PageableDefault</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">size</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">10</span><span style="color:#24292E;">, </span><span style="color:#005CC5;">sort</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;dateDeLancement&quot;</span><span style="color:#24292E;">) Pageable pageable) {}</span></span></code></pre></div><div class="info custom-block"><p class="custom-block-title">INFO</p><p>A noter :</p><ul><li>dans les services et les DAO, toutes les méthodes ayant un paramètre de type <code>Pageable</code> doivent renvoyer un objet de type <code>Page</code></li><li>l’interface <code>Pageable</code> à importer est : org.springframework.data.domain.Pageable</li></ul></div><p><img src="/Java/assets/pageable_default.bdfa3b22.png" alt="interface Pageable"></p><h2 id="sortdefault" tabindex="-1">@SortDefault <a class="header-anchor" href="#sortdefault" aria-label="Permalink to &quot;@SortDefault&quot;">​</a></h2><p>Définit les paramètres de tri par défaut</p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki github-dark-dimmed vp-code-dark"><code><span class="line"><span style="color:#F47067;">public</span><span style="color:#ADBAC7;"> ModelAndView </span><span style="color:#DCBDFB;">enquetesGet</span><span style="color:#ADBAC7;">(@</span><span style="color:#F47067;">PageableDefault</span><span style="color:#ADBAC7;">(</span><span style="color:#6CB6FF;">size</span><span style="color:#ADBAC7;"> </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> </span><span style="color:#6CB6FF;">10</span><span style="color:#ADBAC7;">) @</span><span style="color:#F47067;">SortDefault</span><span style="color:#ADBAC7;">(</span><span style="color:#6CB6FF;">sort</span><span style="color:#ADBAC7;"> </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> </span><span style="color:#96D0FF;">&quot;dateDeLancement&quot;</span><span style="color:#ADBAC7;">, </span><span style="color:#6CB6FF;">direction</span><span style="color:#ADBAC7;"> </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> Sort.Direction.DESC) Pageable pageable) {}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">public</span><span style="color:#24292E;"> ModelAndView </span><span style="color:#6F42C1;">enquetesGet</span><span style="color:#24292E;">(@</span><span style="color:#D73A49;">PageableDefault</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">size</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">10</span><span style="color:#24292E;">) @</span><span style="color:#D73A49;">SortDefault</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">sort</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;dateDeLancement&quot;</span><span style="color:#24292E;">, </span><span style="color:#005CC5;">direction</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> Sort.Direction.DESC) Pageable pageable) {}</span></span></code></pre></div><h2 id="initbinder" tabindex="-1">@InitBinder <a class="header-anchor" href="#initbinder" aria-label="Permalink to &quot;@InitBinder&quot;">​</a></h2><p>Annotation d’une méthode “montrant” à Spring comment obtenir un objet métier à partir de son id ou comment transformer un objet en un autre objet. La conversion de données (en anglais binding) est réalisée par Spring grâce aux méthodes annotées <code>@InitBinder</code></p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki github-dark-dimmed vp-code-dark"><code><span class="line"><span style="color:#ADBAC7;">@</span><span style="color:#F47067;">InitBinder</span></span>
<span class="line"><span style="color:#F47067;">public</span><span style="color:#ADBAC7;"> </span><span style="color:#F47067;">void</span><span style="color:#ADBAC7;"> </span><span style="color:#DCBDFB;">initBinder</span><span style="color:#ADBAC7;">(WebDataBinder binder) {</span></span>
<span class="line"><span style="color:#ADBAC7;"> </span><span style="color:#768390;">// Apprend à Spring à convertir un String en Date</span></span>
<span class="line"><span style="color:#ADBAC7;">SimpleDateFormat</span><span style="color:#F69D50;"> </span><span style="color:#ADBAC7;">dateFormat</span><span style="color:#F69D50;"> </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> </span><span style="color:#F47067;">new</span><span style="color:#ADBAC7;"> </span><span style="color:#DCBDFB;">SimpleDateFormat</span><span style="color:#ADBAC7;">(</span><span style="color:#96D0FF;">&quot;yyyy-MM-dd&quot;</span><span style="color:#ADBAC7;">); dateFormat.</span><span style="color:#DCBDFB;">setLenient</span><span style="color:#ADBAC7;">(</span><span style="color:#6CB6FF;">false</span><span style="color:#ADBAC7;">);</span></span>
<span class="line"><span style="color:#ADBAC7;">binder.</span><span style="color:#DCBDFB;">registerCustomEditor</span><span style="color:#ADBAC7;">(Date.class, </span><span style="color:#F47067;">new</span><span style="color:#ADBAC7;"> </span><span style="color:#DCBDFB;">CustomDateEditor</span><span style="color:#ADBAC7;">(dateFormat, </span><span style="color:#6CB6FF;">true</span><span style="color:#ADBAC7;">));</span></span>
<span class="line"><span style="color:#ADBAC7;">  </span><span style="color:#768390;">// Apprend à Spring à convertir un id de Theme en objet de type Theme</span></span>
<span class="line"><span style="color:#ADBAC7;">binder.</span><span style="color:#DCBDFB;">registerCustomEditor</span><span style="color:#ADBAC7;">(Theme.class, </span><span style="color:#96D0FF;">&quot;theme&quot;</span><span style="color:#ADBAC7;">, </span><span style="color:#F47067;">new</span><span style="color:#ADBAC7;"> </span><span style="color:#DCBDFB;">PropertyEditorSupport</span><span style="color:#ADBAC7;">() { @</span><span style="color:#F47067;">Override</span></span>
<span class="line"><span style="color:#F47067;">public</span><span style="color:#ADBAC7;"> </span><span style="color:#F47067;">void</span><span style="color:#ADBAC7;"> </span><span style="color:#DCBDFB;">setAsText</span><span style="color:#ADBAC7;">(String </span><span style="color:#F69D50;">id</span><span style="color:#ADBAC7;">) { </span><span style="color:#DCBDFB;">setValue</span><span style="color:#ADBAC7;">((id.</span><span style="color:#DCBDFB;">equals</span><span style="color:#ADBAC7;">(</span><span style="color:#96D0FF;">&quot;&quot;</span><span style="color:#ADBAC7;">)) </span><span style="color:#F47067;">?</span><span style="color:#ADBAC7;"> </span><span style="color:#6CB6FF;">null</span><span style="color:#ADBAC7;"> </span><span style="color:#F47067;">:</span></span>
<span class="line"><span style="color:#ADBAC7;">themeService.</span><span style="color:#DCBDFB;">recupererTheme</span><span style="color:#ADBAC7;">(Long.</span><span style="color:#DCBDFB;">parseLong</span><span style="color:#ADBAC7;">((String) id))); }</span></span>
<span class="line"><span style="color:#ADBAC7;">});</span></span>
<span class="line"><span style="color:#ADBAC7;">  </span><span style="color:#768390;">// Apprend à Spring à convertir une liste d’id en liste d’intérêts</span></span>
<span class="line"><span style="color:#ADBAC7;">binder.</span><span style="color:#DCBDFB;">registerCustomEditor</span><span style="color:#ADBAC7;">(List.class, </span><span style="color:#96D0FF;">&quot;interets&quot;</span><span style="color:#ADBAC7;">, </span><span style="color:#F47067;">new</span><span style="color:#ADBAC7;"> </span><span style="color:#DCBDFB;">CustomCollectionEditor</span><span style="color:#ADBAC7;">(List.class) {</span></span>
<span class="line"><span style="color:#ADBAC7;">@</span><span style="color:#F47067;">Override</span></span>
<span class="line"><span style="color:#F47067;">public</span><span style="color:#ADBAC7;"> Object </span><span style="color:#DCBDFB;">convertElement</span><span style="color:#ADBAC7;">(Object </span><span style="color:#F69D50;">objet</span><span style="color:#ADBAC7;">) { Long</span><span style="color:#F69D50;"> </span><span style="color:#ADBAC7;">id</span><span style="color:#F69D50;"> </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> Long.</span><span style="color:#DCBDFB;">parseLong</span><span style="color:#ADBAC7;">((String) objet); </span><span style="color:#F47067;">return</span><span style="color:#ADBAC7;"> interetService.</span><span style="color:#DCBDFB;">recupererInteret</span><span style="color:#ADBAC7;">(id);</span></span>
<span class="line"><span style="color:#ADBAC7;">} });</span></span>
<span class="line"><span style="color:#ADBAC7;">}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">@</span><span style="color:#D73A49;">InitBinder</span></span>
<span class="line"><span style="color:#D73A49;">public</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">void</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">initBinder</span><span style="color:#24292E;">(WebDataBinder binder) {</span></span>
<span class="line"><span style="color:#24292E;"> </span><span style="color:#6A737D;">// Apprend à Spring à convertir un String en Date</span></span>
<span class="line"><span style="color:#24292E;">SimpleDateFormat dateFormat </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">new</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">SimpleDateFormat</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;yyyy-MM-dd&quot;</span><span style="color:#24292E;">); dateFormat.</span><span style="color:#6F42C1;">setLenient</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">false</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#24292E;">binder.</span><span style="color:#6F42C1;">registerCustomEditor</span><span style="color:#24292E;">(Date.class, </span><span style="color:#D73A49;">new</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">CustomDateEditor</span><span style="color:#24292E;">(dateFormat, </span><span style="color:#005CC5;">true</span><span style="color:#24292E;">));</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6A737D;">// Apprend à Spring à convertir un id de Theme en objet de type Theme</span></span>
<span class="line"><span style="color:#24292E;">binder.</span><span style="color:#6F42C1;">registerCustomEditor</span><span style="color:#24292E;">(Theme.class, </span><span style="color:#032F62;">&quot;theme&quot;</span><span style="color:#24292E;">, </span><span style="color:#D73A49;">new</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">PropertyEditorSupport</span><span style="color:#24292E;">() { @</span><span style="color:#D73A49;">Override</span></span>
<span class="line"><span style="color:#D73A49;">public</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">void</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">setAsText</span><span style="color:#24292E;">(String </span><span style="color:#E36209;">id</span><span style="color:#24292E;">) { </span><span style="color:#6F42C1;">setValue</span><span style="color:#24292E;">((id.</span><span style="color:#6F42C1;">equals</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;&quot;</span><span style="color:#24292E;">)) </span><span style="color:#D73A49;">?</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">null</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">:</span></span>
<span class="line"><span style="color:#24292E;">themeService.</span><span style="color:#6F42C1;">recupererTheme</span><span style="color:#24292E;">(Long.</span><span style="color:#6F42C1;">parseLong</span><span style="color:#24292E;">((String) id))); }</span></span>
<span class="line"><span style="color:#24292E;">});</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6A737D;">// Apprend à Spring à convertir une liste d’id en liste d’intérêts</span></span>
<span class="line"><span style="color:#24292E;">binder.</span><span style="color:#6F42C1;">registerCustomEditor</span><span style="color:#24292E;">(List.class, </span><span style="color:#032F62;">&quot;interets&quot;</span><span style="color:#24292E;">, </span><span style="color:#D73A49;">new</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">CustomCollectionEditor</span><span style="color:#24292E;">(List.class) {</span></span>
<span class="line"><span style="color:#24292E;">@</span><span style="color:#D73A49;">Override</span></span>
<span class="line"><span style="color:#D73A49;">public</span><span style="color:#24292E;"> Object </span><span style="color:#6F42C1;">convertElement</span><span style="color:#24292E;">(Object </span><span style="color:#E36209;">objet</span><span style="color:#24292E;">) { Long id </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> Long.</span><span style="color:#6F42C1;">parseLong</span><span style="color:#24292E;">((String) objet); </span><span style="color:#D73A49;">return</span><span style="color:#24292E;"> interetService.</span><span style="color:#6F42C1;">recupererInteret</span><span style="color:#24292E;">(id);</span></span>
<span class="line"><span style="color:#24292E;">} });</span></span>
<span class="line"><span style="color:#24292E;">}</span></span></code></pre></div><p>Pour la classe PropertyEditorSupport, se référer à la javadoc : <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.desktop/java/beans/" target="_blank" rel="noreferrer">https://docs.oracle.com/en/java/javase/17/docs/api/java.desktop/java/beans/</a> PropertyEditorSupport.html</p><p>L’annotation InitBinder peut accueillir un attribut value dont la valeur contient le nom de l’objet à convertir :</p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki github-dark-dimmed vp-code-dark"><code><span class="line"><span style="color:#ADBAC7;">@</span><span style="color:#F47067;">InitBinder</span><span style="color:#ADBAC7;">(</span><span style="color:#6CB6FF;">value</span><span style="color:#F47067;">=</span><span style="color:#96D0FF;">&quot;theme.nom&quot;</span><span style="color:#ADBAC7;">)</span></span>
<span class="line"><span style="color:#F47067;">public</span><span style="color:#ADBAC7;"> </span><span style="color:#F47067;">void</span><span style="color:#ADBAC7;"> </span><span style="color:#DCBDFB;">initBinder</span><span style="color:#ADBAC7;">(WebDataBinder binder) {</span></span>
<span class="line"><span style="color:#ADBAC7;">  </span><span style="color:#768390;">// Apprend à Spring à convertir un nom de Theme en objet de type Theme</span></span>
<span class="line"><span style="color:#ADBAC7;">binder.</span><span style="color:#DCBDFB;">registerCustomEditor</span><span style="color:#ADBAC7;">(Theme.class, </span><span style="color:#F47067;">new</span><span style="color:#ADBAC7;"> </span><span style="color:#DCBDFB;">PropertyEditorSupport</span><span style="color:#ADBAC7;">() { @</span><span style="color:#F47067;">Override</span></span>
<span class="line"><span style="color:#F47067;">public</span><span style="color:#ADBAC7;"> </span><span style="color:#F47067;">void</span><span style="color:#ADBAC7;"> </span><span style="color:#DCBDFB;">setAsText</span><span style="color:#ADBAC7;">(String </span><span style="color:#F69D50;">nom</span><span style="color:#ADBAC7;">) {</span></span>
<span class="line"><span style="color:#DCBDFB;">setValue</span><span style="color:#ADBAC7;">((nom.</span><span style="color:#DCBDFB;">equals</span><span style="color:#ADBAC7;">(</span><span style="color:#96D0FF;">&quot;&quot;</span><span style="color:#ADBAC7;">)) </span><span style="color:#F47067;">?</span><span style="color:#ADBAC7;"> </span><span style="color:#6CB6FF;">null</span><span style="color:#ADBAC7;"> </span><span style="color:#F47067;">:</span><span style="color:#ADBAC7;"> themeService.</span><span style="color:#DCBDFB;">recupererTheme</span><span style="color:#ADBAC7;">(nom));</span></span>
<span class="line"><span style="color:#ADBAC7;">} });</span></span>
<span class="line"><span style="color:#ADBAC7;">}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">@</span><span style="color:#D73A49;">InitBinder</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">value</span><span style="color:#D73A49;">=</span><span style="color:#032F62;">&quot;theme.nom&quot;</span><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#D73A49;">public</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">void</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">initBinder</span><span style="color:#24292E;">(WebDataBinder binder) {</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6A737D;">// Apprend à Spring à convertir un nom de Theme en objet de type Theme</span></span>
<span class="line"><span style="color:#24292E;">binder.</span><span style="color:#6F42C1;">registerCustomEditor</span><span style="color:#24292E;">(Theme.class, </span><span style="color:#D73A49;">new</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">PropertyEditorSupport</span><span style="color:#24292E;">() { @</span><span style="color:#D73A49;">Override</span></span>
<span class="line"><span style="color:#D73A49;">public</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">void</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">setAsText</span><span style="color:#24292E;">(String </span><span style="color:#E36209;">nom</span><span style="color:#24292E;">) {</span></span>
<span class="line"><span style="color:#6F42C1;">setValue</span><span style="color:#24292E;">((nom.</span><span style="color:#6F42C1;">equals</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;&quot;</span><span style="color:#24292E;">)) </span><span style="color:#D73A49;">?</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">null</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">:</span><span style="color:#24292E;"> themeService.</span><span style="color:#6F42C1;">recupererTheme</span><span style="color:#24292E;">(nom));</span></span>
<span class="line"><span style="color:#24292E;">} });</span></span>
<span class="line"><span style="color:#24292E;">}</span></span></code></pre></div><h2 id="postconstruct" tabindex="-1">@PostConstruct <a class="header-anchor" href="#postconstruct" aria-label="Permalink to &quot;@PostConstruct&quot;">​</a></h2><p>Annotation sur une méthode que Spring va invoquer juste après avoir instancé la classe et injecté toutes les dépendances dans l’objet instancié</p><p>Exemple : la méthode ajouterDonnesInitiales() est présente dans le contrôleur EnqueteController. Une fois que Spring a instancié un objet de cette classe et injecté toutes les dépendances (notamment les services), la méthode ajouterDonneesInitiales() sera invoquée :</p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki github-dark-dimmed vp-code-dark"><code><span class="line"><span style="color:#ADBAC7;">@</span><span style="color:#F47067;">PostConstruct</span></span>
<span class="line"><span style="color:#F47067;">public</span><span style="color:#ADBAC7;"> </span><span style="color:#F47067;">void</span><span style="color:#ADBAC7;"> </span><span style="color:#DCBDFB;">ajouterDonneesInitiales</span><span style="color:#ADBAC7;">() {}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">@</span><span style="color:#D73A49;">PostConstruct</span></span>
<span class="line"><span style="color:#D73A49;">public</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">void</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">ajouterDonneesInitiales</span><span style="color:#24292E;">() {}</span></span></code></pre></div><h2 id="predestroy" tabindex="-1">@PreDestroy <a class="header-anchor" href="#predestroy" aria-label="Permalink to &quot;@PreDestroy&quot;">​</a></h2><p>Annotation sur une méthode qui sera invoquée automatiquement juste avant que Spring retire le bean de son contexte applicatif</p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki github-dark-dimmed vp-code-dark"><code><span class="line"><span style="color:#ADBAC7;">@</span><span style="color:#F47067;">PreDestroy</span></span>
<span class="line"><span style="color:#F47067;">public</span><span style="color:#ADBAC7;"> </span><span style="color:#F47067;">void</span><span style="color:#ADBAC7;"> </span><span style="color:#DCBDFB;">retirerDonneesInitiales</span><span style="color:#ADBAC7;">() {}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">@</span><span style="color:#D73A49;">PreDestroy</span></span>
<span class="line"><span style="color:#D73A49;">public</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">void</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">retirerDonneesInitiales</span><span style="color:#24292E;">() {}</span></span></code></pre></div><h2 id="pathvariable" tabindex="-1">@PathVariable <a class="header-anchor" href="#pathvariable" aria-label="Permalink to &quot;@PathVariable&quot;">​</a></h2><p>Désigne une variable qui se trouve dans le chemin de l’URL (et non en paramètre (pour rappel les paramètres se trouvent après le point de l’interrogation d’une URL))</p><p>Exemple d’URL: <a href="http://localhost:8080/enquete/4" target="_blank" rel="noreferrer">http://localhost:8080/enquete/4</a></p><p>Le code ci-dessous récupère l’id de l’enquête à partir de l’URL. (idEnquete aura dans l’URL précédente la valeur 4)</p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki github-dark-dimmed vp-code-dark"><code><span class="line"><span style="color:#ADBAC7;">@</span><span style="color:#F47067;">GetMapping</span><span style="color:#ADBAC7;">(</span><span style="color:#6CB6FF;">value</span><span style="color:#F47067;">=</span><span style="color:#96D0FF;">&quot;/enquete/{idEnquete}&quot;</span><span style="color:#ADBAC7;">, </span><span style="color:#6CB6FF;">produces</span><span style="color:#F47067;">=</span><span style="color:#96D0FF;">&quot;MediaType.APPLICATION_JSON_VALUE&quot;</span><span style="color:#ADBAC7;">)</span></span>
<span class="line"><span style="color:#F47067;">public</span><span style="color:#ADBAC7;"> Enquete </span><span style="color:#DCBDFB;">enqueteGet</span><span style="color:#ADBAC7;">(@</span><span style="color:#F47067;">PathVariable</span><span style="color:#ADBAC7;"> Long idEnquete) {}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">@</span><span style="color:#D73A49;">GetMapping</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">value</span><span style="color:#D73A49;">=</span><span style="color:#032F62;">&quot;/enquete/{idEnquete}&quot;</span><span style="color:#24292E;">, </span><span style="color:#005CC5;">produces</span><span style="color:#D73A49;">=</span><span style="color:#032F62;">&quot;MediaType.APPLICATION_JSON_VALUE&quot;</span><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#D73A49;">public</span><span style="color:#24292E;"> Enquete </span><span style="color:#6F42C1;">enqueteGet</span><span style="color:#24292E;">(@</span><span style="color:#D73A49;">PathVariable</span><span style="color:#24292E;"> Long idEnquete) {}</span></span></code></pre></div><h2 id="bean" tabindex="-1">@Bean <a class="header-anchor" href="#bean" aria-label="Permalink to &quot;@Bean&quot;">​</a></h2><p>Déclare une méthode dont l’objet retourné sera géré par le conteneur Spring</p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki github-dark-dimmed vp-code-dark"><code><span class="line"><span style="color:#ADBAC7;">@</span><span style="color:#F47067;">Bean</span></span>
<span class="line"><span style="color:#F47067;">public</span><span style="color:#ADBAC7;"> EmbeddedServletContainerFactory </span><span style="color:#DCBDFB;">servletContainer</span><span style="color:#ADBAC7;">() {}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">@</span><span style="color:#D73A49;">Bean</span></span>
<span class="line"><span style="color:#D73A49;">public</span><span style="color:#24292E;"> EmbeddedServletContainerFactory </span><span style="color:#6F42C1;">servletContainer</span><span style="color:#24292E;">() {}</span></span></code></pre></div><h2 id="scope" tabindex="-1">@Scope <a class="header-anchor" href="#scope" aria-label="Permalink to &quot;@Scope&quot;">​</a></h2><p>Précise la portée du bean. Par défaut Spring crée une seule instance d’un bean (singleton). Pour que Spring crée une nouvelle instance à chaque fois que la méthode est invoquée, il faut utiliser la valeur <code>@Scope(“prototype”)</code></p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki github-dark-dimmed vp-code-dark"><code><span class="line"><span style="color:#768390;">/**</span></span>
<span class="line"><span style="color:#768390;">       * Cette méthode affiche en console tous les objets présents dans le</span></span>
<span class="line"><span style="color:#768390;">conteneur Spring</span></span>
<span class="line"><span style="color:#768390;">* </span><span style="color:#F47067;">@param</span><span style="color:#768390;"> </span><span style="color:#F69D50;">applicationContext</span></span>
<span class="line"><span style="color:#768390;">* </span><span style="color:#F47067;">@return</span></span>
<span class="line"><span style="color:#768390;">*/</span></span>
<span class="line"><span style="color:#ADBAC7;">@</span><span style="color:#F47067;">Bean</span></span>
<span class="line"><span style="color:#ADBAC7;">@</span><span style="color:#F47067;">Scope</span><span style="color:#ADBAC7;">(ConfigurableBeanFactory.SCOPE_SINGLETON)</span></span>
<span class="line"><span style="color:#F47067;">public</span><span style="color:#ADBAC7;"> CommandLineRunner </span><span style="color:#DCBDFB;">commandLineRunner</span><span style="color:#ADBAC7;">(ApplicationContext</span></span>
<span class="line"><span style="color:#ADBAC7;">applicationContext) { </span><span style="color:#F47067;">return</span><span style="color:#ADBAC7;"> args </span><span style="color:#F47067;">-&gt;</span><span style="color:#ADBAC7;"> {</span></span>
<span class="line"><span style="color:#ADBAC7;">                  </span><span style="color:#F47067;">String</span><span style="color:#F69D50;">[] </span><span style="color:#ADBAC7;">noms</span><span style="color:#F69D50;"> </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> applicationContext.</span><span style="color:#DCBDFB;">getBeanDefinitionNames</span><span style="color:#ADBAC7;">();</span></span>
<span class="line"><span style="color:#F47067;">for</span><span style="color:#ADBAC7;"> (String</span><span style="color:#F69D50;"> </span><span style="color:#ADBAC7;">nom</span><span style="color:#F69D50;"> </span><span style="color:#F47067;">:</span><span style="color:#ADBAC7;"> noms) { System.out.</span><span style="color:#DCBDFB;">println</span><span style="color:#ADBAC7;">(nom </span><span style="color:#F47067;">+</span><span style="color:#ADBAC7;"> </span><span style="color:#96D0FF;">&quot; : &quot;</span><span style="color:#ADBAC7;"> </span><span style="color:#F47067;">+</span></span>
<span class="line"><span style="color:#ADBAC7;">applicationContext.</span><span style="color:#DCBDFB;">getBean</span><span style="color:#ADBAC7;">(nom).</span><span style="color:#DCBDFB;">getClass</span><span style="color:#ADBAC7;">().</span><span style="color:#DCBDFB;">getSimpleName</span><span style="color:#ADBAC7;">());</span></span>
<span class="line"><span style="color:#ADBAC7;">                  }</span></span>
<span class="line"><span style="color:#ADBAC7;">}; }</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;">/**</span></span>
<span class="line"><span style="color:#6A737D;">       * Cette méthode affiche en console tous les objets présents dans le</span></span>
<span class="line"><span style="color:#6A737D;">conteneur Spring</span></span>
<span class="line"><span style="color:#6A737D;">* </span><span style="color:#D73A49;">@param</span><span style="color:#6A737D;"> </span><span style="color:#E36209;">applicationContext</span></span>
<span class="line"><span style="color:#6A737D;">* </span><span style="color:#D73A49;">@return</span></span>
<span class="line"><span style="color:#6A737D;">*/</span></span>
<span class="line"><span style="color:#24292E;">@</span><span style="color:#D73A49;">Bean</span></span>
<span class="line"><span style="color:#24292E;">@</span><span style="color:#D73A49;">Scope</span><span style="color:#24292E;">(ConfigurableBeanFactory.SCOPE_SINGLETON)</span></span>
<span class="line"><span style="color:#D73A49;">public</span><span style="color:#24292E;"> CommandLineRunner </span><span style="color:#6F42C1;">commandLineRunner</span><span style="color:#24292E;">(ApplicationContext</span></span>
<span class="line"><span style="color:#24292E;">applicationContext) { </span><span style="color:#D73A49;">return</span><span style="color:#24292E;"> args </span><span style="color:#D73A49;">-&gt;</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">                  </span><span style="color:#D73A49;">String</span><span style="color:#24292E;">[] noms </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> applicationContext.</span><span style="color:#6F42C1;">getBeanDefinitionNames</span><span style="color:#24292E;">();</span></span>
<span class="line"><span style="color:#D73A49;">for</span><span style="color:#24292E;"> (String nom </span><span style="color:#D73A49;">:</span><span style="color:#24292E;"> noms) { System.out.</span><span style="color:#6F42C1;">println</span><span style="color:#24292E;">(nom </span><span style="color:#D73A49;">+</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot; : &quot;</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">+</span></span>
<span class="line"><span style="color:#24292E;">applicationContext.</span><span style="color:#6F42C1;">getBean</span><span style="color:#24292E;">(nom).</span><span style="color:#6F42C1;">getClass</span><span style="color:#24292E;">().</span><span style="color:#6F42C1;">getSimpleName</span><span style="color:#24292E;">());</span></span>
<span class="line"><span style="color:#24292E;">                  }</span></span>
<span class="line"><span style="color:#24292E;">}; }</span></span></code></pre></div><p>Le schéma ci-après synthétise la portée singleton :</p><p><img src="/Java/assets/scope1.8dae5243.png" alt="scope1"></p><p>Le schéma ci-après synthétise la portée prototype :</p><p><img src="/Java/assets/scope2.5620847b.png" alt="scope2"></p><p>Source : <a href="https://docs.spring.io/spring-framework/docs/current/reference/html/core.html" target="_blank" rel="noreferrer">https://docs.spring.io/spring-framework/docs/current/reference/html/core.html</a></p><h2 id="configuration" tabindex="-1">@Configuration <a class="header-anchor" href="#configuration" aria-label="Permalink to &quot;@Configuration&quot;">​</a></h2><p>Déclare une classe de configuration (un objet de cette classe remplace le fichier xml de configuration de Spring (souvent appelé spring-servlet.xml))</p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki github-dark-dimmed vp-code-dark"><code><span class="line"><span style="color:#ADBAC7;">@</span><span style="color:#F47067;">Configuration</span></span>
<span class="line"><span style="color:#F47067;">public</span><span style="color:#ADBAC7;"> </span><span style="color:#F47067;">class</span><span style="color:#ADBAC7;"> </span><span style="color:#F69D50;">EnquetesConfiguration</span><span style="color:#ADBAC7;"> {}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">@</span><span style="color:#D73A49;">Configuration</span></span>
<span class="line"><span style="color:#D73A49;">public</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">class</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">EnquetesConfiguration</span><span style="color:#24292E;"> {}</span></span></code></pre></div><p>A noter : les classes de configuration peuvent être remplacées par des lignes dans le fichier texte <code>src/main/resources/application</code>.properties systématiquement lu par Spring Boot</p><h2 id="value" tabindex="-1">@Value <a class="header-anchor" href="#value" aria-label="Permalink to &quot;@Value&quot;">​</a></h2><p>Utilise la valeur d’une variable définie dans le fichier <code>src/main/resources/application.properties</code>:</p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki github-dark-dimmed vp-code-dark"><code><span class="line"><span style="color:#ADBAC7;">@</span><span style="color:#F47067;">Value</span><span style="color:#ADBAC7;">(</span><span style="color:#96D0FF;">&quot;${google.client.client-secret}&quot;</span><span style="color:#ADBAC7;">) </span><span style="color:#F47067;">private</span><span style="color:#ADBAC7;"> String</span><span style="color:#F69D50;"> </span><span style="color:#ADBAC7;">clientSecret;</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">@</span><span style="color:#D73A49;">Value</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;${google.client.client-secret}&quot;</span><span style="color:#24292E;">) </span><span style="color:#D73A49;">private</span><span style="color:#24292E;"> String clientSecret;</span></span></code></pre></div><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki github-dark-dimmed vp-code-dark"><code><span class="line"><span style="color:#ADBAC7;">@</span><span style="color:#F47067;">Value</span><span style="color:#ADBAC7;">(</span><span style="color:#96D0FF;">&quot;#{ systemProperties[‘user.region’] }&quot;</span><span style="color:#ADBAC7;">) </span><span style="color:#F47067;">private</span><span style="color:#ADBAC7;"> String</span><span style="color:#F69D50;"> </span><span style="color:#ADBAC7;">locale;</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">@</span><span style="color:#D73A49;">Value</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;#{ systemProperties[‘user.region’] }&quot;</span><span style="color:#24292E;">) </span><span style="color:#D73A49;">private</span><span style="color:#24292E;"> String locale;</span></span></code></pre></div><h2 id="requestbody" tabindex="-1">@RequestBody <a class="header-anchor" href="#requestbody" aria-label="Permalink to &quot;@RequestBody&quot;">​</a></h2><p>Récupère les données dans le corps de la requête HTTP.</p><p>NB : l’annotation <code>@RequestBody</code> à importer dans ce cas de figure est org.springframework.web.bind.annotation.RequestBody et non celle de Swagger : io.swagger.v3.oas.annotations.parameters.RequestBody</p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki github-dark-dimmed vp-code-dark"><code><span class="line"><span style="color:#ADBAC7;">@</span><span style="color:#F47067;">PostMapping</span><span style="color:#ADBAC7;">(</span><span style="color:#96D0FF;">&quot;/theme&quot;</span><span style="color:#ADBAC7;">)</span></span>
<span class="line"><span style="color:#F47067;">public</span><span style="color:#ADBAC7;"> Theme </span><span style="color:#DCBDFB;">postTheme</span><span style="color:#ADBAC7;">(@</span><span style="color:#F47067;">RequestBody</span><span style="color:#ADBAC7;"> Theme theme) {</span></span>
<span class="line"><span style="color:#F47067;">return</span><span style="color:#ADBAC7;"> themeService.</span><span style="color:#DCBDFB;">enregistrerTheme</span><span style="color:#ADBAC7;">(theme); }</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">@</span><span style="color:#D73A49;">PostMapping</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;/theme&quot;</span><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#D73A49;">public</span><span style="color:#24292E;"> Theme </span><span style="color:#6F42C1;">postTheme</span><span style="color:#24292E;">(@</span><span style="color:#D73A49;">RequestBody</span><span style="color:#24292E;"> Theme theme) {</span></span>
<span class="line"><span style="color:#D73A49;">return</span><span style="color:#24292E;"> themeService.</span><span style="color:#6F42C1;">enregistrerTheme</span><span style="color:#24292E;">(theme); }</span></span></code></pre></div><h2 id="responsebody" tabindex="-1">@ResponseBody <a class="header-anchor" href="#responsebody" aria-label="Permalink to &quot;@ResponseBody&quot;">​</a></h2><p>Précise que le retour de la méthode correspond à la réponse qui va être envoyée au client HTTP</p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki github-dark-dimmed vp-code-dark"><code><span class="line"><span style="color:#ADBAC7;">@</span><span style="color:#F47067;">GetMapping</span><span style="color:#ADBAC7;">(</span><span style="color:#6CB6FF;">value</span><span style="color:#F47067;">=</span><span style="color:#96D0FF;">&quot;/fichierExcel&quot;</span><span style="color:#ADBAC7;">, </span><span style="color:#6CB6FF;">produces</span><span style="color:#F47067;">=</span><span style="color:#96D0FF;">&quot;application/vnd.ms-excel&quot;</span><span style="color:#ADBAC7;">) </span><span style="color:#F47067;">public</span><span style="color:#ADBAC7;"> @</span><span style="color:#F47067;">ResponseBody</span><span style="color:#ADBAC7;"> </span><span style="color:#F47067;">byte</span><span style="color:#ADBAC7;">[] </span><span style="color:#DCBDFB;">fichierExcelGet</span><span style="color:#ADBAC7;">(@</span><span style="color:#F47067;">RequestParam</span><span style="color:#ADBAC7;">(</span><span style="color:#6CB6FF;">name</span><span style="color:#F47067;">=</span><span style="color:#96D0FF;">&quot;ID&quot;</span><span style="color:#ADBAC7;">) Long idFichierExcel) throws IOException {}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">@</span><span style="color:#D73A49;">GetMapping</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">value</span><span style="color:#D73A49;">=</span><span style="color:#032F62;">&quot;/fichierExcel&quot;</span><span style="color:#24292E;">, </span><span style="color:#005CC5;">produces</span><span style="color:#D73A49;">=</span><span style="color:#032F62;">&quot;application/vnd.ms-excel&quot;</span><span style="color:#24292E;">) </span><span style="color:#D73A49;">public</span><span style="color:#24292E;"> @</span><span style="color:#D73A49;">ResponseBody</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">byte</span><span style="color:#24292E;">[] </span><span style="color:#6F42C1;">fichierExcelGet</span><span style="color:#24292E;">(@</span><span style="color:#D73A49;">RequestParam</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">name</span><span style="color:#D73A49;">=</span><span style="color:#032F62;">&quot;ID&quot;</span><span style="color:#24292E;">) Long idFichierExcel) throws IOException {}</span></span></code></pre></div><p>Cela évite, entre autres, d’écrire une méthode ayant un paramètre de type HttpServletResponse comme suit :</p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki github-dark-dimmed vp-code-dark"><code><span class="line"><span style="color:#F47067;">public</span><span style="color:#ADBAC7;"> </span><span style="color:#F47067;">void</span><span style="color:#ADBAC7;"> </span><span style="color:#DCBDFB;">fichierExcel</span><span style="color:#ADBAC7;">(HttpServletResponse response, @</span><span style="color:#F47067;">RequestParam</span><span style="color:#ADBAC7;">(</span><span style="color:#6CB6FF;">name</span><span style="color:#F47067;">=</span><span style="color:#96D0FF;">&quot;ID&quot;</span><span style="color:#ADBAC7;">) Long idFichierExcel) {}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">public</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">void</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">fichierExcel</span><span style="color:#24292E;">(HttpServletResponse response, @</span><span style="color:#D73A49;">RequestParam</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">name</span><span style="color:#D73A49;">=</span><span style="color:#032F62;">&quot;ID&quot;</span><span style="color:#24292E;">) Long idFichierExcel) {}</span></span></code></pre></div><h2 id="secured" tabindex="-1">@Secured <a class="header-anchor" href="#secured" aria-label="Permalink to &quot;@Secured&quot;">​</a></h2><p>Restreint l’accès aux utilisateurs ayant le rôle précisé en paramètre</p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki github-dark-dimmed vp-code-dark"><code><span class="line"><span style="color:#ADBAC7;">@</span><span style="color:#F47067;">Secured</span><span style="color:#ADBAC7;">(</span><span style="color:#96D0FF;">&quot;ROLE_ADMIN&quot;</span><span style="color:#ADBAC7;">) @</span><span style="color:#F47067;">GetMapping</span><span style="color:#ADBAC7;">(</span><span style="color:#96D0FF;">&quot;/enquetes&quot;</span><span style="color:#ADBAC7;">)</span></span>
<span class="line"><span style="color:#F47067;">public</span><span style="color:#ADBAC7;"> ModelAndView </span><span style="color:#DCBDFB;">getEnquetes</span><span style="color:#ADBAC7;">() {}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">@</span><span style="color:#D73A49;">Secured</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;ROLE_ADMIN&quot;</span><span style="color:#24292E;">) @</span><span style="color:#D73A49;">GetMapping</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;/enquetes&quot;</span><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#D73A49;">public</span><span style="color:#24292E;"> ModelAndView </span><span style="color:#6F42C1;">getEnquetes</span><span style="color:#24292E;">() {}</span></span></code></pre></div><h2 id="preauthorize" tabindex="-1">@PreAuthorize <a class="header-anchor" href="#preauthorize" aria-label="Permalink to &quot;@PreAuthorize&quot;">​</a></h2><p>Restreint l’exécution d’une méthode au(x) rôles précises en argument. Cette annotation accompagne souvent les méthodes d’une DAO</p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki github-dark-dimmed vp-code-dark"><code><span class="line"><span style="color:#ADBAC7;">@</span><span style="color:#F47067;">PreAuthorize</span><span style="color:#ADBAC7;">(</span><span style="color:#96D0FF;">&quot;hasRole(‘ADMIN’) or hasRole(‘MODERATEUR’)&quot;</span><span style="color:#ADBAC7;">)</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">@</span><span style="color:#D73A49;">PreAuthorize</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;hasRole(‘ADMIN’) or hasRole(‘MODERATEUR’)&quot;</span><span style="color:#24292E;">)</span></span></code></pre></div><h2 id="scheduled" tabindex="-1">@Scheduled <a class="header-anchor" href="#scheduled" aria-label="Permalink to &quot;@Scheduled&quot;">​</a></h2><p>Programme l’invocation de la méthode de manière automatique.</p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki github-dark-dimmed vp-code-dark"><code><span class="line"><span style="color:#ADBAC7;">@</span><span style="color:#F47067;">Scheduled</span><span style="color:#ADBAC7;">(</span><span style="color:#6CB6FF;">fixedRate</span><span style="color:#ADBAC7;"> </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> </span><span style="color:#6CB6FF;">1000</span><span style="color:#ADBAC7;">, </span><span style="color:#6CB6FF;">initialDelay</span><span style="color:#ADBAC7;"> </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> </span><span style="color:#6CB6FF;">5000</span><span style="color:#ADBAC7;">) </span><span style="color:#F47067;">public</span><span style="color:#ADBAC7;"> </span><span style="color:#F47067;">void</span><span style="color:#ADBAC7;"> </span><span style="color:#DCBDFB;">notifierUtilisateurs</span><span style="color:#ADBAC7;">() {}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">@</span><span style="color:#D73A49;">Scheduled</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">fixedRate</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">1000</span><span style="color:#24292E;">, </span><span style="color:#005CC5;">initialDelay</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">5000</span><span style="color:#24292E;">) </span><span style="color:#D73A49;">public</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">void</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">notifierUtilisateurs</span><span style="color:#24292E;">() {}</span></span></code></pre></div><p>Alternativement , cette annotation accepte un attribut cron.</p><p>L’exemple ci-dessous invoque la méthode envoyerEmails() tous les jeudis à 17h:</p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki github-dark-dimmed vp-code-dark"><code><span class="line"><span style="color:#ADBAC7;">@</span><span style="color:#F47067;">Scheduled</span><span style="color:#ADBAC7;">(</span><span style="color:#6CB6FF;">cron</span><span style="color:#F47067;">=</span><span style="color:#96D0FF;">&quot;00 00 17 * * THU&quot;</span><span style="color:#ADBAC7;">) </span><span style="color:#F47067;">public</span><span style="color:#ADBAC7;"> </span><span style="color:#F47067;">void</span><span style="color:#ADBAC7;"> </span><span style="color:#DCBDFB;">envoyerEmails</span><span style="color:#ADBAC7;">() {}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">@</span><span style="color:#D73A49;">Scheduled</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">cron</span><span style="color:#D73A49;">=</span><span style="color:#032F62;">&quot;00 00 17 * * THU&quot;</span><span style="color:#24292E;">) </span><span style="color:#D73A49;">public</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">void</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">envoyerEmails</span><span style="color:#24292E;">() {}</span></span></code></pre></div><p>L’exemple ci-dessous invoque la méthode envoyerSMS() toutes les secondes:</p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki github-dark-dimmed vp-code-dark"><code><span class="line"><span style="color:#ADBAC7;">@</span><span style="color:#F47067;">Scheduled</span><span style="color:#ADBAC7;">(</span><span style="color:#6CB6FF;">cron</span><span style="color:#F47067;">=</span><span style="color:#96D0FF;">&quot;* * * * * *&quot;</span><span style="color:#ADBAC7;">) </span><span style="color:#F47067;">public</span><span style="color:#ADBAC7;"> </span><span style="color:#F47067;">void</span><span style="color:#ADBAC7;"> </span><span style="color:#DCBDFB;">envoyerSMS</span><span style="color:#ADBAC7;">() {}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">@</span><span style="color:#D73A49;">Scheduled</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">cron</span><span style="color:#D73A49;">=</span><span style="color:#032F62;">&quot;* * * * * *&quot;</span><span style="color:#24292E;">) </span><span style="color:#D73A49;">public</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">void</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">envoyerSMS</span><span style="color:#24292E;">() {}</span></span></code></pre></div><p>L’exemple ci-dessous invoque la méthode envoyerMails() toutes les 5 minutes:</p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki github-dark-dimmed vp-code-dark"><code><span class="line"><span style="color:#ADBAC7;">@</span><span style="color:#F47067;">Scheduled</span><span style="color:#ADBAC7;">(</span><span style="color:#6CB6FF;">cron</span><span style="color:#F47067;">=</span><span style="color:#96D0FF;">&quot;0 */5 * * * *&quot;</span><span style="color:#ADBAC7;">) </span><span style="color:#F47067;">public</span><span style="color:#ADBAC7;"> </span><span style="color:#F47067;">void</span><span style="color:#ADBAC7;"> </span><span style="color:#DCBDFB;">envoyerSMS</span><span style="color:#ADBAC7;">() {}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">@</span><span style="color:#D73A49;">Scheduled</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">cron</span><span style="color:#D73A49;">=</span><span style="color:#032F62;">&quot;0 */5 * * * *&quot;</span><span style="color:#24292E;">) </span><span style="color:#D73A49;">public</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">void</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">envoyerSMS</span><span style="color:#24292E;">() {}</span></span></code></pre></div><div class="language-markdown vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">markdown</span><pre class="shiki github-dark-dimmed vp-code-dark"><code><span class="line"><span style="color:#ADBAC7;">+------------------ Minute (0 - 59)</span></span>
<span class="line"><span style="color:#ADBAC7;">| +---------------- Heure (0 - 23)</span></span>
<span class="line"><span style="color:#ADBAC7;">| | +-------------- Jour du mois (1 - 31)</span></span>
<span class="line"><span style="color:#ADBAC7;">| | | +------------ Mois (1 - 12)</span></span>
<span class="line"><span style="color:#ADBAC7;">| | | | +---------- Jour de la semaine (0 - 6) (Dimanche=0)</span></span>
<span class="line"><span style="color:#ADBAC7;">| | | | |</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ADBAC7;">      ^</span></span>
<span class="line"><span style="color:#ADBAC7;">      |</span></span>
<span class="line"><span style="color:#ADBAC7;">    1h30</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">+------------------ Minute (0 - 59)</span></span>
<span class="line"><span style="color:#24292E;">| +---------------- Heure (0 - 23)</span></span>
<span class="line"><span style="color:#24292E;">| | +-------------- Jour du mois (1 - 31)</span></span>
<span class="line"><span style="color:#24292E;">| | | +------------ Mois (1 - 12)</span></span>
<span class="line"><span style="color:#24292E;">| | | | +---------- Jour de la semaine (0 - 6) (Dimanche=0)</span></span>
<span class="line"><span style="color:#24292E;">| | | | |</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">      ^</span></span>
<span class="line"><span style="color:#24292E;">      |</span></span>
<span class="line"><span style="color:#24292E;">    1h30</span></span></code></pre></div><h2 id="primary" tabindex="-1">@Primary <a class="header-anchor" href="#primary" aria-label="Permalink to &quot;@Primary&quot;">​</a></h2><p>Indique la classe d&#39;implémentation que Spring devra utiliser face à un objet déclaré avec une interface (à utiliser lorsque plusieurs classes implémentent une même interface)</p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki github-dark-dimmed vp-code-dark"><code><span class="line"><span style="color:#ADBAC7;">@</span><span style="color:#F47067;">Primary</span></span>
<span class="line"><span style="color:#ADBAC7;">@</span><span style="color:#F47067;">Service</span></span>
<span class="line"><span style="color:#F47067;">public</span><span style="color:#ADBAC7;"> </span><span style="color:#F47067;">class</span><span style="color:#ADBAC7;"> </span><span style="color:#F69D50;">EnqueteServiceImpl</span><span style="color:#ADBAC7;"> </span><span style="color:#F47067;">implements</span><span style="color:#ADBAC7;"> </span><span style="color:#6CB6FF;">EnqueteService</span><span style="color:#ADBAC7;"> {}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">@</span><span style="color:#D73A49;">Primary</span></span>
<span class="line"><span style="color:#24292E;">@</span><span style="color:#D73A49;">Service</span></span>
<span class="line"><span style="color:#D73A49;">public</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">class</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">EnqueteServiceImpl</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">implements</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">EnqueteService</span><span style="color:#24292E;"> {}</span></span></code></pre></div><h2 id="qualifier" tabindex="-1">@Qualifier <a class="header-anchor" href="#qualifier" aria-label="Permalink to &quot;@Qualifier&quot;">​</a></h2><p>Permet de distinguer deux paramètres de même type dans une méthode</p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki github-dark-dimmed vp-code-dark"><code><span class="line"><span style="color:#ADBAC7;">@</span><span style="color:#F47067;">RequestMapping</span><span style="color:#ADBAC7;">(</span><span style="color:#6CB6FF;">value</span><span style="color:#ADBAC7;"> </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> { </span><span style="color:#96D0FF;">&quot;/index&quot;</span><span style="color:#ADBAC7;">, </span><span style="color:#96D0FF;">&quot;/&quot;</span><span style="color:#ADBAC7;">}, </span><span style="color:#6CB6FF;">method</span><span style="color:#ADBAC7;"> </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> RequestMethod.GET ) </span><span style="color:#F47067;">public</span><span style="color:#ADBAC7;"> ModelAndView </span><span style="color:#DCBDFB;">accueil</span><span style="color:#ADBAC7;">(</span></span>
<span class="line"><span style="color:#ADBAC7;">          @</span><span style="color:#F47067;">Qualifier</span><span style="color:#ADBAC7;">(</span><span style="color:#96D0FF;">&quot;enquete&quot;</span><span style="color:#ADBAC7;">) @</span><span style="color:#F47067;">PageableDefault</span><span style="color:#ADBAC7;">(</span><span style="color:#6CB6FF;">value</span><span style="color:#ADBAC7;"> </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> </span><span style="color:#6CB6FF;">10</span><span style="color:#ADBAC7;">, </span><span style="color:#6CB6FF;">sort</span><span style="color:#ADBAC7;"> </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> </span><span style="color:#96D0FF;">&quot;nom&quot;</span><span style="color:#ADBAC7;">)</span></span>
<span class="line"><span style="color:#ADBAC7;">          Pageable pageableEnquete,</span></span>
<span class="line"><span style="color:#ADBAC7;">          @</span><span style="color:#F47067;">Qualifier</span><span style="color:#ADBAC7;">(</span><span style="color:#96D0FF;">&quot;utilisateur&quot;</span><span style="color:#ADBAC7;">) @</span><span style="color:#F47067;">PageableDefault</span><span style="color:#ADBAC7;">(</span><span style="color:#6CB6FF;">value</span><span style="color:#ADBAC7;"> </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> </span><span style="color:#6CB6FF;">4</span><span style="color:#ADBAC7;">, </span><span style="color:#6CB6FF;">sort</span><span style="color:#ADBAC7;"> </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> </span><span style="color:#96D0FF;">&quot;login&quot;</span><span style="color:#ADBAC7;">)</span></span>
<span class="line"><span style="color:#ADBAC7;">          Pageable pageableUtilisateur) {</span></span>
<span class="line"><span style="color:#ADBAC7;">ModelAndView</span><span style="color:#F69D50;"> </span><span style="color:#ADBAC7;">mav</span><span style="color:#F69D50;"> </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> </span><span style="color:#F47067;">new</span><span style="color:#ADBAC7;"> </span><span style="color:#DCBDFB;">ModelAndView</span><span style="color:#ADBAC7;">(</span><span style="color:#96D0FF;">&quot;index&quot;</span><span style="color:#ADBAC7;">);</span></span>
<span class="line"><span style="color:#ADBAC7;">     mav.</span><span style="color:#DCBDFB;">addObject</span><span style="color:#ADBAC7;">(</span><span style="color:#96D0FF;">&quot;pageDEnquetes&quot;</span><span style="color:#ADBAC7;">,</span></span>
<span class="line"><span style="color:#ADBAC7;">enqueteService.</span><span style="color:#DCBDFB;">recupererEnquetes</span><span style="color:#ADBAC7;">(pageableEnquete));</span></span>
<span class="line"><span style="color:#ADBAC7;">mav.</span><span style="color:#DCBDFB;">addObject</span><span style="color:#ADBAC7;">(</span><span style="color:#96D0FF;">&quot;pageDUtilisateurs&quot;</span><span style="color:#ADBAC7;">, utilisateurService.</span><span style="color:#DCBDFB;">recupererUtilisateurs</span><span style="color:#ADBAC7;">(pageableUtilisateur));</span></span>
<span class="line"><span style="color:#F47067;">return</span><span style="color:#ADBAC7;"> mav;</span></span>
<span class="line"><span style="color:#ADBAC7;">}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">@</span><span style="color:#D73A49;">RequestMapping</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">value</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> { </span><span style="color:#032F62;">&quot;/index&quot;</span><span style="color:#24292E;">, </span><span style="color:#032F62;">&quot;/&quot;</span><span style="color:#24292E;">}, </span><span style="color:#005CC5;">method</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> RequestMethod.GET ) </span><span style="color:#D73A49;">public</span><span style="color:#24292E;"> ModelAndView </span><span style="color:#6F42C1;">accueil</span><span style="color:#24292E;">(</span></span>
<span class="line"><span style="color:#24292E;">          @</span><span style="color:#D73A49;">Qualifier</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;enquete&quot;</span><span style="color:#24292E;">) @</span><span style="color:#D73A49;">PageableDefault</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">value</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">10</span><span style="color:#24292E;">, </span><span style="color:#005CC5;">sort</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;nom&quot;</span><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#24292E;">          Pageable pageableEnquete,</span></span>
<span class="line"><span style="color:#24292E;">          @</span><span style="color:#D73A49;">Qualifier</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;utilisateur&quot;</span><span style="color:#24292E;">) @</span><span style="color:#D73A49;">PageableDefault</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">value</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">4</span><span style="color:#24292E;">, </span><span style="color:#005CC5;">sort</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;login&quot;</span><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#24292E;">          Pageable pageableUtilisateur) {</span></span>
<span class="line"><span style="color:#24292E;">ModelAndView mav </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">new</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">ModelAndView</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;index&quot;</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#24292E;">     mav.</span><span style="color:#6F42C1;">addObject</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;pageDEnquetes&quot;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">enqueteService.</span><span style="color:#6F42C1;">recupererEnquetes</span><span style="color:#24292E;">(pageableEnquete));</span></span>
<span class="line"><span style="color:#24292E;">mav.</span><span style="color:#6F42C1;">addObject</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;pageDUtilisateurs&quot;</span><span style="color:#24292E;">, utilisateurService.</span><span style="color:#6F42C1;">recupererUtilisateurs</span><span style="color:#24292E;">(pageableUtilisateur));</span></span>
<span class="line"><span style="color:#D73A49;">return</span><span style="color:#24292E;"> mav;</span></span>
<span class="line"><span style="color:#24292E;">}</span></span></code></pre></div><p>Exemple d’URL: <a href="http://localhost:8080/index?utilisateur_page=4&amp;enquete_page=1" target="_blank" rel="noreferrer">http://localhost:8080/index?utilisateur_page=4&amp;enquete_page=1</a></p><p>Exemple d’URL avec tri : <a href="http://localhost:8080/index?utilisateur_page=4&amp;enquete_page=1&amp;enquete_sort=nom" target="_blank" rel="noreferrer">http://localhost:8080/index?utilisateur_page=4&amp;enquete_page=1&amp;enquete_sort=nom</a></p><h2 id="repositoryrestresource" tabindex="-1">@RepositoryRestResource <a class="header-anchor" href="#repositoryrestresource" aria-label="Permalink to &quot;@RepositoryRestResource&quot;">​</a></h2><p>Génère automatiquement une API REST pour l’entité associée (les méthodes disponibles sont <code>GET</code>, <code>POST</code>, <code>PUT</code>, <code>PATCH</code> et <code>DELETE</code>). L’attribut exported a la valeur true par défaut</p><p><a href="https://docs.spring.io/spring-data/rest/docs/current/reference/html/#reference" target="_blank" rel="noreferrer">https://docs.spring.io/spring-data/rest/docs/current/reference/html/#reference</a></p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki github-dark-dimmed vp-code-dark"><code><span class="line"><span style="color:#ADBAC7;">@</span><span style="color:#F47067;">RepositoryRestResource</span><span style="color:#ADBAC7;">(</span><span style="color:#6CB6FF;">exported</span><span style="color:#ADBAC7;"> </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> </span><span style="color:#6CB6FF;">true</span><span style="color:#ADBAC7;">)</span></span>
<span class="line"><span style="color:#F47067;">public</span><span style="color:#ADBAC7;"> </span><span style="color:#F47067;">interface</span><span style="color:#ADBAC7;"> </span><span style="color:#F69D50;">EnqueteDao</span><span style="color:#ADBAC7;"> </span><span style="color:#F47067;">extends</span><span style="color:#ADBAC7;"> </span><span style="color:#6CB6FF;">JpaRepository</span><span style="color:#ADBAC7;">&lt;</span><span style="color:#F47067;">Enquete</span><span style="color:#ADBAC7;">, </span><span style="color:#F47067;">Long</span><span style="color:#ADBAC7;">&gt; {}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">@</span><span style="color:#D73A49;">RepositoryRestResource</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">exported</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">true</span><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#D73A49;">public</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">interface</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">EnqueteDao</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">extends</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">JpaRepository</span><span style="color:#24292E;">&lt;</span><span style="color:#D73A49;">Enquete</span><span style="color:#24292E;">, </span><span style="color:#D73A49;">Long</span><span style="color:#24292E;">&gt; {}</span></span></code></pre></div><h2 id="persistencecontext" tabindex="-1">@PersistenceContext <a class="header-anchor" href="#persistencecontext" aria-label="Permalink to &quot;@PersistenceContext&quot;">​</a></h2><p>Récupère l’entity manager (correspondant au persistence contexte d’Hibernate) associé au projet</p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki github-dark-dimmed vp-code-dark"><code><span class="line"><span style="color:#ADBAC7;">@</span><span style="color:#F47067;">PersistenceContext</span></span>
<span class="line"><span style="color:#F47067;">private</span><span style="color:#ADBAC7;"> EntityManager</span><span style="color:#F69D50;"> </span><span style="color:#ADBAC7;">entityManager;</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">@</span><span style="color:#D73A49;">PersistenceContext</span></span>
<span class="line"><span style="color:#D73A49;">private</span><span style="color:#24292E;"> EntityManager entityManager;</span></span></code></pre></div><p>Un avantage est de récupérer la session Hibernate grâce à la méthode unwrap :</p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki github-dark-dimmed vp-code-dark"><code><span class="line"><span style="color:#ADBAC7;">Session</span><span style="color:#F69D50;"> </span><span style="color:#ADBAC7;">session</span><span style="color:#F69D50;"> </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> entityManager.</span><span style="color:#DCBDFB;">unwrap</span><span style="color:#ADBAC7;">(Session.class); CriteriaBuilder</span><span style="color:#F69D50;"> </span><span style="color:#ADBAC7;">criteriabuider</span><span style="color:#F69D50;"> </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> session.</span><span style="color:#DCBDFB;">getCriteriaBuilder</span><span style="color:#ADBAC7;">();</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">Session session </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> entityManager.</span><span style="color:#6F42C1;">unwrap</span><span style="color:#24292E;">(Session.class); CriteriaBuilder criteriabuider </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> session.</span><span style="color:#6F42C1;">getCriteriaBuilder</span><span style="color:#24292E;">();</span></span></code></pre></div><h2 id="entityscan" tabindex="-1">@EntityScan <a class="header-anchor" href="#entityscan" aria-label="Permalink to &quot;@EntityScan&quot;">​</a></h2><p>Active l’analyse des classes présentes dans le package de la classe annotée ainsi que des classes présentes dans les sous-packages. Spring va tester l’existence de classes annotées <code>@Entity</code></p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki github-dark-dimmed vp-code-dark"><code><span class="line"><span style="color:#ADBAC7;">@</span><span style="color:#F47067;">EntityScan</span><span style="color:#ADBAC7;">(</span><span style="color:#96D0FF;">&quot;fr.clelia.fx.domain&quot;</span><span style="color:#ADBAC7;">)</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">@</span><span style="color:#D73A49;">EntityScan</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;fr.clelia.fx.domain&quot;</span><span style="color:#24292E;">)</span></span></code></pre></div><h2 id="componentscan" tabindex="-1">@ComponentScan <a class="header-anchor" href="#componentscan" aria-label="Permalink to &quot;@ComponentScan&quot;">​</a></h2><p>Active l’analyse des classes présentes dans le package précisé en paramètre. Spring va tester l’existence de classes annotées <code>@Component</code>, <code>@Service</code>, <code>@Repository</code>, etc. Les sous-packages sont également scannés. Avec cette annotation, le nom d’un package peut être indiqué :</p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki github-dark-dimmed vp-code-dark"><code><span class="line"><span style="color:#ADBAC7;">@</span><span style="color:#F47067;">ComponentScan</span><span style="color:#ADBAC7;">(</span><span style="color:#96D0FF;">&quot;fr.clelia.fx.un_autre_package_a_scanner&quot;</span><span style="color:#ADBAC7;">)</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">@</span><span style="color:#D73A49;">ComponentScan</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;fr.clelia.fx.un_autre_package_a_scanner&quot;</span><span style="color:#24292E;">)</span></span></code></pre></div><h2 id="springbootconfiguration" tabindex="-1">@SpringBootConfiguration <a class="header-anchor" href="#springbootconfiguration" aria-label="Permalink to &quot;@SpringBootConfiguration&quot;">​</a></h2><p>Annotation qui remplace les trois annotations suivantes :</p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki github-dark-dimmed vp-code-dark"><code><span class="line"><span style="color:#ADBAC7;">@</span><span style="color:#F47067;">Configuration</span></span>
<span class="line"><span style="color:#ADBAC7;">@</span><span style="color:#F47067;">EnableAutoConfiguration</span></span>
<span class="line"><span style="color:#ADBAC7;">@</span><span style="color:#F47067;">ComponentScan</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">@</span><span style="color:#D73A49;">Configuration</span></span>
<span class="line"><span style="color:#24292E;">@</span><span style="color:#D73A49;">EnableAutoConfiguration</span></span>
<span class="line"><span style="color:#24292E;">@</span><span style="color:#D73A49;">ComponentScan</span></span></code></pre></div><p>Cette annotation se trouve par défaut sur la classe exécutable du package racine :</p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki github-dark-dimmed vp-code-dark"><code><span class="line"><span style="color:#ADBAC7;">@</span><span style="color:#F47067;">SpringBootConfiguration</span></span>
<span class="line"><span style="color:#F47067;">public</span><span style="color:#ADBAC7;"> </span><span style="color:#F47067;">class</span><span style="color:#ADBAC7;"> </span><span style="color:#F69D50;">EnquetesApplication</span><span style="color:#ADBAC7;"> {}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">@</span><span style="color:#D73A49;">SpringBootConfiguration</span></span>
<span class="line"><span style="color:#D73A49;">public</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">class</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">EnquetesApplication</span><span style="color:#24292E;"> {}</span></span></code></pre></div><h2 id="resource" tabindex="-1">@Resource <a class="header-anchor" href="#resource" aria-label="Permalink to &quot;@Resource&quot;">​</a></h2><p>Annotation qui fait partie des annotations communes en Java (JSR 250 : <a href="https://jcp.org/en/jsr/detail?id=250" target="_blank" rel="noreferrer">https://jcp.org/en/jsr/detail?id=250</a>). Elle permet l’injection d’un attribut sans passer par le constructeur ni les setters. Elle s’utilise au dessus d’un attribut (alors que l’annotation <code>@Bean</code> s’utilise au dessus d’une méthode) :</p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki github-dark-dimmed vp-code-dark"><code><span class="line"><span style="color:#ADBAC7;">@</span><span style="color:#F47067;">Resource</span></span>
<span class="line"><span style="color:#F47067;">private</span><span style="color:#ADBAC7;"> File</span><span style="color:#F69D50;"> </span><span style="color:#ADBAC7;">fichier;</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">@</span><span style="color:#D73A49;">Resource</span></span>
<span class="line"><span style="color:#D73A49;">private</span><span style="color:#24292E;"> File fichier;</span></span></code></pre></div><h2 id="importresource" tabindex="-1">@ImportResource <a class="header-anchor" href="#importresource" aria-label="Permalink to &quot;@ImportResource&quot;">​</a></h2><p>Annotation demandant l’import d’un fichier XML de configuration. Spring va charger le fichier XML donné en paramètre et va tenter d’ajouter dans son conteneur IoC les beans définis dans ce fichier XML. Pour rappel : l’application Spring peut être configurée via un fichier XML, une ou plusieurs classes Java annotées @Configuration, un fichier texte application.properties ou un fichier texte application.yml :</p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki github-dark-dimmed vp-code-dark"><code><span class="line"><span style="color:#ADBAC7;">@</span><span style="color:#F47067;">SpringBootConfiguration</span></span>
<span class="line"><span style="color:#ADBAC7;">@</span><span style="color:#F47067;">ImportResource</span><span style="color:#ADBAC7;">(</span><span style="color:#96D0FF;">&quot;spring-servlet.xml&quot;</span><span style="color:#ADBAC7;">)</span></span>
<span class="line"><span style="color:#F47067;">public</span><span style="color:#ADBAC7;"> </span><span style="color:#F47067;">class</span><span style="color:#ADBAC7;"> </span><span style="color:#F69D50;">EnquetesApplication</span><span style="color:#ADBAC7;"> {}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">@</span><span style="color:#D73A49;">SpringBootConfiguration</span></span>
<span class="line"><span style="color:#24292E;">@</span><span style="color:#D73A49;">ImportResource</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;spring-servlet.xml&quot;</span><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#D73A49;">public</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">class</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">EnquetesApplication</span><span style="color:#24292E;"> {}</span></span></code></pre></div><h2 id="enablejparepositories" tabindex="-1">@EnableJpaRepositories <a class="header-anchor" href="#enablejparepositories" aria-label="Permalink to &quot;@EnableJpaRepositories&quot;">​</a></h2><p>Annotation activant les JPA repositories Cette annotation se trouve rarement dans les projets Spring car les Jpa repositories sont activées par défaut via la propriété spring.data.jpa.repositories.enabled dont la valeur par défaut est true</p><h2 id="enablecaching" tabindex="-1">@EnableCaching <a class="header-anchor" href="#enablecaching" aria-label="Permalink to &quot;@EnableCaching&quot;">​</a></h2><p>Annotation activant la gestion du cache de second niveau via un ensemble d’annotations dédiées</p><h2 id="enableautoconfiguration" tabindex="-1">@EnableAutoConfiguration <a class="header-anchor" href="#enableautoconfiguration" aria-label="Permalink to &quot;@EnableAutoConfiguration&quot;">​</a></h2><p>Laisse au framework la configuration des beans qui seront très probablement nécessaires pour l’application</p><h2 id="enablescheduling" tabindex="-1">@EnableScheduling <a class="header-anchor" href="#enablescheduling" aria-label="Permalink to &quot;@EnableScheduling&quot;">​</a></h2><p>Annotation nécessaire dans la classe exécutable pour que les méthodes annotées @Scheduled se lancent comme programmées</p><p><a href="https://spring.io/guides/gs/scheduling-tasks/" target="_blank" rel="noreferrer">https://spring.io/guides/gs/scheduling-tasks/</a></p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki github-dark-dimmed vp-code-dark"><code><span class="line"><span style="color:#ADBAC7;">@</span><span style="color:#F47067;">SpringBootConfiguration</span><span style="color:#ADBAC7;"> @</span><span style="color:#F47067;">EnableScheduling</span></span>
<span class="line"><span style="color:#F47067;">public</span><span style="color:#ADBAC7;"> </span><span style="color:#F47067;">class</span><span style="color:#ADBAC7;"> </span><span style="color:#F69D50;">EnquetesApplication</span><span style="color:#ADBAC7;"> {}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">@</span><span style="color:#D73A49;">SpringBootConfiguration</span><span style="color:#24292E;"> @</span><span style="color:#D73A49;">EnableScheduling</span></span>
<span class="line"><span style="color:#D73A49;">public</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">class</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">EnquetesApplication</span><span style="color:#24292E;"> {}</span></span></code></pre></div><h2 id="profile" tabindex="-1">@Profile <a class="header-anchor" href="#profile" aria-label="Permalink to &quot;@Profile&quot;">​</a></h2><p>Annotation indiquant le(s) profile(s) dans lequel/lesquels le bean doit être instancié Dans l’exemple ci-dessous le bean sera instancié uniquement si le profil actif est dev :</p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki github-dark-dimmed vp-code-dark"><code><span class="line"><span style="color:#ADBAC7;">@</span><span style="color:#F47067;">Bean</span></span>
<span class="line"><span style="color:#ADBAC7;">@</span><span style="color:#F47067;">Profile</span><span style="color:#ADBAC7;">(</span><span style="color:#96D0FF;">&quot;dev&quot;</span><span style="color:#ADBAC7;">)</span></span>
<span class="line"><span style="color:#F47067;">public</span><span style="color:#ADBAC7;"> CommandLineRunner </span><span style="color:#DCBDFB;">commandLineRunner</span><span style="color:#ADBAC7;">(ApplicationContext)</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">@</span><span style="color:#D73A49;">Bean</span></span>
<span class="line"><span style="color:#24292E;">@</span><span style="color:#D73A49;">Profile</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;dev&quot;</span><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#D73A49;">public</span><span style="color:#24292E;"> CommandLineRunner </span><span style="color:#6F42C1;">commandLineRunner</span><span style="color:#24292E;">(ApplicationContext)</span></span></code></pre></div><p>Pour activer le profil dev, il suffit d’ajouter dans le fichier <code>src/main/application.properties</code> :</p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki github-dark-dimmed vp-code-dark"><code><span class="line"><span style="color:#ADBAC7;">spring.profiles.active</span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;">dev</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">spring.profiles.active</span><span style="color:#D73A49;">=</span><span style="color:#24292E;">dev</span></span></code></pre></div><h1 id="spring-test" tabindex="-1">Spring Test <a class="header-anchor" href="#spring-test" aria-label="Permalink to &quot;Spring Test&quot;">​</a></h1><h2 id="springboottest" tabindex="-1">@SpringBootTest <a class="header-anchor" href="#springboottest" aria-label="Permalink to &quot;@SpringBootTest&quot;">​</a></h2><p>Annotation à placer au dessus d&#39;une classe de test pour indiquer à Spring qu&#39;il s&#39;agit d&#39;une classe de test.</p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki github-dark-dimmed vp-code-dark"><code><span class="line"><span style="color:#ADBAC7;">@</span><span style="color:#F47067;">SpringBootTest</span><span style="color:#ADBAC7;"> @</span><span style="color:#F47067;">TestMethodOrder</span><span style="color:#ADBAC7;">(MethodOrderer.OrderAnnotation.class) </span><span style="color:#F47067;">public</span><span style="color:#ADBAC7;"> </span><span style="color:#F47067;">class</span><span style="color:#ADBAC7;"> </span><span style="color:#F69D50;">EnqueteServiceImplTest</span><span style="color:#ADBAC7;"> {</span></span>
<span class="line"><span style="color:#ADBAC7;">@</span><span style="color:#F47067;">Autowired</span></span>
<span class="line"><span style="color:#F47067;">private</span><span style="color:#ADBAC7;"> EnqueteService</span><span style="color:#F69D50;"> </span><span style="color:#ADBAC7;">enqueteService;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ADBAC7;">@</span><span style="color:#F47067;">Test</span></span>
<span class="line"><span style="color:#F47067;">public</span><span style="color:#ADBAC7;"> </span><span style="color:#F47067;">void</span><span style="color:#ADBAC7;"> </span><span style="color:#DCBDFB;">testerAjouterEnquete</span><span style="color:#ADBAC7;">() {</span></span>
<span class="line"><span style="color:#ADBAC7;">String</span><span style="color:#F69D50;"> </span><span style="color:#ADBAC7;">nom</span><span style="color:#F69D50;"> </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> </span><span style="color:#96D0FF;">&quot;Enquete de test&quot;</span><span style="color:#ADBAC7;">;</span></span>
<span class="line"><span style="color:#F47067;">float</span><span style="color:#F69D50;"> </span><span style="color:#ADBAC7;">prix</span><span style="color:#F69D50;"> </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> </span><span style="color:#6CB6FF;">10f</span><span style="color:#ADBAC7;">;</span></span>
<span class="line"><span style="color:#ADBAC7;">Enquete</span><span style="color:#F69D50;"> </span><span style="color:#ADBAC7;">enquete</span><span style="color:#F69D50;"> </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> enqueteService.</span><span style="color:#DCBDFB;">ajouterEnquete</span><span style="color:#ADBAC7;">(nom, prix); </span><span style="color:#DCBDFB;">assertNotNull</span><span style="color:#ADBAC7;">(enquete);</span></span>
<span class="line"><span style="color:#DCBDFB;">assertNotNull</span><span style="color:#ADBAC7;">(enquete.</span><span style="color:#DCBDFB;">getNom</span><span style="color:#ADBAC7;">()); </span><span style="color:#DCBDFB;">assertEquals</span><span style="color:#ADBAC7;">(enquete.</span><span style="color:#DCBDFB;">getNom</span><span style="color:#ADBAC7;">(), nom); </span><span style="color:#DCBDFB;">assertEquals</span><span style="color:#ADBAC7;">(enquete.</span><span style="color:#DCBDFB;">getPrix</span><span style="color:#ADBAC7;">(), prix);</span></span>
<span class="line"><span style="color:#ADBAC7;">   }</span></span>
<span class="line"><span style="color:#ADBAC7;">}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">@</span><span style="color:#D73A49;">SpringBootTest</span><span style="color:#24292E;"> @</span><span style="color:#D73A49;">TestMethodOrder</span><span style="color:#24292E;">(MethodOrderer.OrderAnnotation.class) </span><span style="color:#D73A49;">public</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">class</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">EnqueteServiceImplTest</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">@</span><span style="color:#D73A49;">Autowired</span></span>
<span class="line"><span style="color:#D73A49;">private</span><span style="color:#24292E;"> EnqueteService enqueteService;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">@</span><span style="color:#D73A49;">Test</span></span>
<span class="line"><span style="color:#D73A49;">public</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">void</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">testerAjouterEnquete</span><span style="color:#24292E;">() {</span></span>
<span class="line"><span style="color:#24292E;">String nom </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;Enquete de test&quot;</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#D73A49;">float</span><span style="color:#24292E;"> prix </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">10f</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#24292E;">Enquete enquete </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> enqueteService.</span><span style="color:#6F42C1;">ajouterEnquete</span><span style="color:#24292E;">(nom, prix); </span><span style="color:#6F42C1;">assertNotNull</span><span style="color:#24292E;">(enquete);</span></span>
<span class="line"><span style="color:#6F42C1;">assertNotNull</span><span style="color:#24292E;">(enquete.</span><span style="color:#6F42C1;">getNom</span><span style="color:#24292E;">()); </span><span style="color:#6F42C1;">assertEquals</span><span style="color:#24292E;">(enquete.</span><span style="color:#6F42C1;">getNom</span><span style="color:#24292E;">(), nom); </span><span style="color:#6F42C1;">assertEquals</span><span style="color:#24292E;">(enquete.</span><span style="color:#6F42C1;">getPrix</span><span style="color:#24292E;">(), prix);</span></span>
<span class="line"><span style="color:#24292E;">   }</span></span>
<span class="line"><span style="color:#24292E;">}</span></span></code></pre></div><p>Il est possible d’utiliser des mockMvc :</p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki github-dark-dimmed vp-code-dark"><code><span class="line"><span style="color:#ADBAC7;">@</span><span style="color:#F47067;">WebMvcTest</span><span style="color:#ADBAC7;">(EnqueteController.class) </span><span style="color:#F47067;">public</span><span style="color:#ADBAC7;"> </span><span style="color:#F47067;">class</span><span style="color:#ADBAC7;"> </span><span style="color:#F69D50;">EnqueteControllerTest</span><span style="color:#ADBAC7;"> {</span></span>
<span class="line"><span style="color:#F47067;">private</span><span style="color:#ADBAC7;"> MockMvc</span><span style="color:#F69D50;"> </span><span style="color:#ADBAC7;">mockMvc; @</span><span style="color:#F47067;">Autowired</span></span>
<span class="line"><span style="color:#F47067;">private</span><span style="color:#ADBAC7;"> EnqueteController</span><span style="color:#F69D50;"> </span><span style="color:#ADBAC7;">enqueteController;</span></span>
<span class="line"><span style="color:#ADBAC7;">@</span><span style="color:#F47067;">BeforeEach</span></span>
<span class="line"><span style="color:#F47067;">public</span><span style="color:#ADBAC7;"> </span><span style="color:#F47067;">void</span><span style="color:#ADBAC7;"> </span><span style="color:#DCBDFB;">setup</span><span style="color:#ADBAC7;">() {</span></span>
<span class="line"><span style="color:#ADBAC7;">mockMvc </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> MockMvcBuilders.</span><span style="color:#DCBDFB;">standaloneSetup</span><span style="color:#ADBAC7;">(enqueteController).</span><span style="color:#DCBDFB;">build</span><span style="color:#ADBAC7;">();</span></span>
<span class="line"><span style="color:#ADBAC7;">}</span></span>
<span class="line"><span style="color:#ADBAC7;">@</span><span style="color:#F47067;">Test</span></span>
<span class="line"><span style="color:#F47067;">public</span><span style="color:#ADBAC7;"> </span><span style="color:#F47067;">void</span><span style="color:#ADBAC7;"> </span><span style="color:#DCBDFB;">testerConnexionAvecSucces</span><span style="color:#ADBAC7;">() </span><span style="color:#F47067;">throws</span><span style="color:#ADBAC7;"> Exception { </span><span style="color:#6CB6FF;">this</span><span style="color:#ADBAC7;">.mockMvc</span></span>
<span class="line"><span style="color:#ADBAC7;">.</span><span style="color:#DCBDFB;">perform</span><span style="color:#ADBAC7;">(MockMvcRequestBuilders.</span><span style="color:#DCBDFB;">post</span><span style="color:#ADBAC7;"> (</span><span style="color:#96D0FF;">&quot;/connexion&quot;</span><span style="color:#ADBAC7;">).</span><span style="color:#DCBDFB;">accept</span><span style="color:#ADBAC7;">(MediaType.TEXT_HTML)</span></span>
<span class="line"><span style="color:#ADBAC7;">                                    .</span><span style="color:#DCBDFB;">param</span><span style="color:#ADBAC7;">(</span><span style="color:#96D0FF;">&quot;email&quot;</span><span style="color:#ADBAC7;">,</span></span>
<span class="line"><span style="color:#96D0FF;">&quot;fxcote@clelia.fr&quot;</span><span style="color:#ADBAC7;">).</span><span style="color:#DCBDFB;">param</span><span style="color:#ADBAC7;">(</span><span style="color:#96D0FF;">&quot;password&quot;</span><span style="color:#ADBAC7;">, </span><span style="color:#96D0FF;">&quot;12345&quot;</span><span style="color:#ADBAC7;">))</span></span>
<span class="line"><span style="color:#DCBDFB;">Ok</span><span style="color:#ADBAC7;">()); }</span></span>
<span class="line"><span style="color:#ADBAC7;">}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">@</span><span style="color:#D73A49;">WebMvcTest</span><span style="color:#24292E;">(EnqueteController.class) </span><span style="color:#D73A49;">public</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">class</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">EnqueteControllerTest</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#D73A49;">private</span><span style="color:#24292E;"> MockMvc mockMvc; @</span><span style="color:#D73A49;">Autowired</span></span>
<span class="line"><span style="color:#D73A49;">private</span><span style="color:#24292E;"> EnqueteController enqueteController;</span></span>
<span class="line"><span style="color:#24292E;">@</span><span style="color:#D73A49;">BeforeEach</span></span>
<span class="line"><span style="color:#D73A49;">public</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">void</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">setup</span><span style="color:#24292E;">() {</span></span>
<span class="line"><span style="color:#24292E;">mockMvc </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> MockMvcBuilders.</span><span style="color:#6F42C1;">standaloneSetup</span><span style="color:#24292E;">(enqueteController).</span><span style="color:#6F42C1;">build</span><span style="color:#24292E;">();</span></span>
<span class="line"><span style="color:#24292E;">}</span></span>
<span class="line"><span style="color:#24292E;">@</span><span style="color:#D73A49;">Test</span></span>
<span class="line"><span style="color:#D73A49;">public</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">void</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">testerConnexionAvecSucces</span><span style="color:#24292E;">() </span><span style="color:#D73A49;">throws</span><span style="color:#24292E;"> Exception { </span><span style="color:#005CC5;">this</span><span style="color:#24292E;">.mockMvc</span></span>
<span class="line"><span style="color:#24292E;">.</span><span style="color:#6F42C1;">perform</span><span style="color:#24292E;">(MockMvcRequestBuilders.</span><span style="color:#6F42C1;">post</span><span style="color:#24292E;"> (</span><span style="color:#032F62;">&quot;/connexion&quot;</span><span style="color:#24292E;">).</span><span style="color:#6F42C1;">accept</span><span style="color:#24292E;">(MediaType.TEXT_HTML)</span></span>
<span class="line"><span style="color:#24292E;">                                    .</span><span style="color:#6F42C1;">param</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;email&quot;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#032F62;">&quot;fxcote@clelia.fr&quot;</span><span style="color:#24292E;">).</span><span style="color:#6F42C1;">param</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;password&quot;</span><span style="color:#24292E;">, </span><span style="color:#032F62;">&quot;12345&quot;</span><span style="color:#24292E;">))</span></span>
<span class="line"><span style="color:#6F42C1;">Ok</span><span style="color:#24292E;">()); }</span></span>
<span class="line"><span style="color:#24292E;">}</span></span></code></pre></div><h2 id="datajpatest" tabindex="-1">@DataJpaTest <a class="header-anchor" href="#datajpatest" aria-label="Permalink to &quot;@DataJpaTest&quot;">​</a></h2><p>Annotation destinée à une classe testant une DAO Les tests dans cette classe utilisent par défaut une base de données H2 stockée en mémoire</p><h2 id="test" tabindex="-1">@Test <a class="header-anchor" href="#test" aria-label="Permalink to &quot;@Test&quot;">​</a></h2><p>Annotation de JUnit à utiliser sur chaque méthode que la phase de test doit invoquer</p><h2 id="testmethodorder" tabindex="-1">@TestMethodOrder <a class="header-anchor" href="#testmethodorder" aria-label="Permalink to &quot;@TestMethodOrder&quot;">​</a></h2><p>Annotation de JUnit servant à imposer un ordre dans l’exécution des méthodes d’une classe de test</p><h2 id="order" tabindex="-1">@Order <a class="header-anchor" href="#order" aria-label="Permalink to &quot;@Order&quot;">​</a></h2><p>Annotation de JUnit indiquant le rang d’exécution d’une méthode de test</p><h2 id="mockbean" tabindex="-1">@MockBean <a class="header-anchor" href="#mockbean" aria-label="Permalink to &quot;@MockBean&quot;">​</a></h2><p>Annotation à placer sur l’objet que la classe de test doit simuler</p><h2 id="autoconfiguremockmvc" tabindex="-1">@AutoConfigureMockMvc <a class="header-anchor" href="#autoconfiguremockmvc" aria-label="Permalink to &quot;@AutoConfigureMockMvc&quot;">​</a></h2><p>Annotation à placer sur la classe de test pour que Spring configure automatiquement les Mocks Mvc</p><h2 id="withmockuser" tabindex="-1">@WithMockUser <a class="header-anchor" href="#withmockuser" aria-label="Permalink to &quot;@WithMockUser&quot;">​</a></h2><p>Annotation indiquant quel utilisateur imité pour lancer le test. L’annotation accepte un paramètre roles pour renseigner un rôle défini dans la configuration de Spring Security</p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki github-dark-dimmed vp-code-dark"><code><span class="line"><span style="color:#ADBAC7;">@</span><span style="color:#F47067;">Test</span></span>
<span class="line"><span style="color:#ADBAC7;">@</span><span style="color:#F47067;">Order</span><span style="color:#ADBAC7;">(</span><span style="color:#6CB6FF;">1</span><span style="color:#ADBAC7;">)</span></span>
<span class="line"><span style="color:#ADBAC7;">@</span><span style="color:#F47067;">WithMockUser</span><span style="color:#ADBAC7;">(</span><span style="color:#6CB6FF;">roles</span><span style="color:#ADBAC7;"> </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> </span><span style="color:#96D0FF;">&quot;ADMIN&quot;</span><span style="color:#ADBAC7;">)</span></span>
<span class="line"><span style="color:#F47067;">void</span><span style="color:#ADBAC7;"> </span><span style="color:#DCBDFB;">testerAjouterTheme</span><span style="color:#ADBAC7;">() throws Exception {}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">@</span><span style="color:#D73A49;">Test</span></span>
<span class="line"><span style="color:#24292E;">@</span><span style="color:#D73A49;">Order</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">1</span><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#24292E;">@</span><span style="color:#D73A49;">WithMockUser</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">roles</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;ADMIN&quot;</span><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#D73A49;">void</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">testerAjouterTheme</span><span style="color:#24292E;">() throws Exception {}</span></span></code></pre></div><h2 id="sql" tabindex="-1">@Sql <a class="header-anchor" href="#sql" aria-label="Permalink to &quot;@Sql&quot;">​</a></h2><p>Annotation à placer sur la classe de test pour que Spring exécute le ou les scripts SQL donnés en paramètre</p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki github-dark-dimmed vp-code-dark"><code><span class="line"><span style="color:#ADBAC7;">@</span><span style="color:#F47067;">Sql</span><span style="color:#ADBAC7;">({</span><span style="color:#96D0FF;">&quot;/drop.sql&quot;</span><span style="color:#ADBAC7;">,</span><span style="color:#96D0FF;">&quot;/create.sql&quot;</span><span style="color:#ADBAC7;">}) </span><span style="color:#F47067;">public</span><span style="color:#ADBAC7;"> </span><span style="color:#F47067;">class</span><span style="color:#ADBAC7;"> </span><span style="color:#F69D50;">EnqueteControllerTest</span><span style="color:#ADBAC7;"> {}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">@</span><span style="color:#D73A49;">Sql</span><span style="color:#24292E;">({</span><span style="color:#032F62;">&quot;/drop.sql&quot;</span><span style="color:#24292E;">,</span><span style="color:#032F62;">&quot;/create.sql&quot;</span><span style="color:#24292E;">}) </span><span style="color:#D73A49;">public</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">class</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">EnqueteControllerTest</span><span style="color:#24292E;"> {}</span></span></code></pre></div></div></div></main><footer class="VPDocFooter" data-v-281cfc61 data-v-9f442026><!--[--><!--]--><!----><nav class="prev-next" data-v-9f442026><div class="pager" data-v-9f442026><!----></div><div class="pager" data-v-9f442026><a class="pager-link next" href="/Java/src/annotations/articles/introduction.html" data-v-9f442026><span class="desc" data-v-9f442026>Page Suivante</span><span class="title" data-v-9f442026>Introduction</span></a></div></nav></footer><!--[--><!--]--></div></div></div><!--[--><!--]--></div></div><!----><!--[--><!--]--></div></div>
    <script>window.__VP_HASH_MAP__=JSON.parse("{\"index.md\":\"042be6be\",\"src_annotations_articles_introduction.md\":\"333499fa\",\"src_annotations_articles_jackson.md\":\"ae1c13b1\",\"src_annotations_articles_lombok.md\":\"d13cd20b\",\"src_annotations_articles_hibernate.md\":\"60e12332\",\"src_annotations_articles_java_lang.md\":\"37677e57\",\"src_annotations_articles_swagger.md\":\"e4b62dfa\",\"src_cookbook_articles_documentation.md\":\"d5a31295\",\"src_cookbook_articles_dao.md\":\"cfb7678a\",\"src_cookbook_articles_application_properties.md\":\"94d26b91\",\"src_cookbook_articles_controlleur.md\":\"0ea342a6\",\"src_annotations_articles_validation.md\":\"0ffa4ab4\",\"src_cookbook_articles_api_rest.md\":\"15ba3b8f\",\"src_cookbook_articles_introduction.md\":\"beca0b9f\",\"src_cookbook_articles_service.md\":\"9a5a766e\",\"src_cookbook_articles_annexes.md\":\"e6aa6f05\",\"src_annotations_articles_spring.md\":\"3c74766a\",\"src_cookbook_articles_classes_business.md\":\"e3440f61\",\"src_cookbook_articles_test.md\":\"ae135ebc\",\"src_cookbook_articles_spring_initializer.md\":\"df5e93a3\",\"src_cookbook_articles_web_inf.md\":\"f35d1bb9\"}");window.__VP_SITE_DATA__=JSON.parse("{\"lang\":\"en-US\",\"dir\":\"ltr\",\"title\":\"Java Annotations\",\"description\":\"Memento Annotation Java\",\"base\":\"/Java/\",\"head\":[],\"appearance\":true,\"themeConfig\":{\"logo\":\"https://www.clelia.fr/images/Header.png\",\"lastUpdated\":{\"text\":\"Dernière mise à jour le\",\"formatOptions\":{\"dateStyle\":\"full\",\"timeStyle\":\"medium\"}},\"nav\":[{\"text\":\"Accueil\",\"link\":\"/\"},{\"text\":\"Menu\",\"items\":[{\"text\":\"Annotations Java\",\"link\":\"src/annotations/articles/introduction\"},{\"text\":\"Cookbook\",\"link\":\"src/cookbook/articles/introduction\"}]}],\"sidebar\":{\"src/annotations/\":[{\"text\":\"Annotations\",\"items\":[{\"text\":\"Introduction\",\"link\":\"src/annotations/articles/introduction\"},{\"text\":\"Hibernate\",\"link\":\"src/annotations/articles/hibernate\"},{\"text\":\"Java_lang\",\"link\":\"src/annotations/articles/java_lang\"},{\"text\":\"Spring\",\"link\":\"src/annotations/articles/spring\"},{\"text\":\"Lombok\",\"link\":\"src/annotations/articles/lombok\"},{\"text\":\"Validation\",\"link\":\"src/annotations/articles/validation\"},{\"text\":\"Swagger\",\"link\":\"src/annotations/articles/swagger\"},{\"text\":\"Jackson\",\"link\":\"src/annotations/articles/jackson\"}]}],\"src/cookbook/\":[{\"text\":\"Cookbook\",\"items\":[{\"text\":\"Introduction\",\"link\":\"src/cookbook/articles/introduction\"},{\"text\":\"Spring Initializer\",\"link\":\"src/cookbook/articles/spring_initializer\"},{\"text\":\"Application.properties\",\"link\":\"src/cookbook/articles/application_properties\"},{\"text\":\"Classes business\",\"link\":\"src/cookbook/articles/classes_business\"},{\"text\":\"Dao\",\"link\":\"src/cookbook/articles/dao\"},{\"text\":\"Service\",\"link\":\"src/cookbook/articles/service\"},{\"text\":\"Controlleur\",\"link\":\"src/cookbook/articles/controlleur\"},{\"text\":\"WEB-INF\",\"link\":\"src/cookbook/articles/web_inf\"},{\"text\":\"API Rest\",\"link\":\"src/cookbook/articles/api_rest\"},{\"text\":\"Test\",\"link\":\"src/cookbook/articles/test\"},{\"text\":\"Documentation API\",\"link\":\"src/cookbook/articles/documentation\"},{\"text\":\"Annexes\",\"link\":\"src/cookbook/articles/annexes\"}]}]},\"search\":{\"provider\":\"local\"},\"socialLinks\":[{\"icon\":\"github\",\"link\":\"https://github.com/vuejs/vitepress\"}],\"docFooter\":{\"prev\":\"Page précédente\",\"next\":\"Page Suivante\"}},\"locales\":{},\"scrollOffset\":90,\"cleanUrls\":false}");</script>
    
  </body>
</html>