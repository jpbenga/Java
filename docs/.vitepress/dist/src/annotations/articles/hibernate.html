<!DOCTYPE html>
<html lang="en-US" dir="ltr">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>JPA, Hibernate ORM | Java Annotations</title>
    <meta name="description" content="Memento Annotation Java">
    <link rel="preload stylesheet" href="/Java/assets/style.ae7e0354.css" as="style">
    
    <script type="module" src="/Java/assets/app.a10d318e.js"></script>
    <link rel="preload" href="/Java/assets/inter-roman-latin.2ed14f66.woff2" as="font" type="font/woff2" crossorigin="">
    <link rel="modulepreload" href="/Java/assets/chunks/framework.bf5b583c.js">
    <link rel="modulepreload" href="/Java/assets/chunks/theme.c043a5ce.js">
    <link rel="modulepreload" href="/Java/assets/src_annotations_articles_hibernate.md.60e12332.lean.js">
    <script id="check-dark-light">(()=>{const e=localStorage.getItem("vitepress-theme-appearance")||"",a=window.matchMedia("(prefers-color-scheme: dark)").matches;(!e||e==="auto"?a:e==="dark")&&document.documentElement.classList.add("dark")})();</script>
  </head>
  <body>
    <div id="app"><div class="Layout" data-v-60727218><!--[--><!--]--><!--[--><span tabindex="-1" data-v-fd794dc7></span><a href="#VPContent" class="VPSkipLink visually-hidden" data-v-fd794dc7> Skip to content </a><!--]--><!----><header class="VPNav" data-v-60727218 data-v-b1949460><div class="VPNavBar has-sidebar" data-v-b1949460 data-v-e11e9dc8><div class="container" data-v-e11e9dc8><div class="title" data-v-e11e9dc8><div class="VPNavBarTitle has-sidebar" data-v-e11e9dc8 data-v-24739840><a class="title" href="/Java/" data-v-24739840><!--[--><!--]--><!--[--><img class="VPImage logo" src="https://www.clelia.fr/images/Header.png" alt data-v-74766fef><!--]--><!--[-->Java Annotations<!--]--><!--[--><!--]--></a></div></div><div class="content" data-v-e11e9dc8><div class="curtain" data-v-e11e9dc8></div><div class="content-body" data-v-e11e9dc8><!--[--><!--]--><div class="VPNavBarSearch search" style="--vp-meta-key:&#39;Meta&#39;;" data-v-e11e9dc8><!--[--><!----><div id="local-search"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg class="DocSearch-Search-Icon" width="20" height="20" viewBox="0 0 20 20" aria-label="search icon"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"><kbd class="DocSearch-Button-Key"></kbd><kbd class="DocSearch-Button-Key">K</kbd></span></button></div><!--]--></div><nav aria-labelledby="main-nav-aria-label" class="VPNavBarMenu menu" data-v-e11e9dc8 data-v-c6c3e6d4><span id="main-nav-aria-label" class="visually-hidden" data-v-c6c3e6d4>Main Navigation</span><!--[--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/Java/" tabindex="0" data-v-c6c3e6d4 data-v-f652bfb4><!--[-->Accueil<!--]--></a><!--]--><!--[--><div class="VPFlyout VPNavBarMenuGroup" data-v-c6c3e6d4 data-v-64c29883><button type="button" class="button" aria-haspopup="true" aria-expanded="false" data-v-64c29883><span class="text" data-v-64c29883><!----> Menu <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="text-icon" data-v-64c29883><path d="M12,16c-0.3,0-0.5-0.1-0.7-0.3l-6-6c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l5.3,5.3l5.3-5.3c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-6,6C12.5,15.9,12.3,16,12,16z"></path></svg></span></button><div class="menu" data-v-64c29883><div class="VPMenu" data-v-64c29883 data-v-7bffa9cd><div class="items" data-v-7bffa9cd><!--[--><!--[--><div class="VPMenuLink" data-v-7bffa9cd data-v-be8d031a><a class="VPLink link" href="/Java/src/annotations/articles/introduction.html" data-v-be8d031a><!--[-->Annotations Java<!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-7bffa9cd data-v-be8d031a><a class="VPLink link" href="/Java/src/cookbook/articles/introduction.html" data-v-be8d031a><!--[-->Cookbook<!--]--></a></div><!--]--><!--]--></div><!--[--><!--]--></div></div></div><!--]--><!--]--></nav><!----><div class="VPNavBarAppearance appearance" data-v-e11e9dc8 data-v-88042fc7><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title="toggle dark mode" aria-checked="false" data-v-88042fc7 data-v-92088bc5 data-v-0a2eba70><span class="check" data-v-0a2eba70><span class="icon" data-v-0a2eba70><!--[--><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="sun" data-v-92088bc5><path d="M12,18c-3.3,0-6-2.7-6-6s2.7-6,6-6s6,2.7,6,6S15.3,18,12,18zM12,8c-2.2,0-4,1.8-4,4c0,2.2,1.8,4,4,4c2.2,0,4-1.8,4-4C16,9.8,14.2,8,12,8z"></path><path d="M12,4c-0.6,0-1-0.4-1-1V1c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,3.6,12.6,4,12,4z"></path><path d="M12,24c-0.6,0-1-0.4-1-1v-2c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,23.6,12.6,24,12,24z"></path><path d="M5.6,6.6c-0.3,0-0.5-0.1-0.7-0.3L3.5,4.9c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C6.2,6.5,5.9,6.6,5.6,6.6z"></path><path d="M19.8,20.8c-0.3,0-0.5-0.1-0.7-0.3l-1.4-1.4c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C20.3,20.7,20,20.8,19.8,20.8z"></path><path d="M3,13H1c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S3.6,13,3,13z"></path><path d="M23,13h-2c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S23.6,13,23,13z"></path><path d="M4.2,20.8c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C4.7,20.7,4.5,20.8,4.2,20.8z"></path><path d="M18.4,6.6c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C18.9,6.5,18.6,6.6,18.4,6.6z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="moon" data-v-92088bc5><path d="M12.1,22c-0.3,0-0.6,0-0.9,0c-5.5-0.5-9.5-5.4-9-10.9c0.4-4.8,4.2-8.6,9-9c0.4,0,0.8,0.2,1,0.5c0.2,0.3,0.2,0.8-0.1,1.1c-2,2.7-1.4,6.4,1.3,8.4c2.1,1.6,5,1.6,7.1,0c0.3-0.2,0.7-0.3,1.1-0.1c0.3,0.2,0.5,0.6,0.5,1c-0.2,2.7-1.5,5.1-3.6,6.8C16.6,21.2,14.4,22,12.1,22zM9.3,4.4c-2.9,1-5,3.6-5.2,6.8c-0.4,4.4,2.8,8.3,7.2,8.7c2.1,0.2,4.2-0.4,5.8-1.8c1.1-0.9,1.9-2.1,2.4-3.4c-2.5,0.9-5.3,0.5-7.5-1.1C9.2,11.4,8.1,7.7,9.3,4.4z"></path></svg><!--]--></span></span></button></div><div class="VPSocialLinks VPNavBarSocialLinks social-links" data-v-e11e9dc8 data-v-08b35e6f data-v-f2234a39><!--[--><a class="VPSocialLink no-icon" href="https://github.com/vuejs/vitepress" aria-label="github" target="_blank" rel="noopener" data-v-f2234a39 data-v-efc53bd4><svg role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>GitHub</title><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"/></svg></a><!--]--></div><div class="VPFlyout VPNavBarExtra extra" data-v-e11e9dc8 data-v-47bb42ad data-v-64c29883><button type="button" class="button" aria-haspopup="true" aria-expanded="false" aria-label="extra navigation" data-v-64c29883><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="icon" data-v-64c29883><circle cx="12" cy="12" r="2"></circle><circle cx="19" cy="12" r="2"></circle><circle cx="5" cy="12" r="2"></circle></svg></button><div class="menu" data-v-64c29883><div class="VPMenu" data-v-64c29883 data-v-7bffa9cd><!----><!--[--><!--[--><!----><div class="group" data-v-47bb42ad><div class="item appearance" data-v-47bb42ad><p class="label" data-v-47bb42ad>Appearance</p><div class="appearance-action" data-v-47bb42ad><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title="toggle dark mode" aria-checked="false" data-v-47bb42ad data-v-92088bc5 data-v-0a2eba70><span class="check" data-v-0a2eba70><span class="icon" data-v-0a2eba70><!--[--><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="sun" data-v-92088bc5><path d="M12,18c-3.3,0-6-2.7-6-6s2.7-6,6-6s6,2.7,6,6S15.3,18,12,18zM12,8c-2.2,0-4,1.8-4,4c0,2.2,1.8,4,4,4c2.2,0,4-1.8,4-4C16,9.8,14.2,8,12,8z"></path><path d="M12,4c-0.6,0-1-0.4-1-1V1c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,3.6,12.6,4,12,4z"></path><path d="M12,24c-0.6,0-1-0.4-1-1v-2c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,23.6,12.6,24,12,24z"></path><path d="M5.6,6.6c-0.3,0-0.5-0.1-0.7-0.3L3.5,4.9c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C6.2,6.5,5.9,6.6,5.6,6.6z"></path><path d="M19.8,20.8c-0.3,0-0.5-0.1-0.7-0.3l-1.4-1.4c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C20.3,20.7,20,20.8,19.8,20.8z"></path><path d="M3,13H1c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S3.6,13,3,13z"></path><path d="M23,13h-2c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S23.6,13,23,13z"></path><path d="M4.2,20.8c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C4.7,20.7,4.5,20.8,4.2,20.8z"></path><path d="M18.4,6.6c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C18.9,6.5,18.6,6.6,18.4,6.6z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="moon" data-v-92088bc5><path d="M12.1,22c-0.3,0-0.6,0-0.9,0c-5.5-0.5-9.5-5.4-9-10.9c0.4-4.8,4.2-8.6,9-9c0.4,0,0.8,0.2,1,0.5c0.2,0.3,0.2,0.8-0.1,1.1c-2,2.7-1.4,6.4,1.3,8.4c2.1,1.6,5,1.6,7.1,0c0.3-0.2,0.7-0.3,1.1-0.1c0.3,0.2,0.5,0.6,0.5,1c-0.2,2.7-1.5,5.1-3.6,6.8C16.6,21.2,14.4,22,12.1,22zM9.3,4.4c-2.9,1-5,3.6-5.2,6.8c-0.4,4.4,2.8,8.3,7.2,8.7c2.1,0.2,4.2-0.4,5.8-1.8c1.1-0.9,1.9-2.1,2.4-3.4c-2.5,0.9-5.3,0.5-7.5-1.1C9.2,11.4,8.1,7.7,9.3,4.4z"></path></svg><!--]--></span></span></button></div></div></div><div class="group" data-v-47bb42ad><div class="item social-links" data-v-47bb42ad><div class="VPSocialLinks social-links-list" data-v-47bb42ad data-v-f2234a39><!--[--><a class="VPSocialLink no-icon" href="https://github.com/vuejs/vitepress" aria-label="github" target="_blank" rel="noopener" data-v-f2234a39 data-v-efc53bd4><svg role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>GitHub</title><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"/></svg></a><!--]--></div></div></div><!--]--><!--]--></div></div></div><!--[--><!--]--><button type="button" class="VPNavBarHamburger hamburger" aria-label="mobile navigation" aria-expanded="false" aria-controls="VPNavScreen" data-v-e11e9dc8 data-v-670493dd><span class="container" data-v-670493dd><span class="top" data-v-670493dd></span><span class="middle" data-v-670493dd></span><span class="bottom" data-v-670493dd></span></span></button></div></div></div></div><!----></header><div class="VPLocalNav reached-top" data-v-60727218 data-v-1a7bebab><button class="menu" aria-expanded="false" aria-controls="VPSidebarNav" data-v-1a7bebab><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="menu-icon" data-v-1a7bebab><path d="M17,11H3c-0.6,0-1-0.4-1-1s0.4-1,1-1h14c0.6,0,1,0.4,1,1S17.6,11,17,11z"></path><path d="M21,7H3C2.4,7,2,6.6,2,6s0.4-1,1-1h18c0.6,0,1,0.4,1,1S21.6,7,21,7z"></path><path d="M21,15H3c-0.6,0-1-0.4-1-1s0.4-1,1-1h18c0.6,0,1,0.4,1,1S21.6,15,21,15z"></path><path d="M17,19H3c-0.6,0-1-0.4-1-1s0.4-1,1-1h14c0.6,0,1,0.4,1,1S17.6,19,17,19z"></path></svg><span class="menu-text" data-v-1a7bebab>Menu</span></button><div class="VPLocalNavOutlineDropdown" style="--vp-vh:0px;" data-v-1a7bebab data-v-adc0d96a><button data-v-adc0d96a>Return to top</button><!----></div></div><aside class="VPSidebar" data-v-60727218 data-v-0a85c7be><div class="curtain" data-v-0a85c7be></div><nav class="nav" id="VPSidebarNav" aria-labelledby="sidebar-aria-label" tabindex="-1" data-v-0a85c7be><span class="visually-hidden" id="sidebar-aria-label" data-v-0a85c7be> Sidebar Navigation </span><!--[--><!--]--><!--[--><div class="group" data-v-0a85c7be><section class="VPSidebarItem level-0" data-v-0a85c7be data-v-542ffefa><div class="item" role="button" tabindex="0" data-v-542ffefa><div class="indicator" data-v-542ffefa></div><h2 class="text" data-v-542ffefa>Annotations</h2><!----></div><div class="items" data-v-542ffefa><!--[--><div class="VPSidebarItem level-1 is-link" data-v-542ffefa data-v-542ffefa><div class="item" data-v-542ffefa><div class="indicator" data-v-542ffefa></div><a class="VPLink link link" href="/Java/src/annotations/articles/introduction.html" data-v-542ffefa><!--[--><p class="text" data-v-542ffefa>Introduction</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-542ffefa data-v-542ffefa><div class="item" data-v-542ffefa><div class="indicator" data-v-542ffefa></div><a class="VPLink link link" href="/Java/src/annotations/articles/hibernate.html" data-v-542ffefa><!--[--><p class="text" data-v-542ffefa>Hibernate</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-542ffefa data-v-542ffefa><div class="item" data-v-542ffefa><div class="indicator" data-v-542ffefa></div><a class="VPLink link link" href="/Java/src/annotations/articles/java_lang.html" data-v-542ffefa><!--[--><p class="text" data-v-542ffefa>Java_lang</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-542ffefa data-v-542ffefa><div class="item" data-v-542ffefa><div class="indicator" data-v-542ffefa></div><a class="VPLink link link" href="/Java/src/annotations/articles/spring.html" data-v-542ffefa><!--[--><p class="text" data-v-542ffefa>Spring</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-542ffefa data-v-542ffefa><div class="item" data-v-542ffefa><div class="indicator" data-v-542ffefa></div><a class="VPLink link link" href="/Java/src/annotations/articles/lombok.html" data-v-542ffefa><!--[--><p class="text" data-v-542ffefa>Lombok</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-542ffefa data-v-542ffefa><div class="item" data-v-542ffefa><div class="indicator" data-v-542ffefa></div><a class="VPLink link link" href="/Java/src/annotations/articles/validation.html" data-v-542ffefa><!--[--><p class="text" data-v-542ffefa>Validation</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-542ffefa data-v-542ffefa><div class="item" data-v-542ffefa><div class="indicator" data-v-542ffefa></div><a class="VPLink link link" href="/Java/src/annotations/articles/swagger.html" data-v-542ffefa><!--[--><p class="text" data-v-542ffefa>Swagger</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-542ffefa data-v-542ffefa><div class="item" data-v-542ffefa><div class="indicator" data-v-542ffefa></div><a class="VPLink link link" href="/Java/src/annotations/articles/jackson.html" data-v-542ffefa><!--[--><p class="text" data-v-542ffefa>Jackson</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><!--]--><!--[--><!--]--></nav></aside><div class="VPContent has-sidebar" id="VPContent" data-v-60727218 data-v-fcf4b97b><div class="VPDoc has-sidebar has-aside" data-v-fcf4b97b data-v-281cfc61><!--[--><!--]--><div class="container" data-v-281cfc61><div class="aside" data-v-281cfc61><div class="aside-curtain" data-v-281cfc61></div><div class="aside-container" data-v-281cfc61><div class="aside-content" data-v-281cfc61><div class="VPDocAside" data-v-281cfc61 data-v-79cae1a0><!--[--><!--]--><!--[--><!--]--><div class="VPDocAsideOutline" data-v-79cae1a0 data-v-c3ff47cc><div class="content" data-v-c3ff47cc><div class="outline-marker" data-v-c3ff47cc></div><div class="outline-title" data-v-c3ff47cc>On this page</div><nav aria-labelledby="doc-outline-aria-label" data-v-c3ff47cc><span class="visually-hidden" id="doc-outline-aria-label" data-v-c3ff47cc> Table of Contents for current page </span><ul class="root" data-v-c3ff47cc data-v-9080e260><!--[--><!--]--></ul></nav></div></div><!--[--><!--]--><div class="spacer" data-v-79cae1a0></div><!--[--><!--]--><!----><!--[--><!--]--><!--[--><!--]--></div></div></div></div><div class="content" data-v-281cfc61><div class="content-container" data-v-281cfc61><!--[--><!--]--><!----><main class="main" data-v-281cfc61><div style="position:relative;" class="vp-doc _Java_src_annotations_articles_hibernate" data-v-281cfc61><div><h1 id="jpa-hibernate-orm" tabindex="-1">JPA, Hibernate ORM <a class="header-anchor" href="#jpa-hibernate-orm" aria-label="Permalink to &quot;JPA, Hibernate ORM&quot;">​</a></h1><p>( à utiliser dans les classes métier en important les annotations du package javax.persistence)</p><h2 id="entity" tabindex="-1">@Entity <a class="header-anchor" href="#entity" aria-label="Permalink to &quot;@Entity&quot;">​</a></h2><p>Définit une classe POJO (Plain Old Java Object) persistante</p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki github-dark-dimmed vp-code-dark"><code><span class="line"><span style="color:#ADBAC7;">@</span><span style="color:#F47067;">Entity</span></span>
<span class="line"><span style="color:#F47067;">public</span><span style="color:#ADBAC7;"> </span><span style="color:#F47067;">class</span><span style="color:#ADBAC7;"> </span><span style="color:#F69D50;">Theme</span><span style="color:#ADBAC7;"> {</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ADBAC7;">@</span><span style="color:#F47067;">Id</span></span>
<span class="line"><span style="color:#F47067;">private</span><span style="color:#ADBAC7;"> Long</span><span style="color:#F69D50;"> </span><span style="color:#ADBAC7;">id;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F47067;">private</span><span style="color:#ADBAC7;"> String</span><span style="color:#F69D50;"> </span><span style="color:#ADBAC7;">nom;</span></span>
<span class="line"><span style="color:#ADBAC7;">}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">@</span><span style="color:#D73A49;">Entity</span></span>
<span class="line"><span style="color:#D73A49;">public</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">class</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">Theme</span><span style="color:#24292E;"> {</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">@</span><span style="color:#D73A49;">Id</span></span>
<span class="line"><span style="color:#D73A49;">private</span><span style="color:#24292E;"> Long id;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;">private</span><span style="color:#24292E;"> String nom;</span></span>
<span class="line"><span style="color:#24292E;">}</span></span></code></pre></div><p>Chaque objet de type Theme aura une correspondance avec un enregistrement de la table Theme. En oubliant cette annotation sur une classe métier on obtient une exception <code>IllegalArgumentException</code> :Not a managed type: class fr.clelia.fx.enquetes.business.Theme Les entités JPA ont un cycle de vie présenté sur le diagramme suivant :</p><p><img src="/Java/assets/entite_jpa.56e84d01.png" alt="entite_jpa"><em>Source: Oracle</em></p><h2 id="id" tabindex="-1">@Id <a class="header-anchor" href="#id" aria-label="Permalink to &quot;@Id&quot;">​</a></h2><p>Précise que l&#39;attribut annoté va donner lieu à une colonne qui sera la clé primaire de la table associée</p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki github-dark-dimmed vp-code-dark"><code><span class="line"><span style="color:#ADBAC7;">@</span><span style="color:#F47067;">Id</span></span>
<span class="line"><span style="color:#F47067;">private</span><span style="color:#ADBAC7;"> Long</span><span style="color:#F69D50;"> </span><span style="color:#ADBAC7;">id;</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">@</span><span style="color:#D73A49;">Id</span></span>
<span class="line"><span style="color:#D73A49;">private</span><span style="color:#24292E;"> Long id;</span></span></code></pre></div><h2 id="table" tabindex="-1">@Table <a class="header-anchor" href="#table" aria-label="Permalink to &quot;@Table&quot;">​</a></h2><p>Définit le nom de la table associée à la classe POJO persistante</p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki github-dark-dimmed vp-code-dark"><code><span class="line"><span style="color:#ADBAC7;">@</span><span style="color:#F47067;">Entity</span></span>
<span class="line"><span style="color:#ADBAC7;">@</span><span style="color:#F47067;">Table</span><span style="color:#ADBAC7;">(</span><span style="color:#6CB6FF;">name</span><span style="color:#ADBAC7;"> </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> </span><span style="color:#96D0FF;">&quot;utilisateurs&quot;</span><span style="color:#ADBAC7;">) </span><span style="color:#F47067;">public</span><span style="color:#ADBAC7;"> </span><span style="color:#F47067;">class</span><span style="color:#ADBAC7;"> </span><span style="color:#F69D50;">Utilisateur</span><span style="color:#ADBAC7;"> {}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">@</span><span style="color:#D73A49;">Entity</span></span>
<span class="line"><span style="color:#24292E;">@</span><span style="color:#D73A49;">Table</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">name</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;utilisateurs&quot;</span><span style="color:#24292E;">) </span><span style="color:#D73A49;">public</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">class</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">Utilisateur</span><span style="color:#24292E;"> {}</span></span></code></pre></div><h2 id="index" tabindex="-1">@Index <a class="header-anchor" href="#index" aria-label="Permalink to &quot;@Index&quot;">​</a></h2><p>Ajoute un index sur la ou les colonnes précisées en paramètre. Cette annotation s’utilise en association avec l’annotation <code>@Table</code></p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki github-dark-dimmed vp-code-dark"><code><span class="line"><span style="color:#ADBAC7;">@</span><span style="color:#F47067;">Entity</span></span>
<span class="line"><span style="color:#ADBAC7;">@</span><span style="color:#F47067;">Table</span><span style="color:#ADBAC7;">(</span><span style="color:#6CB6FF;">name</span><span style="color:#ADBAC7;"> </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> </span><span style="color:#96D0FF;">&quot;utilisateurs&quot;</span><span style="color:#ADBAC7;">, </span><span style="color:#6CB6FF;">indexes</span><span style="color:#ADBAC7;"> </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> {@</span><span style="color:#F47067;">Index</span><span style="color:#ADBAC7;">(</span><span style="color:#6CB6FF;">columnList</span><span style="color:#ADBAC7;"> </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> </span><span style="color:#96D0FF;">&quot;nom&quot;</span><span style="color:#ADBAC7;">, </span><span style="color:#6CB6FF;">name</span><span style="color:#ADBAC7;"> </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> </span><span style="color:#96D0FF;">&quot;idx_nom&quot;</span><span style="color:#ADBAC7;">, </span><span style="color:#6CB6FF;">unique</span><span style="color:#ADBAC7;"> </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> </span><span style="color:#6CB6FF;">false</span><span style="color:#ADBAC7;">)})</span></span>
<span class="line"><span style="color:#F47067;">public</span><span style="color:#ADBAC7;"> </span><span style="color:#F47067;">class</span><span style="color:#ADBAC7;"> </span><span style="color:#F69D50;">Utilisateur</span><span style="color:#ADBAC7;"> {}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">@</span><span style="color:#D73A49;">Entity</span></span>
<span class="line"><span style="color:#24292E;">@</span><span style="color:#D73A49;">Table</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">name</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;utilisateurs&quot;</span><span style="color:#24292E;">, </span><span style="color:#005CC5;">indexes</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> {@</span><span style="color:#D73A49;">Index</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">columnList</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;nom&quot;</span><span style="color:#24292E;">, </span><span style="color:#005CC5;">name</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;idx_nom&quot;</span><span style="color:#24292E;">, </span><span style="color:#005CC5;">unique</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">false</span><span style="color:#24292E;">)})</span></span>
<span class="line"><span style="color:#D73A49;">public</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">class</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">Utilisateur</span><span style="color:#24292E;"> {}</span></span></code></pre></div><h2 id="embeddable" tabindex="-1">@Embeddable <a class="header-anchor" href="#embeddable" aria-label="Permalink to &quot;@Embeddable&quot;">​</a></h2><p>Annote une classe qui pourra représenter une clé composite</p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki github-dark-dimmed vp-code-dark"><code><span class="line"><span style="color:#ADBAC7;">@</span><span style="color:#F47067;">Embeddable</span></span>
<span class="line"><span style="color:#F47067;">public</span><span style="color:#ADBAC7;"> </span><span style="color:#F47067;">class</span><span style="color:#ADBAC7;"> </span><span style="color:#F69D50;">Connexion</span><span style="color:#ADBAC7;"> {</span></span>
<span class="line"><span style="color:#ADBAC7;">    </span><span style="color:#F47067;">private</span><span style="color:#ADBAC7;"> String</span><span style="color:#F69D50;"> </span><span style="color:#ADBAC7;">login;</span></span>
<span class="line"><span style="color:#ADBAC7;">    </span><span style="color:#F47067;">private</span><span style="color:#ADBAC7;"> LocalDateTime</span><span style="color:#F69D50;"> </span><span style="color:#ADBAC7;">dateHeureConnexion;</span></span>
<span class="line"><span style="color:#ADBAC7;">    }</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">@</span><span style="color:#D73A49;">Embeddable</span></span>
<span class="line"><span style="color:#D73A49;">public</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">class</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">Connexion</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">private</span><span style="color:#24292E;"> String login;</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">private</span><span style="color:#24292E;"> LocalDateTime dateHeureConnexion;</span></span>
<span class="line"><span style="color:#24292E;">    }</span></span></code></pre></div><h2 id="embeddedid" tabindex="-1">@EmbeddedId <a class="header-anchor" href="#embeddedid" aria-label="Permalink to &quot;@EmbeddedId&quot;">​</a></h2><p>Définit un id dont le type est une classe annotée <code>@Embeddable</code></p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki github-dark-dimmed vp-code-dark"><code><span class="line"><span style="color:#ADBAC7;">@</span><span style="color:#F47067;">Entity</span></span>
<span class="line"><span style="color:#F47067;">public</span><span style="color:#ADBAC7;"> </span><span style="color:#F47067;">class</span><span style="color:#ADBAC7;"> </span><span style="color:#F69D50;">NotificationConnexion</span><span style="color:#ADBAC7;"> {</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ADBAC7;">    @</span><span style="color:#F47067;">EmbeddedId</span></span>
<span class="line"><span style="color:#ADBAC7;">    </span><span style="color:#F47067;">private</span><span style="color:#ADBAC7;"> Connexion</span><span style="color:#F69D50;"> </span><span style="color:#ADBAC7;">connexion;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ADBAC7;">    </span><span style="color:#F47067;">private</span><span style="color:#ADBAC7;"> String</span><span style="color:#F69D50;"> </span><span style="color:#ADBAC7;">message;</span></span>
<span class="line"><span style="color:#ADBAC7;">}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">@</span><span style="color:#D73A49;">Entity</span></span>
<span class="line"><span style="color:#D73A49;">public</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">class</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">NotificationConnexion</span><span style="color:#24292E;"> {</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">    @</span><span style="color:#D73A49;">EmbeddedId</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">private</span><span style="color:#24292E;"> Connexion connexion;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">private</span><span style="color:#24292E;"> String message;</span></span>
<span class="line"><span style="color:#24292E;">}</span></span></code></pre></div><h2 id="generatedvalue" tabindex="-1">@GeneratedValue <a class="header-anchor" href="#generatedvalue" aria-label="Permalink to &quot;@GeneratedValue&quot;">​</a></h2><p>Demande à JPA de choisir une valeur unique pour chaque enregistrement. Il est possible de préciser une stratégie de génération de l’id grâce à un attribut <code>strategy</code>.</p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki github-dark-dimmed vp-code-dark"><code><span class="line"><span style="color:#ADBAC7;">@</span><span style="color:#F47067;">Id</span></span>
<span class="line"><span style="color:#ADBAC7;">@</span><span style="color:#F47067;">GeneratedValue</span><span style="color:#ADBAC7;">(</span><span style="color:#6CB6FF;">strategy</span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;">GenerationType.IDENTITY)</span></span>
<span class="line"><span style="color:#F47067;">private</span><span style="color:#ADBAC7;"> Long</span><span style="color:#F69D50;"> </span><span style="color:#ADBAC7;">id;</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">@</span><span style="color:#D73A49;">Id</span></span>
<span class="line"><span style="color:#24292E;">@</span><span style="color:#D73A49;">GeneratedValue</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">strategy</span><span style="color:#D73A49;">=</span><span style="color:#24292E;">GenerationType.IDENTITY)</span></span>
<span class="line"><span style="color:#D73A49;">private</span><span style="color:#24292E;"> Long id;</span></span></code></pre></div><p><code>strategy=GenerationType.IDENTITY</code> : utilise une identité propre au SGBD (auto_increment de MySQL, séquence d&#39;Oracle) <code>strategy=GenerationType.SEQUENCE</code> : La génération de la clé primaire se base sur une séquence <code>strategy=GenerationType.TABLE</code> : La génération de la clé primaire utilise des valeurs stockées dans une table qui se nomme par défaut hibernate_sequences <code>strategy=GenerationType.AUTO</code> (valeur par défaut) : laisse Hibernate choisir la stratégie de génération d’id la plus adéquate</p><h2 id="sequencegenerator" tabindex="-1">@SequenceGenerator <a class="header-anchor" href="#sequencegenerator" aria-label="Permalink to &quot;@SequenceGenerator&quot;">​</a></h2><p>Déclare la séquence que JPA devra utiliser pour attribuer un id à une nouvelle instance</p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki github-dark-dimmed vp-code-dark"><code><span class="line"><span style="color:#ADBAC7;">@</span><span style="color:#F47067;">Id</span></span>
<span class="line"><span style="color:#ADBAC7;">@</span><span style="color:#F47067;">GeneratedValue</span><span style="color:#ADBAC7;">(</span><span style="color:#6CB6FF;">strategy</span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;">GenerationType.SEQUENCE, </span><span style="color:#6CB6FF;">generator</span><span style="color:#F47067;">=</span><span style="color:#96D0FF;">&quot;utilisateur_sequence&quot;</span><span style="color:#ADBAC7;">)</span></span>
<span class="line"><span style="color:#ADBAC7;">@</span><span style="color:#F47067;">SequenceGenerator</span><span style="color:#ADBAC7;">(</span><span style="color:#6CB6FF;">name</span><span style="color:#F47067;">=</span><span style="color:#96D0FF;">&quot;utilisateur_sequence&quot;</span><span style="color:#ADBAC7;">) </span><span style="color:#F47067;">private</span><span style="color:#ADBAC7;"> Long</span><span style="color:#F69D50;"> </span><span style="color:#ADBAC7;">id;</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">@</span><span style="color:#D73A49;">Id</span></span>
<span class="line"><span style="color:#24292E;">@</span><span style="color:#D73A49;">GeneratedValue</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">strategy</span><span style="color:#D73A49;">=</span><span style="color:#24292E;">GenerationType.SEQUENCE, </span><span style="color:#005CC5;">generator</span><span style="color:#D73A49;">=</span><span style="color:#032F62;">&quot;utilisateur_sequence&quot;</span><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#24292E;">@</span><span style="color:#D73A49;">SequenceGenerator</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">name</span><span style="color:#D73A49;">=</span><span style="color:#032F62;">&quot;utilisateur_sequence&quot;</span><span style="color:#24292E;">) </span><span style="color:#D73A49;">private</span><span style="color:#24292E;"> Long id;</span></span></code></pre></div><h2 id="tablegenerator" tabindex="-1">@TableGenerator <a class="header-anchor" href="#tablegenerator" aria-label="Permalink to &quot;@TableGenerator&quot;">​</a></h2><p>Déclare la table que JPA devra utiliser pour attribuer un id à une nouvelle instance</p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki github-dark-dimmed vp-code-dark"><code><span class="line"><span style="color:#ADBAC7;">@</span><span style="color:#F47067;">Id</span></span>
<span class="line"><span style="color:#ADBAC7;">@</span><span style="color:#F47067;">GeneratedValue</span><span style="color:#ADBAC7;">(</span><span style="color:#6CB6FF;">strategy</span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;">GenerationType.TABLE, </span><span style="color:#6CB6FF;">generator</span><span style="color:#F47067;">=</span><span style="color:#96D0FF;">&quot;utilisateur_id_broker&quot;</span><span style="color:#ADBAC7;">)</span></span>
<span class="line"><span style="color:#ADBAC7;">@</span><span style="color:#F47067;">TableGenerator</span><span style="color:#ADBAC7;">(</span><span style="color:#6CB6FF;">name</span><span style="color:#F47067;">=</span><span style="color:#96D0FF;">&quot;utilisateur_id_broker&quot;</span><span style="color:#ADBAC7;">, </span><span style="color:#6CB6FF;">valueColumnName</span><span style="color:#F47067;">=</span><span style="color:#96D0FF;">&quot;next_id&quot;</span><span style="color:#ADBAC7;">) </span><span style="color:#F47067;">private</span><span style="color:#ADBAC7;"> Long</span><span style="color:#F69D50;"> </span><span style="color:#ADBAC7;">id;</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">@</span><span style="color:#D73A49;">Id</span></span>
<span class="line"><span style="color:#24292E;">@</span><span style="color:#D73A49;">GeneratedValue</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">strategy</span><span style="color:#D73A49;">=</span><span style="color:#24292E;">GenerationType.TABLE, </span><span style="color:#005CC5;">generator</span><span style="color:#D73A49;">=</span><span style="color:#032F62;">&quot;utilisateur_id_broker&quot;</span><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#24292E;">@</span><span style="color:#D73A49;">TableGenerator</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">name</span><span style="color:#D73A49;">=</span><span style="color:#032F62;">&quot;utilisateur_id_broker&quot;</span><span style="color:#24292E;">, </span><span style="color:#005CC5;">valueColumnName</span><span style="color:#D73A49;">=</span><span style="color:#032F62;">&quot;next_id&quot;</span><span style="color:#24292E;">) </span><span style="color:#D73A49;">private</span><span style="color:#24292E;"> Long id;</span></span></code></pre></div><h2 id="genericgenerator" tabindex="-1">@GenericGenerator <a class="header-anchor" href="#genericgenerator" aria-label="Permalink to &quot;@GenericGenerator&quot;">​</a></h2><p>Sollicite une classe qui implémente l’interface IdentifierGenerator pour choisir un id unique :</p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki github-dark-dimmed vp-code-dark"><code><span class="line"><span style="color:#ADBAC7;">@</span><span style="color:#F47067;">Id</span></span>
<span class="line"><span style="color:#ADBAC7;">    @</span><span style="color:#F47067;">GeneratedValue</span><span style="color:#ADBAC7;">(</span><span style="color:#6CB6FF;">generator</span><span style="color:#F47067;">=</span><span style="color:#96D0FF;">&quot;enquete_id_generator&quot;</span><span style="color:#ADBAC7;">)</span></span>
<span class="line"><span style="color:#ADBAC7;">    @</span><span style="color:#F47067;">GenericGenerator</span><span style="color:#ADBAC7;">(</span><span style="color:#6CB6FF;">name</span><span style="color:#F47067;">=</span><span style="color:#96D0FF;">&quot;enquete_id_generator&quot;</span><span style="color:#ADBAC7;">,</span></span>
<span class="line"><span style="color:#ADBAC7;">    </span><span style="color:#6CB6FF;">strategy</span><span style="color:#F47067;">=</span><span style="color:#96D0FF;">&quot;fr.clelia.fx.enquetes.util.EnqueteIdGenerator&quot;</span><span style="color:#ADBAC7;">)</span></span>
<span class="line"><span style="color:#ADBAC7;">    </span><span style="color:#F47067;">private</span><span style="color:#ADBAC7;"> Long</span><span style="color:#F69D50;"> </span><span style="color:#ADBAC7;">id;</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">@</span><span style="color:#D73A49;">Id</span></span>
<span class="line"><span style="color:#24292E;">    @</span><span style="color:#D73A49;">GeneratedValue</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">generator</span><span style="color:#D73A49;">=</span><span style="color:#032F62;">&quot;enquete_id_generator&quot;</span><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#24292E;">    @</span><span style="color:#D73A49;">GenericGenerator</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">name</span><span style="color:#D73A49;">=</span><span style="color:#032F62;">&quot;enquete_id_generator&quot;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#005CC5;">strategy</span><span style="color:#D73A49;">=</span><span style="color:#032F62;">&quot;fr.clelia.fx.enquetes.util.EnqueteIdGenerator&quot;</span><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">private</span><span style="color:#24292E;"> Long id;</span></span></code></pre></div><p><img src="/Java/assets/generic_generator.ca391a85.png" alt="generic_generator"></p><h2 id="column" tabindex="-1">@Column <a class="header-anchor" href="#column" aria-label="Permalink to &quot;@Column&quot;">​</a></h2><p>Détaille la manière de créer la colonne en base Les principaux attributs de l&#39;annotation <code>@Column</code> sont :</p><ul><li><code>name</code> : nom de la colonne dans la table associée</li><li><code>nullable</code> : permet d&#39;autoriser ou d&#39;interdire null dans la colonne, pour autoriser null : <code>nullable=true - unique</code> : ajoute une contrainte d&#39;unicité sur la colonne</li><li><code>length</code> : précise la longueur de la colonne (pour les attributs de type String), par défaut : <code>255</code></li><li><code>updatable</code> : permet d’autoriser ou d’interdire la mise à jour de la colonne</li></ul><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki github-dark-dimmed vp-code-dark"><code><span class="line"><span style="color:#ADBAC7;">@</span><span style="color:#F47067;">Column</span><span style="color:#ADBAC7;">(</span><span style="color:#6CB6FF;">unique</span><span style="color:#F47067;">=</span><span style="color:#6CB6FF;">true</span><span style="color:#ADBAC7;">, </span><span style="color:#6CB6FF;">nullable</span><span style="color:#F47067;">=</span><span style="color:#6CB6FF;">false</span><span style="color:#ADBAC7;">, </span><span style="color:#6CB6FF;">length</span><span style="color:#F47067;">=</span><span style="color:#6CB6FF;">150</span><span style="color:#ADBAC7;">)</span></span>
<span class="line"><span style="color:#ADBAC7;">    </span><span style="color:#F47067;">private</span><span style="color:#ADBAC7;"> String</span><span style="color:#F69D50;"> </span><span style="color:#ADBAC7;">nom;</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">@</span><span style="color:#D73A49;">Column</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">unique</span><span style="color:#D73A49;">=</span><span style="color:#005CC5;">true</span><span style="color:#24292E;">, </span><span style="color:#005CC5;">nullable</span><span style="color:#D73A49;">=</span><span style="color:#005CC5;">false</span><span style="color:#24292E;">, </span><span style="color:#005CC5;">length</span><span style="color:#D73A49;">=</span><span style="color:#005CC5;">150</span><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">private</span><span style="color:#24292E;"> String nom;</span></span></code></pre></div><h2 id="basic" tabindex="-1">@Basic <a class="header-anchor" href="#basic" aria-label="Permalink to &quot;@Basic&quot;">​</a></h2><p>Déclare de la manière la plus simple une correspondance entre un attribut Java et une colonne éponyme dans la table associée. Cette annotation est rarement utilisée aujourd’hui. C’est la pièce de musée de ce mémento.</p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki github-dark-dimmed vp-code-dark"><code><span class="line"><span style="color:#ADBAC7;">@</span><span style="color:#F47067;">Basic</span></span>
<span class="line"><span style="color:#F47067;">private</span><span style="color:#ADBAC7;"> String</span><span style="color:#F69D50;"> </span><span style="color:#ADBAC7;">libelle;</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">@</span><span style="color:#D73A49;">Basic</span></span>
<span class="line"><span style="color:#D73A49;">private</span><span style="color:#24292E;"> String libelle;</span></span></code></pre></div><h2 id="lob" tabindex="-1">@Lob <a class="header-anchor" href="#lob" aria-label="Permalink to &quot;@Lob&quot;">​</a></h2><p>Indique que la colonne doit contenir un texte long (permet aussi de stocker des données binaires)</p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki github-dark-dimmed vp-code-dark"><code><span class="line"><span style="color:#ADBAC7;">@</span><span style="color:#F47067;">Lob</span></span>
<span class="line"><span style="color:#F47067;">private</span><span style="color:#ADBAC7;"> String</span><span style="color:#F69D50;"> </span><span style="color:#ADBAC7;">scriptDAccroche;</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">@</span><span style="color:#D73A49;">Lob</span></span>
<span class="line"><span style="color:#D73A49;">private</span><span style="color:#24292E;"> String scriptDAccroche;</span></span></code></pre></div><h2 id="temporal" tabindex="-1">@Temporal <a class="header-anchor" href="#temporal" aria-label="Permalink to &quot;@Temporal&quot;">​</a></h2><p><code>@Temporal(TemporalType.DATE)</code> : crée dans la table une colonne de type date <code>@Temporal(TemporalType.TIME)</code> : crée dans la table une colonne de type time <code>@Temporal(TemporalType.TIMESTAMP)</code> : crée dans la table une colonne de type datetime Important :</p><ul><li>il est conseillé d’utiliser les classes LocalDate, LocalTime et LocalDateTime. En utilisant ces classes l’annotation Temporal n’a pas d’utilité</li><li>il ne faut pas utiliser la classe java.sql.Date dans les classes métier Sans préciser <code>@Temporal</code>, Hibernate ajoute une colonne datetime pour un attribut de type <code>java.util.Date</code></li></ul><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki github-dark-dimmed vp-code-dark"><code><span class="line"><span style="color:#ADBAC7;">@</span><span style="color:#F47067;">Temporal</span><span style="color:#ADBAC7;">(TemporalType.DATE)</span></span>
<span class="line"><span style="color:#F47067;">private</span><span style="color:#ADBAC7;"> Date</span><span style="color:#F69D50;"> </span><span style="color:#ADBAC7;">dateDInscription;</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">@</span><span style="color:#D73A49;">Temporal</span><span style="color:#24292E;">(TemporalType.DATE)</span></span>
<span class="line"><span style="color:#D73A49;">private</span><span style="color:#24292E;"> Date dateDInscription;</span></span></code></pre></div><h2 id="onetoone" tabindex="-1">@OneToOne <a class="header-anchor" href="#onetoone" aria-label="Permalink to &quot;@OneToOne&quot;">​</a></h2><p>Indique une bijection avec l&#39;autre classe. Entre les deux classes il y a deux associations dirigées (allant dans des directions oposées) avec une multiplicité 0..1 pour chaque association. Exemple : un utilisateur a un seul avatar. Un avatar correspond à un seul utilisateur</p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki github-dark-dimmed vp-code-dark"><code><span class="line"><span style="color:#ADBAC7;">@</span><span style="color:#F47067;">Entity</span></span>
<span class="line"><span style="color:#F47067;">public</span><span style="color:#ADBAC7;"> </span><span style="color:#F47067;">class</span><span style="color:#ADBAC7;"> </span><span style="color:#F69D50;">Utilisateur</span><span style="color:#ADBAC7;"> {</span></span>
<span class="line"><span style="color:#ADBAC7;">@</span><span style="color:#F47067;">Id</span></span>
<span class="line"><span style="color:#ADBAC7;">@</span><span style="color:#F47067;">GeneratedValue</span></span>
<span class="line"><span style="color:#F47067;">private</span><span style="color:#ADBAC7;"> Long</span><span style="color:#F69D50;"> </span><span style="color:#ADBAC7;">id;</span></span>
<span class="line"><span style="color:#768390;">// Autres attributs</span></span>
<span class="line"><span style="color:#ADBAC7;">@</span><span style="color:#F47067;">OneToOne</span></span>
<span class="line"><span style="color:#F47067;">private</span><span style="color:#ADBAC7;"> Avatar</span><span style="color:#F69D50;"> </span><span style="color:#ADBAC7;">avatar; }</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">@</span><span style="color:#D73A49;">Entity</span></span>
<span class="line"><span style="color:#D73A49;">public</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">class</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">Utilisateur</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">@</span><span style="color:#D73A49;">Id</span></span>
<span class="line"><span style="color:#24292E;">@</span><span style="color:#D73A49;">GeneratedValue</span></span>
<span class="line"><span style="color:#D73A49;">private</span><span style="color:#24292E;"> Long id;</span></span>
<span class="line"><span style="color:#6A737D;">// Autres attributs</span></span>
<span class="line"><span style="color:#24292E;">@</span><span style="color:#D73A49;">OneToOne</span></span>
<span class="line"><span style="color:#D73A49;">private</span><span style="color:#24292E;"> Avatar avatar; }</span></span></code></pre></div><h2 id="manytoone" tabindex="-1">@ManyToOne <a class="header-anchor" href="#manytoone" aria-label="Permalink to &quot;@ManyToOne&quot;">​</a></h2><p>Indique que plusieurs objets de la classe vont être associés à un seul et même objet de l&#39;autre classe</p><p>Dans notre exemple plusieurs enquêtes font référence à un même thème.</p><p><img src="/Java/assets/manytoone.bfe85c4e.png" alt="many_to_one"></p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki github-dark-dimmed vp-code-dark"><code><span class="line"><span style="color:#ADBAC7;">@</span><span style="color:#F47067;">Entity</span></span>
<span class="line"><span style="color:#F47067;">public</span><span style="color:#ADBAC7;"> </span><span style="color:#F47067;">abstract</span><span style="color:#ADBAC7;"> </span><span style="color:#F47067;">class</span><span style="color:#ADBAC7;"> </span><span style="color:#F69D50;">Enquete</span><span style="color:#ADBAC7;"> {</span></span>
<span class="line"><span style="color:#ADBAC7;">@</span><span style="color:#F47067;">Id</span></span>
<span class="line"><span style="color:#ADBAC7;">@</span><span style="color:#F47067;">GeneratedValue</span><span style="color:#ADBAC7;">(</span><span style="color:#6CB6FF;">strategy</span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;">GenerationType.IDENTITY)</span></span>
<span class="line"><span style="color:#F47067;">private</span><span style="color:#ADBAC7;"> Long</span><span style="color:#F69D50;"> </span><span style="color:#ADBAC7;">id;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ADBAC7;">@</span><span style="color:#F47067;">Column</span><span style="color:#ADBAC7;">(</span><span style="color:#6CB6FF;">unique</span><span style="color:#F47067;">=</span><span style="color:#6CB6FF;">true</span><span style="color:#ADBAC7;">, </span><span style="color:#6CB6FF;">nullable</span><span style="color:#F47067;">=</span><span style="color:#6CB6FF;">false</span><span style="color:#ADBAC7;">, </span><span style="color:#6CB6FF;">length</span><span style="color:#F47067;">=</span><span style="color:#6CB6FF;">150</span><span style="color:#ADBAC7;">)</span></span>
<span class="line"><span style="color:#F47067;">private</span><span style="color:#ADBAC7;"> String</span><span style="color:#F69D50;"> </span><span style="color:#ADBAC7;">nom;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F47067;">private</span><span style="color:#ADBAC7;"> Date</span><span style="color:#F69D50;"> </span><span style="color:#ADBAC7;">dateDeLancement;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F47067;">private</span><span style="color:#ADBAC7;"> </span><span style="color:#F47067;">float</span><span style="color:#F69D50;"> </span><span style="color:#ADBAC7;">prix;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ADBAC7;">@</span><span style="color:#F47067;">ManyToOne</span></span>
<span class="line"><span style="color:#F47067;">private</span><span style="color:#ADBAC7;"> Theme</span><span style="color:#F69D50;"> </span><span style="color:#ADBAC7;">theme; }</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">@</span><span style="color:#D73A49;">Entity</span></span>
<span class="line"><span style="color:#D73A49;">public</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">abstract</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">class</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">Enquete</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">@</span><span style="color:#D73A49;">Id</span></span>
<span class="line"><span style="color:#24292E;">@</span><span style="color:#D73A49;">GeneratedValue</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">strategy</span><span style="color:#D73A49;">=</span><span style="color:#24292E;">GenerationType.IDENTITY)</span></span>
<span class="line"><span style="color:#D73A49;">private</span><span style="color:#24292E;"> Long id;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">@</span><span style="color:#D73A49;">Column</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">unique</span><span style="color:#D73A49;">=</span><span style="color:#005CC5;">true</span><span style="color:#24292E;">, </span><span style="color:#005CC5;">nullable</span><span style="color:#D73A49;">=</span><span style="color:#005CC5;">false</span><span style="color:#24292E;">, </span><span style="color:#005CC5;">length</span><span style="color:#D73A49;">=</span><span style="color:#005CC5;">150</span><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#D73A49;">private</span><span style="color:#24292E;"> String nom;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;">private</span><span style="color:#24292E;"> Date dateDeLancement;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;">private</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">float</span><span style="color:#24292E;"> prix;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">@</span><span style="color:#D73A49;">ManyToOne</span></span>
<span class="line"><span style="color:#D73A49;">private</span><span style="color:#24292E;"> Theme theme; }</span></span></code></pre></div><p>En base, dans la table Enquete, une colonne theme_id sera ajoutée, c’est une clé étrangère vers la table Theme. En oubliant l’annotation <code>@ManyToOne</code> sur un attribut métier, on obtient l’erreur suivante : Caused by: org.hibernate.MappingException: Could not determine type for: fr.clelia.fx.enquetes.business.Theme, at table: Enquete, for columns: [org.hibernate.mapping.Column(theme)]</p><h2 id="onetomany" tabindex="-1">@OneToMany <a class="header-anchor" href="#onetomany" aria-label="Permalink to &quot;@OneToMany&quot;">​</a></h2><p>Indique qu&#39;un objet de la classe va être associé à plusieurs objets de l&#39;autre classe. Pour l’attribut <code>mappedBy</code>, on précise le nom de l’objet dans l’autre classe. Dans l’exemple de la page précédente: à un thème correspond une liste d’enquêtes. Une enquête est associée à un thème, il y a donc un attribut nommé theme dans la classe Enquete. C’est le nom de cet attribut Java que l’on écrit dans l’attribut <code>mappedBy</code> de l’annotation <code>OneToMany</code>:</p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki github-dark-dimmed vp-code-dark"><code><span class="line"><span style="color:#ADBAC7;">@</span><span style="color:#F47067;">Entity</span></span>
<span class="line"><span style="color:#ADBAC7;">    </span><span style="color:#F47067;">public</span><span style="color:#ADBAC7;"> </span><span style="color:#F47067;">class</span><span style="color:#ADBAC7;"> </span><span style="color:#F69D50;">Theme</span><span style="color:#ADBAC7;"> {</span></span>
<span class="line"><span style="color:#ADBAC7;">    @</span><span style="color:#F47067;">Id</span></span>
<span class="line"><span style="color:#ADBAC7;">    @</span><span style="color:#F47067;">GeneratedValue</span><span style="color:#ADBAC7;"> </span><span style="color:#F47067;">private</span></span>
<span class="line"><span style="color:#ADBAC7;">    Long</span><span style="color:#F69D50;"> </span><span style="color:#ADBAC7;">id;</span></span>
<span class="line"><span style="color:#ADBAC7;">    </span><span style="color:#768390;">// Autres attributs</span></span>
<span class="line"><span style="color:#ADBAC7;">    @</span><span style="color:#F47067;">OneToMany</span><span style="color:#ADBAC7;">(</span><span style="color:#6CB6FF;">mappedBy</span><span style="color:#F47067;">=</span><span style="color:#96D0FF;">&quot;theme&quot;</span><span style="color:#ADBAC7;">)</span></span>
<span class="line"><span style="color:#ADBAC7;">    </span><span style="color:#F47067;">private</span><span style="color:#ADBAC7;"> List</span><span style="color:#F69D50;">&lt;</span><span style="color:#F47067;">Enquete</span><span style="color:#F69D50;">&gt; </span><span style="color:#ADBAC7;">enquetes;</span></span>
<span class="line"><span style="color:#ADBAC7;">    }</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">@</span><span style="color:#D73A49;">Entity</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">public</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">class</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">Theme</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">    @</span><span style="color:#D73A49;">Id</span></span>
<span class="line"><span style="color:#24292E;">    @</span><span style="color:#D73A49;">GeneratedValue</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">private</span></span>
<span class="line"><span style="color:#24292E;">    Long id;</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6A737D;">// Autres attributs</span></span>
<span class="line"><span style="color:#24292E;">    @</span><span style="color:#D73A49;">OneToMany</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">mappedBy</span><span style="color:#D73A49;">=</span><span style="color:#032F62;">&quot;theme&quot;</span><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">private</span><span style="color:#24292E;"> List&lt;</span><span style="color:#D73A49;">Enquete</span><span style="color:#24292E;">&gt; enquetes;</span></span>
<span class="line"><span style="color:#24292E;">    }</span></span></code></pre></div><p>En règle générale, dès qu’une classe comporte une liste d’objets métier, elle sera annotée <code>@OneToMany</code>. Idem pour un objet de type <code>Set</code>. Bien penser à préciser le type de récupération en utilisant l’attribut <code>fetch</code>, par défaut le fetch est <code>FetchType.LAZY.</code></p><p><strong>Exemple</strong>: si l’on souhaite récupérer d’emblée toutes les enquêtes d’un thème, on choisira le type de fetch <code>EAGER</code>:</p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki github-dark-dimmed vp-code-dark"><code><span class="line"><span style="color:#ADBAC7;">@</span><span style="color:#F47067;">OneToMany</span><span style="color:#ADBAC7;">(</span><span style="color:#6CB6FF;">mappedBy</span><span style="color:#F47067;">=</span><span style="color:#96D0FF;">&quot;theme&quot;</span><span style="color:#ADBAC7;">, </span><span style="color:#6CB6FF;">fetch</span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;">FetchType.EAGER)</span></span>
<span class="line"><span style="color:#ADBAC7;">    </span><span style="color:#F47067;">private</span><span style="color:#ADBAC7;"> List</span><span style="color:#F69D50;">&lt;</span><span style="color:#F47067;">Enquete</span><span style="color:#F69D50;">&gt; </span><span style="color:#ADBAC7;">enquetes;</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">@</span><span style="color:#D73A49;">OneToMany</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">mappedBy</span><span style="color:#D73A49;">=</span><span style="color:#032F62;">&quot;theme&quot;</span><span style="color:#24292E;">, </span><span style="color:#005CC5;">fetch</span><span style="color:#D73A49;">=</span><span style="color:#24292E;">FetchType.EAGER)</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">private</span><span style="color:#24292E;"> List&lt;</span><span style="color:#D73A49;">Enquete</span><span style="color:#24292E;">&gt; enquetes;</span></span></code></pre></div><p>En essayant de récupérer les enquêtes sans avoir au préalable utilisé le fetch type <code>EAGER</code> on obtient l’exception suivante: Caused by: org.hibernate.LazyInitializationException: failed to lazily initialize a collection of role: fr.clelia.fx.enquetes.business.Theme.enquetes, could not initialize proxy - no Session</p><div class="info custom-block"><p class="custom-block-title">INFO</p><p>A noter: on ne peut pas avoir plus d’un <code>FetchType à EAGER</code> par classe. En utilisant deux fois le <code>FecthType EAGER</code> dans une même classe on obtient l’exception suivante: Caused by: org.hibernate.loader.MultipleBagFetchException: cannot simultaneously fetch multiple bags</p></div><p>Notion de cascade :</p><ul><li><p>On ajoute en mémoire un objet de type Enquete et on lui associe un ensemble de questions :</p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki github-dark-dimmed vp-code-dark"><code><span class="line"><span style="color:#ADBAC7;">Enquete</span><span style="color:#F69D50;"> </span><span style="color:#ADBAC7;">enquete1</span><span style="color:#F69D50;"> </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> </span><span style="color:#F47067;">new</span><span style="color:#ADBAC7;"> </span><span style="color:#DCBDFB;">Enquete</span><span style="color:#ADBAC7;">(“Enquete </span><span style="color:#6CB6FF;">1</span><span style="color:#ADBAC7;">”, theme1);</span></span>
<span class="line"><span style="color:#ADBAC7;">enquete1.</span><span style="color:#DCBDFB;">getQuestions</span><span style="color:#ADBAC7;">().</span><span style="color:#DCBDFB;">add</span><span style="color:#ADBAC7;">(</span><span style="color:#F47067;">new</span><span style="color:#ADBAC7;"> </span><span style="color:#DCBDFB;">Question</span><span style="color:#ADBAC7;">(“Question </span><span style="color:#6CB6FF;">1</span><span style="color:#ADBAC7;">”, enquete1));</span></span>
<span class="line"><span style="color:#ADBAC7;">enquete1.</span><span style="color:#DCBDFB;">getQuestions</span><span style="color:#ADBAC7;">().</span><span style="color:#DCBDFB;">add</span><span style="color:#ADBAC7;">(</span><span style="color:#F47067;">new</span><span style="color:#ADBAC7;"> </span><span style="color:#DCBDFB;">Question</span><span style="color:#ADBAC7;">(“Question </span><span style="color:#6CB6FF;">2</span><span style="color:#ADBAC7;">”, enquete1));</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">Enquete enquete1 </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">new</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">Enquete</span><span style="color:#24292E;">(“Enquete </span><span style="color:#005CC5;">1</span><span style="color:#24292E;">”, theme1);</span></span>
<span class="line"><span style="color:#24292E;">enquete1.</span><span style="color:#6F42C1;">getQuestions</span><span style="color:#24292E;">().</span><span style="color:#6F42C1;">add</span><span style="color:#24292E;">(</span><span style="color:#D73A49;">new</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">Question</span><span style="color:#24292E;">(“Question </span><span style="color:#005CC5;">1</span><span style="color:#24292E;">”, enquete1));</span></span>
<span class="line"><span style="color:#24292E;">enquete1.</span><span style="color:#6F42C1;">getQuestions</span><span style="color:#24292E;">().</span><span style="color:#6F42C1;">add</span><span style="color:#24292E;">(</span><span style="color:#D73A49;">new</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">Question</span><span style="color:#24292E;">(“Question </span><span style="color:#005CC5;">2</span><span style="color:#24292E;">”, enquete1));</span></span></code></pre></div><p>Pour qu’Hibernate enregistre l’enquete en base ainsi que toutes ses questions, il faut définir la liste de questions comme suit :</p></li></ul><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki github-dark-dimmed vp-code-dark"><code><span class="line"><span style="color:#ADBAC7;">@</span><span style="color:#F47067;">OneToMany</span><span style="color:#ADBAC7;">(</span><span style="color:#6CB6FF;">mappedBy</span><span style="color:#F47067;">=</span><span style="color:#96D0FF;">&quot;enquete&quot;</span><span style="color:#ADBAC7;">, </span><span style="color:#6CB6FF;">cascade</span><span style="color:#ADBAC7;"> </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> CascadeType.PERSIST)</span></span>
<span class="line"><span style="color:#ADBAC7;">    </span><span style="color:#F47067;">private</span><span style="color:#ADBAC7;"> List</span><span style="color:#F69D50;">&lt;</span><span style="color:#F47067;">Question</span><span style="color:#F69D50;">&gt; </span><span style="color:#ADBAC7;">questions;</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">@</span><span style="color:#D73A49;">OneToMany</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">mappedBy</span><span style="color:#D73A49;">=</span><span style="color:#032F62;">&quot;enquete&quot;</span><span style="color:#24292E;">, </span><span style="color:#005CC5;">cascade</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> CascadeType.PERSIST)</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">private</span><span style="color:#24292E;"> List&lt;</span><span style="color:#D73A49;">Question</span><span style="color:#24292E;">&gt; questions;</span></span></code></pre></div><ul><li>Pour que les objets questions soit mis à jour en base (lorsqu’ils évoluent en mémoire), il faut utiliser la valeur <code>CascadeType.MERGE</code></li></ul><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki github-dark-dimmed vp-code-dark"><code><span class="line"><span style="color:#ADBAC7;">@</span><span style="color:#F47067;">OneToMany</span><span style="color:#ADBAC7;">(</span><span style="color:#6CB6FF;">mappedBy</span><span style="color:#F47067;">=</span><span style="color:#96D0FF;">&quot;enquete&quot;</span><span style="color:#ADBAC7;">, </span><span style="color:#6CB6FF;">cascade</span><span style="color:#ADBAC7;"> </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> CascadeType.MERGE)</span></span>
<span class="line"><span style="color:#ADBAC7;">    </span><span style="color:#F47067;">private</span><span style="color:#ADBAC7;"> List</span><span style="color:#F69D50;">&lt;</span><span style="color:#F47067;">Question</span><span style="color:#F69D50;">&gt; </span><span style="color:#ADBAC7;">questions;</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">@</span><span style="color:#D73A49;">OneToMany</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">mappedBy</span><span style="color:#D73A49;">=</span><span style="color:#032F62;">&quot;enquete&quot;</span><span style="color:#24292E;">, </span><span style="color:#005CC5;">cascade</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> CascadeType.MERGE)</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">private</span><span style="color:#24292E;"> List&lt;</span><span style="color:#D73A49;">Question</span><span style="color:#24292E;">&gt; questions;</span></span></code></pre></div><ul><li>Pour effacer automatiquement tous les questions associées à une enquête qui doit être effacée, l’attribut cascade avec la valeur <code>CascadeType.REMOVE</code> doit être précisé:</li></ul><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki github-dark-dimmed vp-code-dark"><code><span class="line"><span style="color:#ADBAC7;">@</span><span style="color:#F47067;">OneToMany</span><span style="color:#ADBAC7;">(</span><span style="color:#6CB6FF;">mappedBy</span><span style="color:#F47067;">=</span><span style="color:#96D0FF;">&quot;enquete&quot;</span><span style="color:#ADBAC7;">, </span><span style="color:#6CB6FF;">cascade</span><span style="color:#ADBAC7;"> </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> CascadeType.REMOVE)</span></span>
<span class="line"><span style="color:#F47067;">private</span><span style="color:#ADBAC7;"> List</span><span style="color:#F69D50;">&lt;</span><span style="color:#F47067;">Question</span><span style="color:#F69D50;">&gt; </span><span style="color:#ADBAC7;">enquetes;</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">@</span><span style="color:#D73A49;">OneToMany</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">mappedBy</span><span style="color:#D73A49;">=</span><span style="color:#032F62;">&quot;enquete&quot;</span><span style="color:#24292E;">, </span><span style="color:#005CC5;">cascade</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> CascadeType.REMOVE)</span></span>
<span class="line"><span style="color:#D73A49;">private</span><span style="color:#24292E;"> List&lt;</span><span style="color:#D73A49;">Question</span><span style="color:#24292E;">&gt; enquetes;</span></span></code></pre></div><ul><li>Pour effacer automatiquement tous les questions associées à une enquête qui doit être effacée et les détacher de l’entity manager, l’attribut cascade avec la valeur <code>CascadeType.DETACH</code> doit être précisé:</li></ul><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki github-dark-dimmed vp-code-dark"><code><span class="line"><span style="color:#ADBAC7;">@</span><span style="color:#F47067;">OneToMany</span><span style="color:#ADBAC7;">(</span><span style="color:#6CB6FF;">mappedBy</span><span style="color:#F47067;">=</span><span style="color:#96D0FF;">&quot;enquete&quot;</span><span style="color:#ADBAC7;">, </span><span style="color:#6CB6FF;">cascade</span><span style="color:#ADBAC7;"> </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> CascadeType.DETACH)</span></span>
<span class="line"><span style="color:#F47067;">private</span><span style="color:#ADBAC7;"> List</span><span style="color:#F69D50;">&lt;</span><span style="color:#F47067;">Question</span><span style="color:#F69D50;">&gt; </span><span style="color:#ADBAC7;">enquetes;</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">@</span><span style="color:#D73A49;">OneToMany</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">mappedBy</span><span style="color:#D73A49;">=</span><span style="color:#032F62;">&quot;enquete&quot;</span><span style="color:#24292E;">, </span><span style="color:#005CC5;">cascade</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> CascadeType.DETACH)</span></span>
<span class="line"><span style="color:#D73A49;">private</span><span style="color:#24292E;"> List&lt;</span><span style="color:#D73A49;">Question</span><span style="color:#24292E;">&gt; enquetes;</span></span></code></pre></div><ul><li>Pour garantir toutes les opérations présentées ci-dessus, l’attribut cascade doit avoir la valeur <code>CascadeType.ALL</code></li></ul><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki github-dark-dimmed vp-code-dark"><code><span class="line"><span style="color:#ADBAC7;">@</span><span style="color:#F47067;">OneToMany</span><span style="color:#ADBAC7;">(</span><span style="color:#6CB6FF;">mappedBy</span><span style="color:#F47067;">=</span><span style="color:#96D0FF;">&quot;enquete&quot;</span><span style="color:#ADBAC7;">, </span><span style="color:#6CB6FF;">cascade</span><span style="color:#ADBAC7;"> </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> CascadeType.ALL)</span></span>
<span class="line"><span style="color:#F47067;">private</span><span style="color:#ADBAC7;"> List</span><span style="color:#F69D50;">&lt;</span><span style="color:#F47067;">Question</span><span style="color:#F69D50;">&gt; </span><span style="color:#ADBAC7;">questions;</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">@</span><span style="color:#D73A49;">OneToMany</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">mappedBy</span><span style="color:#D73A49;">=</span><span style="color:#032F62;">&quot;enquete&quot;</span><span style="color:#24292E;">, </span><span style="color:#005CC5;">cascade</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> CascadeType.ALL)</span></span>
<span class="line"><span style="color:#D73A49;">private</span><span style="color:#24292E;"> List&lt;</span><span style="color:#D73A49;">Question</span><span style="color:#24292E;">&gt; questions;</span></span></code></pre></div><h2 id="manytomany" tabindex="-1">@ManyToMany <a class="header-anchor" href="#manytomany" aria-label="Permalink to &quot;@ManyToMany&quot;">​</a></h2><p>Indique une liste dans chaque classe. Entre les deux classes il y a deux associations dirigées (allant dans des directions oposées) avec une multiplicité 0..* pour chaque association.</p><p>Exemple : à une enquête correspond plusieurs sites internet. Un site internet est utilisé par plusieurs enquête. En base une table de mapping sera créée.</p><p>L’attribut <code>mappedBy</code> doit figurer uniquement sur une des deux annotations sinon l’exception <code>AnnotationException</code> est levée avec le message suivant: Illegal use of mappedBy on both sides of the relationship On choisit de mettre l’attribut <code>mappedBy</code> sur la classe satellite, dans ce projet la classe centrale est Enquete, les classes autour sont les classes satellites.</p><p>Dans l’exemple ci-dessous, l’enregistrement d’un objet de type Enquete “alimentera” bien la table de mapping car dans la classe SitePartenaire on a le code suivant:</p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki github-dark-dimmed vp-code-dark"><code><span class="line"><span style="color:#ADBAC7;">@</span><span style="color:#F47067;">ManyToMany</span><span style="color:#ADBAC7;">(</span><span style="color:#6CB6FF;">mappedBy</span><span style="color:#F47067;">=</span><span style="color:#96D0FF;">&quot;sitesPartenaires&quot;</span><span style="color:#ADBAC7;">)</span></span>
<span class="line"><span style="color:#F47067;">private</span><span style="color:#ADBAC7;"> Set</span><span style="color:#F69D50;">&lt;</span><span style="color:#F47067;">EnqueteInternet</span><span style="color:#F69D50;">&gt; </span><span style="color:#ADBAC7;">enquetes;</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">@</span><span style="color:#D73A49;">ManyToMany</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">mappedBy</span><span style="color:#D73A49;">=</span><span style="color:#032F62;">&quot;sitesPartenaires&quot;</span><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#D73A49;">private</span><span style="color:#24292E;"> Set&lt;</span><span style="color:#D73A49;">EnqueteInternet</span><span style="color:#24292E;">&gt; enquetes;</span></span></code></pre></div><p>Hibernate va remplir la liste sitesPartenaires avec ce qui a été choisi dans la liste multiple (select)</p><p><img src="/Java/assets/enquete_select.96696115.png" alt="enquete_select"></p><h2 id="joincolumn" tabindex="-1">@JoinColumn <a class="header-anchor" href="#joincolumn" aria-label="Permalink to &quot;@JoinColumn&quot;">​</a></h2><p>Redéfinit la colonne sur laquelle il existe une contrainte de clé étrangère</p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki github-dark-dimmed vp-code-dark"><code><span class="line"><span style="color:#ADBAC7;">@</span><span style="color:#F47067;">ManyToOne</span></span>
<span class="line"><span style="color:#ADBAC7;">@</span><span style="color:#F47067;">JoinColumn</span><span style="color:#ADBAC7;">(</span><span style="color:#6CB6FF;">name</span><span style="color:#ADBAC7;"> </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> </span><span style="color:#96D0FF;">&quot;idEnquete&quot;</span><span style="color:#ADBAC7;">)</span></span>
<span class="line"><span style="color:#F47067;">private</span><span style="color:#ADBAC7;"> Enquete</span><span style="color:#F69D50;"> </span><span style="color:#ADBAC7;">enquete;</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">@</span><span style="color:#D73A49;">ManyToOne</span></span>
<span class="line"><span style="color:#24292E;">@</span><span style="color:#D73A49;">JoinColumn</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">name</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;idEnquete&quot;</span><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#D73A49;">private</span><span style="color:#24292E;"> Enquete enquete;</span></span></code></pre></div><h2 id="jointable" tabindex="-1">@JoinTable <a class="header-anchor" href="#jointable" aria-label="Permalink to &quot;@JoinTable&quot;">​</a></h2><p>Renomme la table de mapping (créée par un ManyToMany)</p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki github-dark-dimmed vp-code-dark"><code><span class="line"><span style="color:#ADBAC7;">@</span><span style="color:#F47067;">ManyToMany</span></span>
<span class="line"><span style="color:#ADBAC7;"> @</span><span style="color:#F47067;">JoinTable</span><span style="color:#ADBAC7;">(</span><span style="color:#6CB6FF;">name</span><span style="color:#ADBAC7;"> </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> </span><span style="color:#96D0FF;">&quot;enquetesInternet_SitesPartenaires&quot;</span><span style="color:#ADBAC7;">)</span></span>
<span class="line"><span style="color:#ADBAC7;"> </span><span style="color:#F47067;">private</span><span style="color:#ADBAC7;"> List</span><span style="color:#F69D50;">&lt;</span><span style="color:#F47067;">SiteParteneraire</span><span style="color:#F69D50;">&gt; </span><span style="color:#ADBAC7;">sitesPartenaires;</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">@</span><span style="color:#D73A49;">ManyToMany</span></span>
<span class="line"><span style="color:#24292E;"> @</span><span style="color:#D73A49;">JoinTable</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">name</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;enquetesInternet_SitesPartenaires&quot;</span><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#24292E;"> </span><span style="color:#D73A49;">private</span><span style="color:#24292E;"> List&lt;</span><span style="color:#D73A49;">SiteParteneraire</span><span style="color:#24292E;">&gt; sitesPartenaires;</span></span></code></pre></div><h2 id="inheritance" tabindex="-1">@Inheritance <a class="header-anchor" href="#inheritance" aria-label="Permalink to &quot;@Inheritance&quot;">​</a></h2><p>La classe Enquete est la classe mère des classes EnqueteTelephonique et EnqueteInternet. L’annotation <code>@Inheritance</code> permet de préciser la stratégie dans la manière de créer les tables liées à la notion d&#39;héritage</p><ul><li><code>strategy=InheritanceType.TABLE_PER_CLASS</code> : duplique les données pour éviter les opérations de jointure</li></ul><p><img src="/Java/assets/inheritance1.f70d4e5b.png" alt="inheritance1"></p><div class="info custom-block"><p class="custom-block-title">INFO</p><p>NB : en choisissant cette stratégie d’héritage, la stratégie de génération de l’id dans la classe mère Enquete ne peut pas être IDENTITY. Il faudra choisir entre <code>AUTO</code>, <code>SEQUENCE</code> et <code>TABLE</code>.</p></div><ul><li><p><code>strategy=InheritanceType.SINGLE_TABLE</code> : classe mère et classes filles sont représentées par une table unique. La colonne <code>DTYPE</code> contiendra en toutes lettres le nom de la classe fille dont l’objet est une instance. Dans notre exemple : EnqueteTelephonique ou EnqueteInternet</p><p><img src="/Java/assets/inheritance2.82020c21.png" alt="inheritance2"></p></li></ul><p>La table Enquete va contenir des enregistrements correspondants à des enquêtes téléphoniques et des enregistrements correspondants à des enquêtes Internet</p><ul><li><code>strategy=InheritanceType.JOINED</code> : classe mère et classes filles sont représentées chacune par une table.</li></ul><p><img src="/Java/assets/inheritance3.52d7c633.png" alt="inheritance3"></p><p>Dans la table représentant la classe mère, on trouvera les attributs communs à toutes les classes filles. Dans la table représentant la classe fille, on trouvera les informations propres à la classe fille. Si la stratégie n’est pas précisée, la stratégie <code>SINGLE_TABLE</code> est utilisée. L’annotation <code>@Inheritance</code> se place sur la classe mère.</p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki github-dark-dimmed vp-code-dark"><code><span class="line"><span style="color:#ADBAC7;">@</span><span style="color:#F47067;">Entity</span></span>
<span class="line"><span style="color:#ADBAC7;">@</span><span style="color:#F47067;">Inheritance</span><span style="color:#ADBAC7;">(</span><span style="color:#6CB6FF;">strategy</span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;">InheritanceType.SINGLE_TABLE)</span></span>
<span class="line"><span style="color:#F47067;">public</span><span style="color:#ADBAC7;"> </span><span style="color:#F47067;">abstract</span><span style="color:#ADBAC7;"> </span><span style="color:#F47067;">class</span><span style="color:#ADBAC7;"> </span><span style="color:#F69D50;">Enquete</span><span style="color:#ADBAC7;"> {}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">@</span><span style="color:#D73A49;">Entity</span></span>
<span class="line"><span style="color:#24292E;">@</span><span style="color:#D73A49;">Inheritance</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">strategy</span><span style="color:#D73A49;">=</span><span style="color:#24292E;">InheritanceType.SINGLE_TABLE)</span></span>
<span class="line"><span style="color:#D73A49;">public</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">abstract</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">class</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">Enquete</span><span style="color:#24292E;"> {}</span></span></code></pre></div><p>La classe fille EnqueteTelephonique est déclare ainsi:</p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki github-dark-dimmed vp-code-dark"><code><span class="line"><span style="color:#ADBAC7;">@</span><span style="color:#F47067;">Entity</span></span>
<span class="line"><span style="color:#F47067;">public</span><span style="color:#ADBAC7;"> </span><span style="color:#F47067;">class</span><span style="color:#ADBAC7;"> </span><span style="color:#F69D50;">EnqueteTelephonique</span><span style="color:#ADBAC7;"> </span><span style="color:#F47067;">extends</span><span style="color:#ADBAC7;"> </span><span style="color:#6CB6FF;">Enquete</span><span style="color:#ADBAC7;"> {}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">@</span><span style="color:#D73A49;">Entity</span></span>
<span class="line"><span style="color:#D73A49;">public</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">class</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">EnqueteTelephonique</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">extends</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">Enquete</span><span style="color:#24292E;"> {}</span></span></code></pre></div><h2 id="discriminatorvalue" tabindex="-1">@DiscriminatorValue <a class="header-anchor" href="#discriminatorvalue" aria-label="Permalink to &quot;@DiscriminatorValue&quot;">​</a></h2><p>Cette annotation sert uniquement dans les classes filles et avec la stratégie d’héritage <code>SINGLE_TABLE</code>. Elle permet de redéfinir la valeur qui sera ajoutée dans la colonne discriminante (par défaut nommée <code>DTYPE</code>)</p><h2 id="discriminatorcolumn" tabindex="-1">@DiscriminatorColumn <a class="header-anchor" href="#discriminatorcolumn" aria-label="Permalink to &quot;@DiscriminatorColumn&quot;">​</a></h2><p>Définit le nom de la colonne discriminante dans la table représentant la classe mère. En l’absence de cette annotation, la colonne discriminante se nomme <code>DTYPE</code>. Cette annotation sert uniquement lorsque la stratégie d’héritage est <code>SINGLE_TABLE</code>.</p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki github-dark-dimmed vp-code-dark"><code><span class="line"><span style="color:#ADBAC7;">@</span><span style="color:#F47067;">Entity</span></span>
<span class="line"><span style="color:#ADBAC7;">@</span><span style="color:#F47067;">Inheritance</span><span style="color:#ADBAC7;">(</span><span style="color:#6CB6FF;">strategy</span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;">InheritanceType.SINGLE_TABLE)</span></span>
<span class="line"><span style="color:#ADBAC7;">@</span><span style="color:#F47067;">DiscriminatorColumn</span><span style="color:#ADBAC7;">(</span><span style="color:#6CB6FF;">name</span><span style="color:#F47067;">=</span><span style="color:#96D0FF;">&quot;TypeEnquete&quot;</span><span style="color:#ADBAC7;">)</span></span>
<span class="line"><span style="color:#F47067;">public</span><span style="color:#ADBAC7;"> </span><span style="color:#F47067;">abstract</span><span style="color:#ADBAC7;"> </span><span style="color:#F47067;">class</span><span style="color:#ADBAC7;"> </span><span style="color:#F69D50;">Enquete</span><span style="color:#ADBAC7;"> {}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">@</span><span style="color:#D73A49;">Entity</span></span>
<span class="line"><span style="color:#24292E;">@</span><span style="color:#D73A49;">Inheritance</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">strategy</span><span style="color:#D73A49;">=</span><span style="color:#24292E;">InheritanceType.SINGLE_TABLE)</span></span>
<span class="line"><span style="color:#24292E;">@</span><span style="color:#D73A49;">DiscriminatorColumn</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">name</span><span style="color:#D73A49;">=</span><span style="color:#032F62;">&quot;TypeEnquete&quot;</span><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#D73A49;">public</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">abstract</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">class</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">Enquete</span><span style="color:#24292E;"> {}</span></span></code></pre></div><h2 id="mappedsuperclass" tabindex="-1">@MappedSuperClass <a class="header-anchor" href="#mappedsuperclass" aria-label="Permalink to &quot;@MappedSuperClass&quot;">​</a></h2><p>Cette annotation s’utilise sur une classe mère abstraite. Cette classe mère abstraite ne pourra pas être référencée dans des entités avec les relations <code>@ManyToOne</code>, <code>@ManyToMany</code> ou <code>@OneToOne</code>. Elle remplace l’annotation <code>@Entity</code>. Les attributs de la classe annotée <code>@MappedSuperClass</code> seront propagés dans les classes filles.</p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki github-dark-dimmed vp-code-dark"><code><span class="line"><span style="color:#ADBAC7;">@</span><span style="color:#F47067;">MappedSuperClass</span></span>
<span class="line"><span style="color:#F47067;">public</span><span style="color:#ADBAC7;"> </span><span style="color:#F47067;">abstract</span><span style="color:#ADBAC7;"> </span><span style="color:#F47067;">class</span><span style="color:#ADBAC7;"> </span><span style="color:#F69D50;">Enquete</span><span style="color:#ADBAC7;"> {}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">@</span><span style="color:#D73A49;">MappedSuperClass</span></span>
<span class="line"><span style="color:#D73A49;">public</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">abstract</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">class</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">Enquete</span><span style="color:#24292E;"> {}</span></span></code></pre></div><h2 id="namedquery" tabindex="-1">@NamedQuery <a class="header-anchor" href="#namedquery" aria-label="Permalink to &quot;@NamedQuery&quot;">​</a></h2><p>Déclare une requête HQL qui sera accessible par toutes les classes du projet</p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki github-dark-dimmed vp-code-dark"><code><span class="line"><span style="color:#ADBAC7;">@</span><span style="color:#F47067;">Entity</span></span>
<span class="line"><span style="color:#ADBAC7;">@</span><span style="color:#F47067;">NamedQuery</span><span style="color:#ADBAC7;">(</span><span style="color:#6CB6FF;">name</span><span style="color:#F47067;">=</span><span style="color:#96D0FF;">&quot;Joueur.findAll&quot;</span><span style="color:#ADBAC7;">, </span><span style="color:#6CB6FF;">query</span><span style="color:#F47067;">=</span><span style="color:#96D0FF;">&quot;SELECT j FROM Joueur j&quot;</span><span style="color:#ADBAC7;">)</span></span>
<span class="line"><span style="color:#F47067;">public</span><span style="color:#ADBAC7;"> </span><span style="color:#F47067;">class</span><span style="color:#ADBAC7;"> </span><span style="color:#F69D50;">Joueur</span><span style="color:#ADBAC7;"> {}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">@</span><span style="color:#D73A49;">Entity</span></span>
<span class="line"><span style="color:#24292E;">@</span><span style="color:#D73A49;">NamedQuery</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">name</span><span style="color:#D73A49;">=</span><span style="color:#032F62;">&quot;Joueur.findAll&quot;</span><span style="color:#24292E;">, </span><span style="color:#005CC5;">query</span><span style="color:#D73A49;">=</span><span style="color:#032F62;">&quot;SELECT j FROM Joueur j&quot;</span><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#D73A49;">public</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">class</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">Joueur</span><span style="color:#24292E;"> {}</span></span></code></pre></div><h2 id="cache" tabindex="-1">@Cache <a class="header-anchor" href="#cache" aria-label="Permalink to &quot;@Cache&quot;">​</a></h2><p>Hibernate met en cache des objets dans chaque session. Chaque session constitue un cache de premier niveau. L’annotation <code>@Cache</code> configure l’entité dans le cache de second niveau. Cette configuration utilise l’énumération <code>CacheConcurrencyStrategy</code> qui met à disposition cinq stratégies : <code>NONE</code>, <code>READ_ONLY</code>, <code>NONSTRICT_READ_WRITE</code>, <code>READ_WRITE</code> et <code>TRANSACTIONAL</code>.</p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki github-dark-dimmed vp-code-dark"><code><span class="line"><span style="color:#ADBAC7;">@</span><span style="color:#F47067;">Entity</span></span>
<span class="line"><span style="color:#ADBAC7;">@</span><span style="color:#F47067;">Cache</span><span style="color:#ADBAC7;">(</span><span style="color:#6CB6FF;">usage</span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;">CacheConcurrencyStrategy.READ_WRITE)</span></span>
<span class="line"><span style="color:#F47067;">public</span><span style="color:#ADBAC7;"> </span><span style="color:#F47067;">class</span><span style="color:#ADBAC7;"> </span><span style="color:#F69D50;">Theme</span><span style="color:#ADBAC7;"> {}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">@</span><span style="color:#D73A49;">Entity</span></span>
<span class="line"><span style="color:#24292E;">@</span><span style="color:#D73A49;">Cache</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">usage</span><span style="color:#D73A49;">=</span><span style="color:#24292E;">CacheConcurrencyStrategy.READ_WRITE)</span></span>
<span class="line"><span style="color:#D73A49;">public</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">class</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">Theme</span><span style="color:#24292E;"> {}</span></span></code></pre></div><h2 id="foreignkey" tabindex="-1">@ForeignKey <a class="header-anchor" href="#foreignkey" aria-label="Permalink to &quot;@ForeignKey&quot;">​</a></h2><p>La particularité de cette annotation vient du fait qu’elle ne peut annoter un élément Java comme une classe, une méthode ou un attribut car sa cible est définie comme suit :</p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki github-dark-dimmed vp-code-dark"><code><span class="line"><span style="color:#ADBAC7;">@</span><span style="color:#F47067;">Target</span><span style="color:#ADBAC7;">({})</span></span>
<span class="line"><span style="color:#ADBAC7;"> @</span><span style="color:#F47067;">Retention</span><span style="color:#ADBAC7;">(RetentionPolicy.RUNTIME)</span></span>
<span class="line"><span style="color:#ADBAC7;"> </span><span style="color:#F47067;">public</span><span style="color:#ADBAC7;"> @</span><span style="color:#F47067;">interface</span><span style="color:#ADBAC7;"> </span><span style="color:#F47067;">ForeignKey</span><span style="color:#ADBAC7;"> {}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">@</span><span style="color:#D73A49;">Target</span><span style="color:#24292E;">({})</span></span>
<span class="line"><span style="color:#24292E;"> @</span><span style="color:#D73A49;">Retention</span><span style="color:#24292E;">(RetentionPolicy.RUNTIME)</span></span>
<span class="line"><span style="color:#24292E;"> </span><span style="color:#D73A49;">public</span><span style="color:#24292E;"> @</span><span style="color:#D73A49;">interface</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">ForeignKey</span><span style="color:#24292E;"> {}</span></span></code></pre></div><p>De ce fait, elle peut seulement être utilisée dans le paramètre d’une annotation, exemple :</p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki github-dark-dimmed vp-code-dark"><code><span class="line"><span style="color:#ADBAC7;">@</span><span style="color:#F47067;">ManyToOne</span></span>
<span class="line"><span style="color:#ADBAC7;">@</span><span style="color:#F47067;">JoinColumn</span><span style="color:#ADBAC7;">(</span><span style="color:#6CB6FF;">foreignKey</span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;">@</span><span style="color:#F47067;">ForeignKey</span><span style="color:#ADBAC7;">(</span><span style="color:#6CB6FF;">name</span><span style="color:#F47067;">=</span><span style="color:#96D0FF;">&quot;fk_theme&quot;</span><span style="color:#ADBAC7;">))</span></span>
<span class="line"><span style="color:#F47067;">private</span><span style="color:#ADBAC7;"> Theme</span><span style="color:#F69D50;"> </span><span style="color:#ADBAC7;">theme;</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">@</span><span style="color:#D73A49;">ManyToOne</span></span>
<span class="line"><span style="color:#24292E;">@</span><span style="color:#D73A49;">JoinColumn</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">foreignKey</span><span style="color:#D73A49;">=</span><span style="color:#24292E;">@</span><span style="color:#D73A49;">ForeignKey</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">name</span><span style="color:#D73A49;">=</span><span style="color:#032F62;">&quot;fk_theme&quot;</span><span style="color:#24292E;">))</span></span>
<span class="line"><span style="color:#D73A49;">private</span><span style="color:#24292E;"> Theme theme;</span></span></code></pre></div><h2 id="transient" tabindex="-1">@Transient <a class="header-anchor" href="#transient" aria-label="Permalink to &quot;@Transient&quot;">​</a></h2><p>Permet de définir un attribut dans la classe sans qu’une colonne soit ajoutée dans la table associée. Dans l’exemple ci-dessous Hibernate ne va pas créer une colonne prixTTC dans la table associée à l’entité JPA :</p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki github-dark-dimmed vp-code-dark"><code><span class="line"><span style="color:#ADBAC7;">@</span><span style="color:#F47067;">Transient</span></span>
<span class="line"><span style="color:#F47067;">private</span><span style="color:#ADBAC7;"> </span><span style="color:#F47067;">float</span><span style="color:#F69D50;"> </span><span style="color:#ADBAC7;">prixTTC;</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">@</span><span style="color:#D73A49;">Transient</span></span>
<span class="line"><span style="color:#D73A49;">private</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">float</span><span style="color:#24292E;"> prixTTC;</span></span></code></pre></div><h2 id="fetch" tabindex="-1">@Fetch <a class="header-anchor" href="#fetch" aria-label="Permalink to &quot;@Fetch&quot;">​</a></h2><p>Demande à Hibernate d’alimenter automatiquement les listes d’objets. Il existe trois modes de récupération : <code>JOIN</code>, <code>SELECT</code> et <code>SUBSELECT</code></p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki github-dark-dimmed vp-code-dark"><code><span class="line"><span style="color:#ADBAC7;">@</span><span style="color:#F47067;">Fetch</span><span style="color:#ADBAC7;">(</span><span style="color:#6CB6FF;">value</span><span style="color:#ADBAC7;"> </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> FetchMode.SELECT)</span></span>
<span class="line"><span style="color:#ADBAC7;">@</span><span style="color:#F47067;">ManyToMany</span></span>
<span class="line"><span style="color:#F47067;">private</span><span style="color:#ADBAC7;"> List</span><span style="color:#F69D50;">&lt;</span><span style="color:#F47067;">Question</span><span style="color:#F69D50;">&gt; </span><span style="color:#ADBAC7;">questions;</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">@</span><span style="color:#D73A49;">Fetch</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">value</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> FetchMode.SELECT)</span></span>
<span class="line"><span style="color:#24292E;">@</span><span style="color:#D73A49;">ManyToMany</span></span>
<span class="line"><span style="color:#D73A49;">private</span><span style="color:#24292E;"> List&lt;</span><span style="color:#D73A49;">Question</span><span style="color:#24292E;">&gt; questions;</span></span></code></pre></div></div></div></main><footer class="VPDocFooter" data-v-281cfc61 data-v-9f442026><!--[--><!--]--><!----><nav class="prev-next" data-v-9f442026><div class="pager" data-v-9f442026><!----></div><div class="pager" data-v-9f442026><a class="pager-link next" href="/Java/src/annotations/articles/introduction.html" data-v-9f442026><span class="desc" data-v-9f442026>Page Suivante</span><span class="title" data-v-9f442026>Introduction</span></a></div></nav></footer><!--[--><!--]--></div></div></div><!--[--><!--]--></div></div><!----><!--[--><!--]--></div></div>
    <script>window.__VP_HASH_MAP__=JSON.parse("{\"index.md\":\"042be6be\",\"src_annotations_articles_introduction.md\":\"333499fa\",\"src_annotations_articles_jackson.md\":\"ae1c13b1\",\"src_annotations_articles_lombok.md\":\"d13cd20b\",\"src_annotations_articles_hibernate.md\":\"60e12332\",\"src_annotations_articles_java_lang.md\":\"37677e57\",\"src_annotations_articles_swagger.md\":\"e4b62dfa\",\"src_cookbook_articles_documentation.md\":\"d5a31295\",\"src_cookbook_articles_dao.md\":\"cfb7678a\",\"src_cookbook_articles_application_properties.md\":\"94d26b91\",\"src_cookbook_articles_controlleur.md\":\"0ea342a6\",\"src_annotations_articles_validation.md\":\"0ffa4ab4\",\"src_cookbook_articles_api_rest.md\":\"15ba3b8f\",\"src_cookbook_articles_introduction.md\":\"beca0b9f\",\"src_cookbook_articles_service.md\":\"9a5a766e\",\"src_cookbook_articles_annexes.md\":\"e6aa6f05\",\"src_annotations_articles_spring.md\":\"3c74766a\",\"src_cookbook_articles_classes_business.md\":\"e3440f61\",\"src_cookbook_articles_test.md\":\"ae135ebc\",\"src_cookbook_articles_spring_initializer.md\":\"df5e93a3\",\"src_cookbook_articles_web_inf.md\":\"f35d1bb9\"}");window.__VP_SITE_DATA__=JSON.parse("{\"lang\":\"en-US\",\"dir\":\"ltr\",\"title\":\"Java Annotations\",\"description\":\"Memento Annotation Java\",\"base\":\"/Java/\",\"head\":[],\"appearance\":true,\"themeConfig\":{\"logo\":\"https://www.clelia.fr/images/Header.png\",\"lastUpdated\":{\"text\":\"Dernière mise à jour le\",\"formatOptions\":{\"dateStyle\":\"full\",\"timeStyle\":\"medium\"}},\"nav\":[{\"text\":\"Accueil\",\"link\":\"/\"},{\"text\":\"Menu\",\"items\":[{\"text\":\"Annotations Java\",\"link\":\"src/annotations/articles/introduction\"},{\"text\":\"Cookbook\",\"link\":\"src/cookbook/articles/introduction\"}]}],\"sidebar\":{\"src/annotations/\":[{\"text\":\"Annotations\",\"items\":[{\"text\":\"Introduction\",\"link\":\"src/annotations/articles/introduction\"},{\"text\":\"Hibernate\",\"link\":\"src/annotations/articles/hibernate\"},{\"text\":\"Java_lang\",\"link\":\"src/annotations/articles/java_lang\"},{\"text\":\"Spring\",\"link\":\"src/annotations/articles/spring\"},{\"text\":\"Lombok\",\"link\":\"src/annotations/articles/lombok\"},{\"text\":\"Validation\",\"link\":\"src/annotations/articles/validation\"},{\"text\":\"Swagger\",\"link\":\"src/annotations/articles/swagger\"},{\"text\":\"Jackson\",\"link\":\"src/annotations/articles/jackson\"}]}],\"src/cookbook/\":[{\"text\":\"Cookbook\",\"items\":[{\"text\":\"Introduction\",\"link\":\"src/cookbook/articles/introduction\"},{\"text\":\"Spring Initializer\",\"link\":\"src/cookbook/articles/spring_initializer\"},{\"text\":\"Application.properties\",\"link\":\"src/cookbook/articles/application_properties\"},{\"text\":\"Classes business\",\"link\":\"src/cookbook/articles/classes_business\"},{\"text\":\"Dao\",\"link\":\"src/cookbook/articles/dao\"},{\"text\":\"Service\",\"link\":\"src/cookbook/articles/service\"},{\"text\":\"Controlleur\",\"link\":\"src/cookbook/articles/controlleur\"},{\"text\":\"WEB-INF\",\"link\":\"src/cookbook/articles/web_inf\"},{\"text\":\"API Rest\",\"link\":\"src/cookbook/articles/api_rest\"},{\"text\":\"Test\",\"link\":\"src/cookbook/articles/test\"},{\"text\":\"Documentation API\",\"link\":\"src/cookbook/articles/documentation\"},{\"text\":\"Annexes\",\"link\":\"src/cookbook/articles/annexes\"}]}]},\"search\":{\"provider\":\"local\"},\"socialLinks\":[{\"icon\":\"github\",\"link\":\"https://github.com/vuejs/vitepress\"}],\"docFooter\":{\"prev\":\"Page précédente\",\"next\":\"Page Suivante\"}},\"locales\":{},\"scrollOffset\":90,\"cleanUrls\":false}");</script>
    
  </body>
</html>