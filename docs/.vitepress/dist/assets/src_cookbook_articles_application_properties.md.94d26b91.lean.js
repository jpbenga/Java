import{_ as p,v as l,b as o,F as e,L as s,E as t,O as r,R as a,M as c}from"./chunks/framework.bf5b583c.js";const i="/Java/assets/h2.dc46a95e.png",j=JSON.parse('{"title":"Application.properties","description":"","frontmatter":{},"headers":[],"relativePath":"src/cookbook/articles/application_properties.md","filePath":"src/cookbook/articles/application_properties.md","lastUpdated":null}'),d={name:"src/cookbook/articles/application_properties.md"},g=a(`<h1 id="application-properties" tabindex="-1">Application.properties <a class="header-anchor" href="#application-properties" aria-label="Permalink to &quot;Application.properties&quot;">​</a></h1><ol><li><p>Décompresser le fichier zip dans le workspace d’Eclipse</p></li><li><p>Dans Eclipse, importer le projet Maven en utilisant l’assistant : File / Import / Existing Maven projects. Dans IntelliJ ouvrer le projet Maven. En cas d’erreur dans IntelliJ supprimer le dossier <code>.idea</code> et ouvrir de nouveau le projet.</p></li><li><p>Ajouter dans le fichier <code>pom.xml</code>, au niveau de la balise dependencies, les deux balises suivantes :</p></li></ol><div class="language-xml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">xml</span><pre class="shiki github-dark-dimmed vp-code-dark"><code><span class="line"><span style="color:#ADBAC7;">&lt;</span><span style="color:#8DDB8C;">dependency</span><span style="color:#ADBAC7;">&gt;</span></span>
<span class="line"><span style="color:#ADBAC7;">    &lt;</span><span style="color:#8DDB8C;">groupId</span><span style="color:#ADBAC7;">&gt;org.apache.tomcat.embed&lt;/</span><span style="color:#8DDB8C;">groupId</span><span style="color:#ADBAC7;">&gt;</span></span>
<span class="line"><span style="color:#ADBAC7;">    &lt;</span><span style="color:#8DDB8C;">artifactId</span><span style="color:#ADBAC7;">&gt;tomcat-embed-jasper&lt;/</span><span style="color:#8DDB8C;">artifactId</span><span style="color:#ADBAC7;">&gt;</span></span>
<span class="line"><span style="color:#ADBAC7;">&lt;/</span><span style="color:#8DDB8C;">dependency</span><span style="color:#ADBAC7;">&gt;</span></span>
<span class="line"><span style="color:#ADBAC7;">&lt;</span><span style="color:#8DDB8C;">dependency</span><span style="color:#ADBAC7;">&gt;</span></span>
<span class="line"><span style="color:#ADBAC7;">    &lt;</span><span style="color:#8DDB8C;">groupId</span><span style="color:#ADBAC7;">&gt;javax.servlet&lt;/</span><span style="color:#8DDB8C;">groupId</span><span style="color:#ADBAC7;">&gt;</span></span>
<span class="line"><span style="color:#ADBAC7;">    &lt;</span><span style="color:#8DDB8C;">artifactId</span><span style="color:#ADBAC7;">&gt;jstl&lt;/</span><span style="color:#8DDB8C;">artifactId</span><span style="color:#ADBAC7;">&gt;</span></span>
<span class="line"><span style="color:#ADBAC7;">&lt;/</span><span style="color:#8DDB8C;">dependency</span><span style="color:#ADBAC7;">&gt;</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">&lt;</span><span style="color:#22863A;">dependency</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"><span style="color:#24292E;">    &lt;</span><span style="color:#22863A;">groupId</span><span style="color:#24292E;">&gt;org.apache.tomcat.embed&lt;/</span><span style="color:#22863A;">groupId</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"><span style="color:#24292E;">    &lt;</span><span style="color:#22863A;">artifactId</span><span style="color:#24292E;">&gt;tomcat-embed-jasper&lt;/</span><span style="color:#22863A;">artifactId</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"><span style="color:#24292E;">&lt;/</span><span style="color:#22863A;">dependency</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"><span style="color:#24292E;">&lt;</span><span style="color:#22863A;">dependency</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"><span style="color:#24292E;">    &lt;</span><span style="color:#22863A;">groupId</span><span style="color:#24292E;">&gt;javax.servlet&lt;/</span><span style="color:#22863A;">groupId</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"><span style="color:#24292E;">    &lt;</span><span style="color:#22863A;">artifactId</span><span style="color:#24292E;">&gt;jstl&lt;/</span><span style="color:#22863A;">artifactId</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"><span style="color:#24292E;">&lt;/</span><span style="color:#22863A;">dependency</span><span style="color:#24292E;">&gt;</span></span></code></pre></div><p>La première balise incorpore Jasper au projet. Jasper convertit les JSPs en servlets. La seconde balise intègre la bibilothèque balises JSTL. Ce faisant les JSPs auront accès à toutes les balises de cette bibliothèque (if, when, choose, forEach, etc).</p><ol start="4"><li>Ajouter dans le fichier <code>src/main/resources/application.properties</code> les lignes suivantes :</li></ol><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark-dimmed vp-code-dark"><code><span class="line"><span style="color:#adbac7;">spring.jpa.show-sql=true</span></span>
<span class="line"><span style="color:#adbac7;">spring.jpa.generate-ddl=true</span></span>
<span class="line"><span style="color:#adbac7;">spring.jpa.hibernate.ddl-auto=update</span></span>
<span class="line"><span style="color:#adbac7;">spring.mvc.view.suffix=.jsp</span></span>
<span class="line"><span style="color:#adbac7;">spring.mvc.view.prefix=/WEB-INF/</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292e;">spring.jpa.show-sql=true</span></span>
<span class="line"><span style="color:#24292e;">spring.jpa.generate-ddl=true</span></span>
<span class="line"><span style="color:#24292e;">spring.jpa.hibernate.ddl-auto=update</span></span>
<span class="line"><span style="color:#24292e;">spring.mvc.view.suffix=.jsp</span></span>
<span class="line"><span style="color:#24292e;">spring.mvc.view.prefix=/WEB-INF/</span></span></code></pre></div><div class="info custom-block"><p class="custom-block-title">INFO</p><p>A noter : les autres valeurs de ddl-auto sont : <code>none</code>, <code>validate</code> , <code>create</code>, et <code>create-drop</code>. Avec la dernière valeur, Hibernate essaie de supprimer toutes les tables avant de les créer ce qui se révèle très utile en phase de développement.</p></div><p>4.1 Pour une base H2 en mémoire, le fichier de configuration doit également inclure :</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark-dimmed vp-code-dark"><code><span class="line"><span style="color:#adbac7;">spring.datasource.url=jdbc:h2:mem:enquetes</span></span>
<span class="line"><span style="color:#adbac7;">spring.datasource.driver-class-name=org.h2.Driver</span></span>
<span class="line"><span style="color:#adbac7;">spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.H2Dialect</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292e;">spring.datasource.url=jdbc:h2:mem:enquetes</span></span>
<span class="line"><span style="color:#24292e;">spring.datasource.driver-class-name=org.h2.Driver</span></span>
<span class="line"><span style="color:#24292e;">spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.H2Dialect</span></span></code></pre></div><p>Si une base H2 est utilisée en production, vérifier :</p>`,10),u=e("code",null,"pom.xml",-1),b=e("li",null,[s("que la propriété "),e("code",null,"spring.h2.console.enabled"),s(" est bien définie à vrai :")],-1),h=a('<div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark-dimmed vp-code-dark"><code><span class="line"><span style="color:#adbac7;">spring.h2.console.enabled=true</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292e;">spring.h2.console.enabled=true</span></span></code></pre></div><p>Ce faisant, la console H2 sera accessible à cette URL : <a href="http://localhost:8080/h2-console" target="_blank" rel="noreferrer">http://localhost:8080/h2-console</a></p><p><img src="'+i+`" alt="base h2"></p><p>Par défaut le champ User Name est sa. Le champ Password peut être laissé vide.</p><p>4.2 Pour une base H2 stockée sur le disque dur, le fichier de configuration doit également inclure :</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark-dimmed vp-code-dark"><code><span class="line"><span style="color:#adbac7;">spring.datasource.url=jdbc:h2:~/enquetes</span></span>
<span class="line"><span style="color:#adbac7;">spring.datasource.driver-class-name=org.h2.Driver</span></span>
<span class="line"><span style="color:#adbac7;">spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.H2Dialect</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292e;">spring.datasource.url=jdbc:h2:~/enquetes</span></span>
<span class="line"><span style="color:#24292e;">spring.datasource.driver-class-name=org.h2.Driver</span></span>
<span class="line"><span style="color:#24292e;">spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.H2Dialect</span></span></code></pre></div><div class="vp-code-group vp-adaptive-theme"><div class="tabs"><input type="radio" name="group-A5kbv" id="tab-bkbE7nn" checked="checked"><label for="tab-bkbE7nn">PostgreSQL</label><input type="radio" name="group-A5kbv" id="tab-ONSqSPf"><label for="tab-ONSqSPf">MySQL</label></div><div class="blocks"><div class="language-active vp-adaptive-theme active"><button title="Copy Code" class="copy"></button><span class="lang">active</span><pre class="shiki github-dark-dimmed vp-code-dark"><code><span class="line"><span style="color:#adbac7;">spring.datasource.url=jdbc:postgresql://localhost:5432/enquetes</span></span>
<span class="line"><span style="color:#adbac7;">spring.datasource.username=postgres</span></span>
<span class="line"><span style="color:#adbac7;">spring.datasource.driver-class-name=org.postgresql.Driver</span></span>
<span class="line"><span style="color:#adbac7;">spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.PostgreSQL10D</span></span>
<span class="line"><span style="color:#adbac7;">ialect</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292e;">spring.datasource.url=jdbc:postgresql://localhost:5432/enquetes</span></span>
<span class="line"><span style="color:#24292e;">spring.datasource.username=postgres</span></span>
<span class="line"><span style="color:#24292e;">spring.datasource.driver-class-name=org.postgresql.Driver</span></span>
<span class="line"><span style="color:#24292e;">spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.PostgreSQL10D</span></span>
<span class="line"><span style="color:#24292e;">ialect</span></span></code></pre></div><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark-dimmed vp-code-dark"><code><span class="line"><span style="color:#adbac7;">spring.datasource.url=jdbc:mysql://localhost:3306/enquetes?useSSL=false</span></span>
<span class="line"><span style="color:#adbac7;">spring.datasource.username=root</span></span>
<span class="line"><span style="color:#adbac7;">spring.datasource.password=spring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver</span></span>
<span class="line"><span style="color:#adbac7;">spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.MySQL8Dialect</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292e;">spring.datasource.url=jdbc:mysql://localhost:3306/enquetes?useSSL=false</span></span>
<span class="line"><span style="color:#24292e;">spring.datasource.username=root</span></span>
<span class="line"><span style="color:#24292e;">spring.datasource.password=spring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver</span></span>
<span class="line"><span style="color:#24292e;">spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.MySQL8Dialect</span></span></code></pre></div></div></div><p>4.5 Pour exposer les beans présents dans le conteneur de Spring (grâce à Actuator) :</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark-dimmed vp-code-dark"><code><span class="line"><span style="color:#adbac7;">management.endpoint.info.enabled=true</span></span>
<span class="line"><span style="color:#adbac7;">management.endpoints.web.base-path=/</span></span>
<span class="line"><span style="color:#adbac7;">management.endpoints.web.exposure.include=beans</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292e;">management.endpoint.info.enabled=true</span></span>
<span class="line"><span style="color:#24292e;">management.endpoints.web.base-path=/</span></span>
<span class="line"><span style="color:#24292e;">management.endpoints.web.exposure.include=beans</span></span></code></pre></div><p>Ce faisant la liste des beans contenus dans le conteneur de Spring sera accessible par l&#39;URL <a href="http://localhost:8080/beans" target="_blank" rel="noreferrer">http://localhost:8080/beans</a></p><p>4.6 Pour demander à Spring la gestion d’un fichier de journalisation :</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark-dimmed vp-code-dark"><code><span class="line"><span style="color:#adbac7;">logging.level.root=WARN</span></span>
<span class="line"><span style="color:#adbac7;">logging.level.org.springframework=WARN</span></span>
<span class="line"><span style="color:#adbac7;">logging.file.name=log/enquetes_log</span></span>
<span class="line"><span style="color:#adbac7;">logging.pattern.console= %d %p %c{1.} [%t] %m%n</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292e;">logging.level.root=WARN</span></span>
<span class="line"><span style="color:#24292e;">logging.level.org.springframework=WARN</span></span>
<span class="line"><span style="color:#24292e;">logging.file.name=log/enquetes_log</span></span>
<span class="line"><span style="color:#24292e;">logging.pattern.console= %d %p %c{1.} [%t] %m%n</span></span></code></pre></div><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>Les niveaux de log sont : <code>FATAL</code>, <code>ERROR</code>, <code>WARN</code>, <code>INFO</code>, <code>DEBUG</code>, <code>TRACE</code></p><p>Lien vers la document de Log4J concernant les patterns :</p></div><p><a href="https://logging.apache.org/log4j/2.x/manual/layouts.html" target="_blank" rel="noreferrer">https://logging.apache.org/log4j/2.x/manual/layouts.html</a> Par défaut Spring crée un nouveau fichier pour chaque jour ou dès que le fichier actuel de log atteint 10.5 Mo.</p><p>Exemple d’entrée dans le fichier de journalisation :</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark-dimmed vp-code-dark"><code><span class="line"><span style="color:#adbac7;">2022-01-07 08:32:18.382 WARN 12698 --- [restartedMain] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292e;">2022-01-07 08:32:18.382 WARN 12698 --- [restartedMain] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning</span></span></code></pre></div><div class="info custom-block"><p class="custom-block-title">INFO</p><p>Se référer à la documentation officielle pour bien comprendre comment modifier le fichier application.properties : <a href="https://docs.spring.io/spring-boot/docs/current/reference/html/application-properties.html" target="_blank" rel="noreferrer">https://docs.spring.io/spring-boot/docs/current/reference/html/application-properties.html</a></p></div>`,17);function y(v,m,f,A,k,D){const n=c("scope");return l(),o("div",null,[g,e("ul",null,[e("li",null,[s("que la balise "),t(n,null,{default:r(()=>[s("test")]),_:1}),s(" n’est pas présente dans la dépendance vers H2 du fichier "),u,s(".")]),b]),h])}const B=p(d,[["render",y]]);export{j as __pageData,B as default};
